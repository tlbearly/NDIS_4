function unloadHandler(e){}function addOverviewMap(){require(["esri/dijit/OverviewMap"],function(e){var r=new e({id:"ovMap",map:map,attachTo:"top-left",visible:!1});r.startup()})}function lookupAddress(){require(["dojo/dom"],function(e){"function"==typeof ga&&ga("send","event","address","click","Address","1");var r=e.byId("streetTxt").value,a=/([^a-zA-Z0-9 \-\',\.()])/g;if(a.test(r))return r=r.replace(a,""),e.byId("streetTxt").value=r,void alert("Illegal characters were removed from the address.","Warning");var t=e.byId("cityTxt").value;if(a=/([^a-zA-Z0-9 \-\'()])/g,a.test(t))return t=t.replace(a,""),e.byId("cityTxt").value=t,void alert("Illegal characters were removed from the city.","Warning");var l=e.byId("zipTxt").value;if(a=/([^0-9 \-])/g,a.test(l))return l=l.replace(a,""),e.byId("zipTxt").value=l,void alert("Illegal characters were removed from the zip code.","Warning");""!==r&&""!==t?require(["esri/geometry/Extent"],function(a){showLoading(),e.byId("addressLoading").style.display="block";var i={Address:r,City:t,Region:"CO",Postal:l};locator.outSpatialReference=map.spatialReference;var s=new a({xmin:-1235e4,ymin:425e4,xmax:-1115e4,ymax:525e4,spatialReference:{wkid:wkid}}),n={address:i,searchExtent:s};locator.addressToLocations(n,onAddressResults,onAddressFault)}):(hideLoading(),e.byId("addressLoading").style.display="none",alert("Street and City are required fields.","Warning"))})}function onAddressResults(e){try{require(["dojo/dom","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/graphic","esri/symbols/Font","esri/symbols/TextSymbol","dojo/_base/Color"],function(r,a,t,l,i,s,n){hideLoading(),r.byId("addressLoading").style.display="none";var o,d=new t("assets/images/i_address.png",30,30);return e.every(function(e){var r;e.score>40&&require(["esri/layers/GraphicsLayer","dojo/_base/Color"],function(a,t){o=e.location,r=new a,r.id="addressgraphics"+addressGraphicsCounter,addressGraphicsCount.push(r.id),addressGraphicsCounter++,r.add(new l(o,d));var n=e.address,y=new i("10pt",i.STYLE_NORMAL,i.VARIANT_NORMAL,i.WEIGHT_BOLD,"Helvetica"),u=new t([255,255,153,255]),c=new s(n,y,new t("#000000"));c.setOffset(0,-23);var p=new esri.symbol.TextSymbol(n,y,u);p.setOffset(1,-25);var g=new esri.symbol.TextSymbol(n,y,u);g.setOffset(0,-24);var m=new esri.symbol.TextSymbol(n,y,u);m.setOffset(0,-22);var b=new esri.symbol.TextSymbol(n,y,u);b.setOffset(-1,-21);var f=new esri.symbol.TextSymbol(n,y,u);f.setOffset(2,-23);var h=new esri.symbol.TextSymbol(n,y,u);return h.setOffset(-2,-23),r.add(new esri.Graphic(o,p)),r.add(new esri.Graphic(o,g)),r.add(new esri.Graphic(o,m)),r.add(new esri.Graphic(o,b)),r.add(new esri.Graphic(o,f)),r.add(new esri.Graphic(o,h)),r.add(new l(o,c)),map.addLayer(r),!1})}),void 0!==o?(map.centerAndZoom(o,6),!0):(alert("Address was not found.","Note"),!1)})}catch(e){return alert("Error looking up address: "+e.message,"Code Error",e),!1}}function onAddressFault(e){require(["dojo/dom"],function(r){hideLoading(),r.byId("addressLoading").style.display="none",alert("Error occurred searching for address. Address service may be down. Service name is: "+locator.url+". "+e.message,"Code Error",e)})}function clearAddress(){0!=addressGraphicsCount.length&&map.getLayer(addressGraphicsCount.pop()).clear()}function readConfig(){require(["dojo/dom","dojo/io-query","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/tasks/GeometryService","esri/SpatialReference","esri/tasks/ProjectParameters","esri/map","esri/geometry/Extent","esri/dijit/Popup","esri/symbols/SimpleFillSymbol","esri/tasks/locator","dijit/form/CheckBox","agsjs/dijit/TOC","esri/symbols/SimpleLineSymbol","esri/layers/ArcGISTiledMapServiceLayer","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer","esri/arcgis/utils","esri/dijit/Gallery","dojo/sniff"],function(e,r,a,t,l,i,s,n,o,d,y,u,c,p,g,m,b,f,h,v,O,w){function E(){try{var e;e=queryObj.prj&&""!=queryObj.prj?new i(parseInt(queryObj.prj)):new i(102100),queryObj.point&&""!=queryObj.point&&addPoints(queryObj.point,e),queryObj.line&&""!=queryObj.line&&addLines(queryObj.line,e),queryObj.poly&&""!=queryObj.poly&&addPolys(queryObj.poly,e),queryObj.rect&&""!=queryObj.rect&&addRects(queryObj.rect,e),queryObj.text&&""!=queryObj.text&&addLabels(queryObj.text,e),e=null}catch(e){alert("Error loading graphics from the URL. In javascript/readConfig.js. Error message: "+e.message,"URL Graphics Error",e)}}function L(){require(["dojo/promise/all","dojo/Deferred","dojo/json"],function(e,r,a){function t(e){0==e.status&&e.abort()}function l(e){var l=new r,i=new XMLHttpRequest;try{i.open("get",e.url+"?f=json");setTimeout(t.bind(null,i),3e3)}catch(r){return console.error(r),l.resolve({layer:e,resolution:!1}),l.promise}return i.onloadend=function(){if(200!==this.status)l.resolve({layer:e,resolution:!1});else{var r=a.parse(this.response);r.error?l.resolve({layer:e,resolution:!1}):l.resolve({layer:e,resolution:!0})}},i.send(),l.promise}for(var i,s=[],n=[],o=T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer"),d=-1,y=0;y<o.length;y++)n[y]={id:o[y].getAttribute("label"),url:o[y].getAttribute("url")},n[y].id.indexOf("Motor Vehicle")>-1&&(d=y);d>-1&&(i=n.length,n[n.length]={id:"Motor Vehicle Use Map",url:"https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/mvum/MapServer"}),n.forEach(function(e){s.push(l(e))});var u=new e(s);u.then(function(e){for(var r=!1,a=!1,t=[],l=0;l<e.length;l++)a=e[l].layer.id.indexOf("Motor Vehicle")>-1,e[l].resolution?1==a&&(d==l?e.pop():i==l&&(console.log("Layer loaded: "+e[l].layer.id+" "+e[l].layer.url),e[d].layer.url=e[l].layer.url,e[d].resolution=!0,e.pop(),r=!0,ourMVUM=!0)):(console.log("Layer failed to load: "+e[l].layer.id+" "+e[l].layer.url),-1==e[l].layer.id.indexOf("Motor Vehicle")&&(e[l].layer.id.indexOf("Wildfire")>-1?alert("The external map service that provides "+e[l].layer.id+" is experiencing problems.  This issue is out of CPW control.  We will make the National Interagency Fire Center aware of the issue.  We apologize for any inconvenience.","External (Non-CPW) Map Service Error"):e[l].layer.id.indexOf("BLM")>-1?alert("The external map service that provides "+e[l].layer.id+" is experiencing problems.  This issue is out of CPW control.  We will make the BLM aware of the issue.  We apologize for any inconvenience.","External (Non-CPW) Map Service Error"):alert(e[l].layer.id+" service is busy or not responding. Please try reloading this page.","Data Error"),t.push(e[l].layer.id)));if(t.length>0)for(r=!0,j=0;j<t.length;j++)for(l=0;l<e.length;l++)if(t[j]==e[l].layer.id){e.splice(l,1);break}I(e,r,ourMVUM)})})}function I(e,r,l){function i(e){try{var r,a=new Array(0,1,2,3,4,5,6,7,8,9),t=[];if(layerObj[e.layer.id]){if(t=e.layer.layerInfos,"Hunter Reference"==e.layer.id){for(r=0;r<layerObj[e.layer.id].visLayers.length;r++)if(t[layerObj[e.layer.id].visLayers[r]].name.substr(t[layerObj[e.layer.id].visLayers[r]].name.length-3,3).indexOf("GMU")>-1){gmu=t[layerObj[e.layer.id].visLayers[r]].name;break}}else if("Game Species"==e.layer.id)for(r=0;r<layerObj[e.layer.id].visLayers.length;r++){if("Bighorn Sheep"===t[layerObj[e.layer.id].visLayers[r]].name){gmu="Bighorn GMU";break}if("Mountain Goat"===t[layerObj[e.layer.id].visLayers[r]].name){gmu="Goat GMU";break}}if(!l){for(r=0;r<t.length;r++)-1!=layerObj[e.layer.id].visLayers.indexOf(t[r].id)?t[r].defaultVisibility=!0:-1==t[r].parentLayerId||t[r].subLayerIds?t[r].defaultVisibility=!1:t[r].name.substr(t[r].name.length-3,3).indexOf("GMU")>-1||1==t[r].defaultVisibility&&-1===layerObj[e.layer.id].visLayers.indexOf(t[r].parentLayerId)&&(layerObj[e.layer.id].visLayers.push(r),a.indexOf(parseInt(t[t[r].parentLayerId].name.substr(0,1)))>-1&&(layerObj[e.layer.id].visLayers.push(t[r].parentLayerId),t[t[r].parentLayerId].defaultVisibility=!0));e.layer.setVisibleLayers(layerObj[e.layer.id].visLayers.sort(function(e,r){return e-r})),e.layer.refresh()}}if(d=!0,e.layer.visible&&(d=!1),legendLayers.push({layer:e.layer,title:e.layer.id,autoToggle:!0,slider:!0,slider_ticks:3,slider_labels:["transparent","50%","opaque"],hideGroupSublayers:hideGroupSublayers,radioLayers:radioLayers,noLegend:!0,openSubLayers:[],collapsed:d}),mapLayers.push(e.layer),mapLayers.length==T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer").length){var i=[f.length],s=0;for(r=f.length-1;r>-1;r--)for(n=0;n<f.length;n++)if(legendLayers[n].title===f[r].getAttribute("label")){i[s++]=legendLayers[n];break}legendLayers=i;for(var n=0;n<mapLayers.length;n++)if("Hunter Reference"==mapLayers[n].id&&layerObj["Hunter Reference"]){for(t=null,t=mapLayers[n].layerInfos,r=0;r<t.length;r++)t[r].name.substr(t[r].name.length-3,3).indexOf("GMU")>-1&&(t[r].name==gmu?(-1==layerObj["Hunter Reference"].visLayers.indexOf(r)&&layerObj["Hunter Reference"].visLayers.push(r),t[r].defaultVisibility=!0,a.indexOf(parseInt(t[t[r].parentLayerId].name.substr(0,1)))>-1&&-1==layerObj["Hunter Reference"].visLayers.indexOf(t[r].parentLayerId)&&(layerObj["Hunter Reference"].visLayers.push(t[r].parentLayerId),t[t[r].parentLayerId].defaultVisibility=!0)):t[r].defaultVisibility=!1);mapLayers[n].setVisibleLayers(layerObj["Hunter Reference"].visLayers.sort(function(e,r){return e-r}))}map.addLayers(mapLayers)}}catch(e){alert("Error in readConfig.js/layerLoadHandler "+e.message,"Code Error",e)}}try{var s,n,o,d;if(r){var y=[];for(n=0;n<T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer").length;n++){var u=!1;for(o=0;o<e.length;o++)if(e[o].layer.id==T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[n].getAttribute("label")){u=!0,T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[n].setAttribute("url",e[o].layer.url);break}u||y.push(n)}for(n=y.length-1;n>=0;n--){var c=T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[y[n]];c.parentNode.removeChild(c)}if(l){var p=T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[0],g=T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer").length-1];g.parentNode.insertBefore(g,p),T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[0].setAttribute("open",!1),T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[0].setAttribute("alpha",.85)}}if(queryObj.layer&&""!=queryObj.layer){var m=queryObj.layer.substring(queryObj.layer.indexOf("|")+1).split(",");for(layerObj={},n=0;n<m.length;n++){var b=m[n].split("|");if(""!=b[0])for(b[0]=b[0].replace(/~/g," "),3==b.length&&b.push(!0),-1==b[2]?layerObj[b[0]]={opacity:b[1],visLayers:[],visible:!0}:layerObj[b[0]]={opacity:b[1],visLayers:b[2].split("-"),visible:"1"==b[3]},o=0;o<layerObj[b[0]].visLayers.length;o++)layerObj[b[0]].visLayers[o]=0|layerObj[b[0]].visLayers[o]}}try{T.getElementsByTagName("hideGroupSublayers")[0]&&T.getElementsByTagName("hideGroupSublayers")[0].firstChild&&(hideGroupSublayers=T.getElementsByTagName("hideGroupSublayers")[0].firstChild.nodeValue.split(","))}catch(e){alert("Warning: Missing hideGroupSublayers tag in "+app+"/config.xml file. "+e.message,"Data Error")}try{T.getElementsByTagName("radiolayers")[0]&&T.getElementsByTagName("radiolayers")[0].firstChild&&(radioLayers=T.getElementsByTagName("radiolayers")[0].firstChild.nodeValue.split(","))}catch(e){alert("Warning: Missing radiolayers tag in "+app+"/config.xml file. "+e.message,"Data Error")}var f=T.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer");for(n=0;n<f.length;n++){loadedFromCfg=!0;var h=f[n].getAttribute("label");if(queryObj.layer&&""!=queryObj.layer){if(f[n].getAttribute("url").toLowerCase().indexOf("mapserver")>-1)s=layerObj[h]?new a(f[n].getAttribute("url"),{opacity:layerObj[h].opacity,id:h,visible:layerObj[h].visible,visibleLayers:layerObj[h].visLayers}):new a(f[n].getAttribute("url"),{opacity:Number(f[n].getAttribute("alpha")),id:h,visible:!1});else{if(!(f[n].getAttribute("url").toLowerCase().indexOf("featureserver")>-1))return void alert("Unknown operational layer type. It must be of type MapServer or FeatureServer. Or edit readConfig.js line 600 to add new type.");s=layerObj[h]?new t(f[n].getAttribute("url"),{opacity:Number(f[n].getAttribute("alpha")),id:h,visible:layerObj[h].visible,visibleLayers:layerObj[h].visLayers}):new t(f[n].getAttribute("url"),{opacity:Number(f[n].getAttribute("alpha")),id:h,visible:!1})}loadedFromCfg=!1,s.loaded?i({layer:s}):s.on("load",i)}else if(f[n].getAttribute("url").toLowerCase().indexOf("mapserver")>-1)s="false"==f[n].getAttribute("visible")?new a(f[n].getAttribute("url"),{opacity:Number(f[n].getAttribute("alpha")),id:h,visible:!1}):new a(f[n].getAttribute("url"),{opacity:Number(f[n].getAttribute("alpha")),id:h,visible:!0});else{if(!(f[n].getAttribute("url").toLowerCase().indexOf("featureserver")>-1))return void alert("Unknown operational layer type. It must be of type MapServer or FeatureServer. Or edit readConfig.js line 600 to add new type.");s="false"==f[n].getAttribute("visible")?new t(f[n].getAttribute("url"),{opacity:Number(f[n].getAttribute("alpha")),id:h,visible:!1}):new t(f[n].getAttribute("url"),{opacity:Number(f[n].getAttribute("alpha")),id:h,visible:!0})}if(loadedFromCfg){d=!1,"false"==f[n].getAttribute("open")&&(d=!0);var v=[],j=f[n].getAttribute("opensublayer");j&&(v=j.split(",")),legendLayers.push({layer:s,title:f[n].getAttribute("label"),autoToggle:!0,slider:!0,slider_ticks:3,slider_labels:["transparent","50%","opaque"],hideGroupSublayers:hideGroupSublayers,radioLayers:radioLayers,noLegend:!0,openSubLayers:v,collapsed:d}),mapLayers.push(s),v=null,j=null}}loadedFromCfg&&(map.addLayers(mapLayers),legendLayers.reverse())}catch(e){alert("Error in readConfig.js/addMapLayers "+e.message,"Code Error",e)}}function q(){require(["dojo/dom","dijit/registry"],function(e,r){for(var a="",t=0;t<T.getElementsByTagName("widget").length;t++){var l="open"==T.getElementsByTagName("widget")[t].getAttribute("preload"),i=T.getElementsByTagName("widget")[t].getAttribute("label"),s=T.getElementsByTagName("widget")[t].getAttribute("height"),n=T.getElementsByTagName("widget")[t].getAttribute("video"),o=T.getElementsByTagName("widget")[t].getAttribute("icon");if(null!=i)if(a+=i,"Map Layers & Legend"==i)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Map Layers & Legend.","Data Error"),e.byId("tocHelp").href=n,o&&(document.getElementById("tocIcon").src=o),l&&r.byId("tocPane").toggle(),e.byId("tocPane").style.display="block",e.byId("tocPane").style.visibility="visible",s&&""!=s&&(document.getElementById("tocContent").style.height=s+"px");else if("HB1298 Report"==i)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Map Layers & Legend.","Data Error"),e.byId("hb1298Help").href=n,o&&(document.getElementById("hb1298Icon").src=o),document.getElementById("hb1298Pane").style.display="block",l&&(openedHB1298=!0,loadjscssfile("javascript/hb1298.js","js"));else if(i.indexOf("Resource Report")>0)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget "+i+".","Data Error"),e.byId("reportHelp").href=n,o&&(document.getElementById("reportIcon").src=o),e.byId("reportTitle").innerHTML=i,l&&r.byId("reportDiv").toggle(),e.byId("reportDiv").style.display="block",e.byId("reportDiv").style.visibility="visible",reportInit();else if("Feature Search"==i)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Feature Search.","Data Error"),e.byId("searchHelp").href=n,o&&(document.getElementById("searchIcon").src=o),l&&(r.byId("searchDiv").toggle(),openedFeatureSearch=!0,searchInit()),e.byId("searchDiv").style.display="block",e.byId("searchDiv").style.visibility="visible";else if("Address"==i){try{locator=new u(T.getElementsByTagName("addressservice")[0].getAttribute("url"))}catch(e){alert("Missing tag: addressservice in "+app+'/config.xml.\n\nTag should look like: &lt;addressservice url="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates"/&gt;\n\nWill use that url for now.',"Data Error"),locator=new u("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates")}null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Address.","Data Error"),o&&(document.getElementById("addressIcon").src=o),e.byId("addressHelp").href=n,l&&r.byId("addressPane").toggle(),e.byId("addressPane").style.display="block",e.byId("addressPane").style.visibility="visible"}else"Draw, Label, & Measure"==i?(null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Draw, Label, & Measure.","Data Error"),e.byId("drawHelp").href=n,o&&(document.getElementById("drawIcon").src=o),l&&r.byId("drawDiv").toggle(),e.byId("drawDiv").style.display="block",e.byId("drawDiv").style.visibility="visible"):"Bookmark"==i?(null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Bookmark.","Data Error"),e.byId("bookmarkHelp").href=n,o&&(document.getElementById("bookmarkIcon").src=o),setBookmarks(),l&&r.byId("bookmarkDiv").toggle(),e.byId("bookmarkDiv").style.display="block",e.byId("bookmarkDiv").style.visibility="visible"):"Settings"==i?(null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Settings.","Data Error"),e.byId("settingsHelp").href=n,o&&(document.getElementById("settingsIcon").src=o),l&&r.byId("settingsDiv").toggle(),e.byId("settingsDiv").style.display="block",e.byId("settingsDiv").style.visibility="visible"):"Find a Place"==i||("Print"==i?o&&(document.getElementById("printIcon").src=o):"Identify"==i||("GetExtent"==i?o&&(document.getElementById("extentIcon").src=o):"MapLink"==i?o&&(document.getElementById("linkIcon").src=o):alert("Error in "+app+"/config.xml widget. Label: "+i+" was not found.  \n\nAvailable options include:\n\tMap Layers & Legend\n\t<something> Resource Report \n\tFeature Search\n\tAddress\n\tDraw, Label, & Measure\n\tBookmark\n\tFind a Place\n\tPrint\n\tSettings\n\tIdentify\n Edit javascript/readConfig.js to change this.","Data Error")))}printInit(),-1==a.indexOf("Map Layers & Legend")?e.byId("tocPane").style.display="none":-1==a.indexOf("Resource Report")?e.byId("reportDiv").style.display="none":-1==a.indexOf("Feature Search")?e.byId("searchDiv").style.display="none":-1==a.indexOf("Address")?e.byId("addressPane").style.display="none":-1==a.indexOf("Draw, Label, & Measure")?e.byId("drawDiv").style.display="none":-1==a.indexOf("Bookmark")?e.byId("bookmarkDiv").style.display="none":-1==a.indexOf("Settings")&&(e.byId("settingsDiv").style.display="none");for(var d='<span class="link"><a href="'+app+'/help.html" target="help"><img src="assets/images/i_help.png"/>Help</a></span>',y=T.getElementsByTagName("links")[0].getElementsByTagName("link"),c="",p=0;p<y.length;p++)"Go Mobile"==y[p].getAttribute("label")?d+='<span class="link"><a href="'+window.location.href.replace("index","indexM")+'" target="_top"><img src="'+y[p].getAttribute("icon")+'"/>'+y[p].getAttribute("label")+"</a></span>":"Buy License!"==y[p].getAttribute("label")?(c=y[p].getAttribute("url").replace("%3F","?").replace("%26","&"),d+='<span class="link"><a id="licenseLink"><img src="'+y[p].getAttribute("icon")+'"/>'+y[p].getAttribute("label")+"</a></span>"):d+='<span class="link"><a href="'+y[p].getAttribute("url").replace("%3F","?").replace("%26","&")+'" target="_new"><img src="'+y[p].getAttribute("icon")+'"/>'+y[p].getAttribute("label")+"</a></span>";e.byId("links").innerHTML=d,document.getElementById("licenseLink")&&"function"==typeof ga&&document.getElementById("licenseLink").addEventListener("click",function(){ga("send","event","buy_license","click","Buy License","1"),window.open(c,"_new")}),L()})}function x(){require(["esri/layers/OpenStreetMapLayer","dojo/dom","dijit/registry","dojo/sniff","dojo/on"],function(e,r,a,t,l){try{if(mapBasemap="streets",queryObj.layer&&""!=queryObj.layer){var i=queryObj.layer.substring(0,queryObj.layer.indexOf("|")).split(",");0==i[0]?mapBasemap="streets":1==i[0]?mapBasemap="hybrid":2==i[0]?mapBasemap="topo":mapBasemap=i[0],i=null}map.infoWindow.resize(330,350),customLods=[{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822}],previewMap=new n("printPreviewMap",{extent:initExtent,autoResize:!0,showAttribution:!1,logo:!1,basemap:"streets",isRubberBandZoom:!0,isScrollWheelZoom:!0,isShiftDoubleClick:!0,displayGraphicsOnPan:!t("ie"),sliderStyle:"large",minScale:9244649,lods:customLods}),customLods=null;var s,o,d=[];s=new h({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}),o=new f({layers:[s],title:"Streets",id:"streets",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/f81bc478e12c4f1691d0d7ab6361f5a6/info/thumbnail/street_thumb_b2wm.jpg"}),d.push(o),layers=[];var y=new h({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"});layers.push(y),y=new h({styleUrl:"https://www.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",type:"VectorTileLayer",opacity:1}),layers.push(y),o=new f({layers:layers,title:"Aerial Photo",id:"hybrid",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/2ea9c9cf54cb494187b03a5057d1a830/info/thumbnail/Jhbrid_thumb_b2.jpg"}),d.push(o),s=new h({url:"https://services.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer"}),o=new f({layers:[s],title:"USGS Scanned Topo",id:"topo",thumbnailUrl:"assets/images/USA_topo.png"}),d.push(o),s=new h({url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer"}),o=new f({layers:[s],title:"USGS Digital Topo",id:"natgeo",thumbnailUrl:"https://usfs.maps.arcgis.com/sharing/rest/content/items/6d9fa6d159ae4a1f80b9e296ed300767/info/thumbnail/thumbnail.jpeg"}),d.push(o),layers=[],s=new h({url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer",displayLevels:[6,7,8,9,10,11,12,13,14,15,16]}),layers.push(s),s=new h({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",displayLevels:[17,18,19]}),layers.push(s),o=new f({layers:layers,title:"Aerial Photo with USGS Contours",id:"imagery_topo",thumbnailUrl:"assets/images/aerial_topo.png"}),d.push(o),s=new h({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}),o=new f({layers:[s],title:"ESRI Digital Topo",id:"topo2",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/588f0e0acc514c11bc7c898fed9fc651/info/thumbnail/topo_thumb_b2wm.jpg"}),d.push(o),basemapGallery=new b({map:map,basemaps:d,showArcGISBasemaps:!1});var u=!0;if(l(a.byId("basemapTitlePane"),"toggle",function(){u?(u=!1,document.getElementById("basemapDiv").style.overflow="auto",document.getElementById("basemapDiv").style.height="90%"):(u=!0,document.getElementById("basemapDiv").style.overflow="hidden",document.getElementById("basemapDiv").style.height="30px")}),!basemapGallery.showArcGISBasemaps){var c=[];basemapGallery.basemaps.forEach(function(e){c.push({thumbnailUrl:e.thumbnailUrl,id:e.id,layers:e.layers,title:e.title})});var p,g={},m=null;for(p=0;p<c.length;p++)if("Streets"==c[p].title){m=c[p],c.moveTo(m,0);break}var v,j=null;for(p=0;p<c.length;p++)if("USA Topo Maps"==c[p].title){j=c[p],c.moveTo(j,2);break}for(p=0;p<c.length;p++)c[p].id==mapBasemap&&(v=p);g.items=c,g.thumbnailStyle="small";var w=new O(g,"basemapGallery");w.on("select",function(e){for(var t=r.byId("basemapGallery").firstChild.children,l=0;l<t.length;l++)t[l].children[1].childNodes[0].nodeValue==e.item.title?(t[l].attributes.class.value="thumbnailcontainer small selected",t[l].children[0].attributes.class.value="thumbnail small selected",t[l].children[1].attributes.class.value="title small selected",t[l].children[2].attributes.class.value="title small selected"):(t[l].attributes.class.value="thumbnailcontainer small",t[l].children[0].attributes.class.value="thumbnail small",t[l].children[1].attributes.class.value="title small",t[l].children[2].attributes.class.value="title small");basemapGallery.select(e.item.id),mapBasemap=e.item.id,a.byId("basemapTitlePane").toggle()}),w.select(g.items[v]),a.byId("basemapTitlePane").toggle(),w._slideDiv.style.width="auto",w.startup(),r.byId("basemapTitlePane").style.visibility="visible",r.byId("basemapTitlePane").style.display="block",w.on("error",function(e){alert("Basemap gallery error creating gallery in readConfig.js/addMap/basemapGallery.on('load'):  "+JSON.stringify(e,null,4),"Code Error")})}basemapGallery.on("load",function(){var e=[];basemapGallery.basemaps.forEach(function(r){var a=["Imagery Hybrid","Streets","USA Topo Maps","National Geographic Style Map","USGS Scanned Topo","My USGS Digital Topo","Aerial Photo with USGS Contours","ESRI Digital Topo"];if(a.includes(r.title)){if("Imagery Hybrid"==r.title)r.id="hybrid",r.title="Aerial";else{if("Imagery"==r.title||"Oceans"==r.title)return;"Streets"==r.title?r.id="streets":"USA Topo Maps"==r.title?r.id="topo":"ESRI Digital Topo"==r.title?r.id="topo2":"OpenStreetMap"==r.title?r.id="openstreet":"National Geographic Style Map"==r.title&&(r.id="natgeo")}e.push({thumbnailUrl:r.thumbnailUrl,id:r.id,layers:r.layers,title:r.title})}});var t,l={},i=null;for(t=0;t<e.length;t++)if("Streets"==e[t].title){i=e[t],e.moveTo(i,0);break}var s,n=null;for(t=0;t<e.length;t++)if("USA Topo Maps"==e[t].title){n=e[t],e.moveTo(n,2);break}for(t=0;t<e.length;t++)e[t].id==mapBasemap&&(s=t);document.getElementById("basemapGallery").style.height="350px",document.getElementById("basemapGallery").style.overflow="auto",l.items=e,l.thumbnailStyle="small";var o=new O(l,"basemapGallery");o.on("select",function(e){for(var t=r.byId("basemapGallery").firstChild.children,l=0;l<t.length;l++)t[l].children[1].childNodes[0].nodeValue==e.item.title?(t[l].attributes.class.value="thumbnailcontainer small selected",t[l].children[0].attributes.class.value="thumbnail small selected",t[l].children[1].attributes.class.value="title small selected",t[l].children[2].attributes.class.value="title small selected"):(t[l].attributes.class.value="thumbnailcontainer small",t[l].children[0].attributes.class.value="thumbnail small",t[l].children[1].attributes.class.value="title small",t[l].children[2].attributes.class.value="title small");basemapGallery.select(e.item.id),mapBasemap=e.item.id,a.byId("basemapTitlePane").toggle()}),o.select(l.items[s]),a.byId("basemapTitlePane").toggle(),o._slideDiv.style.width="auto",o.startup(),r.byId("basemapTitlePane").style.visibility="visible",r.byId("basemapTitlePane").style.display="block",o.on("error",function(e){alert("Basemap gallery error creating gallery in readConfig.js/addMap/basemapGallery.on('load'):  "+JSON.stringify(e,null,4),"Code Error")})}),basemapGallery.on("error",function(e){alert("Basemap gallery error creating basemapGallery in readConfig.js/addMap/basemapGallery.on('load'):  "+JSON.stringify(e,null,4),"Code Error")}),q()}catch(e){alert("Error in readConfig.js/addMap "+e.message,"Code Error",e)}})}var T,S;try{var k=getCookie("xycoords");document.getElementById("xycoords_combo").value=""==k?"dms":k;var B,A=document.location.search.replace(/\%0D/g,"newline");if(queryObj=r.queryToObject(A.substr("?"===A[0]?1:0)),queryObj.point&&(queryObj.point=queryObj.point.replace(/~/g," "),B=/([^a-zA-Z0-9 °\-\'\"\|;,\.!_\*()\\])/g,B.test(queryObj.point)&&alert("Illegal characters were removed from way point labels.","Warning"),B=/([^a-zA-Z0-9 °\-\'\"\|;,\.!_\*()])/g,queryObj.point=queryObj.point.replace(B,""),queryObj.point=queryObj.point.replace(/newline/g,"\n")),queryObj.line&&(B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,B.test(queryObj.line)&&alert("Illegal characters were removed from the line labels.","Warning"),B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.line=queryObj.line.replace(B,"")),queryObj.poly&&(B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,B.test(queryObj.poly)&&alert("Illegal characters were removed from the shape (polygon) labels.","Warning"),B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.poly=queryObj.poly.replace(B,"")),queryObj.rect&&(B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,B.test(queryObj.rect)&&alert("Illegal characters were removed from the rectangle labels.","Warning"),B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.rect=queryObj.rect.replace(B,"")),queryObj.text&&(B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,B.test(queryObj.text)&&alert("Illegal characters were removed from the point labels.","Warning"),B=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.text=queryObj.text.replace(B,"")),queryObj.layer&&(queryObj.layer=queryObj.layer.replace(/~/g," "),B=/([^a-zA-Z0-9 \-\|,\._()])/g,B.test(queryObj.layer)&&alert("Illegal characters were found on the URL. Layers may not load properly.","Warning"),queryObj.layer=queryObj.layer.replace(B,"")),queryObj.keyword&&(B=/([^a-zA-Z0-9 \-\._()])/g,B.test(queryObj.keyword)&&alert("Illegal characters were found on the URL. Location may not load properly.","Warning"),queryObj.keyword=queryObj.keyword.replace(B,"")),queryObj.value){B=/([^a-zA-Z0-9 \-\',\.!_\*()\\#/&])/g,B.test(queryObj.value)&&alert("Illegal characters were found on the URL. Location may not load properly.","Warning"),B=/([^a-zA-Z0-9 \-\',\.!_\*()#/&])/g,queryObj.value=queryObj.value.replace(B,"");var C=/'/g;queryObj.value=queryObj.value.replace(C,"''")}queryObj.label&&(B=/([^a-zA-Z0-9 \-\',\.!_\*()#&/\\])/g,B.test(queryObj.label)&&alert("Illegal characters were found on the URL. Point labels may not load properly.","Warning"),B=/([^a-zA-Z0-9 \-\',\.!_\*()#&/])/g,queryObj.label=queryObj.label.replace(B,"")),queryObj.map&&(B=/([^a-zA-Z0-9 \-,\._():\/])/g,B.test(queryObj.map)&&alert("Illegal characters were found on the URL. Map may not load properly.","Warning"),queryObj.map=queryObj.map.replace(B,"")),queryObj.field&&(B=/([^a-zA-Z0-9 \-_])/g,B.test(queryObj.field)&&alert("Illegal characters were found on the URL. Map may not load properly.","Warning"),queryObj.field=queryObj.field.replace(B,"")),queryObj.prj&&isNaN(queryObj.prj)&&(queryObj.prj=102100,alert("Problem reading map projection from the URL, defaulting to WGS84.","Warning")),queryObj.extent&&(B=/([^0-9 \-,\.])/g,B.test(queryObj.extent)&&alert("Illegal characters were found on the URL. Map extent may not load properly.","Warning"),queryObj.extent=queryObj.extent.replace(B,"")),queryObj.place&&(B=/([^a-zA-Z0-9 \-\',\.!_*():#&/\\])/g,B.test(queryObj.place)&&alert("Illegal characters were found on the URL. Location may not load properly.","Warning"),B=/([^a-zA-Z0-9 \-\',\.!_*():#&/])/g,queryObj.place=queryObj.place.replace(B,"")),document.getElementById("mapDescFile").href=app+"/definitions.html";var M=createXMLhttpRequest(),G=app+"/config.xml?v="+ndisVer;M.onreadystatechange=function(){if(4==M.readyState&&200===M.status){var r,a;T=createXMLdoc(M);try{r=T.getElementsByTagName("geometryservice")[0].getAttribute("url")}catch(e){alert("Missing tag: geometryservice in "+app+'/config.xml.\n\nTag should look like: &lt;geometryservice url="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/Utilities/Geometry/GeometryServer"/&gt;\n\nWill use that url for now.',"Data Error"),r="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/Utilities/Geometry/GeometryServer"}geometryService=new l(r);try{printServiceUrl=T.getElementsByTagName("printservice")[0].firstChild.nodeValue}catch(e){
alert("Missing tag: printservice in "+app+"/config.xml.\n\nTag should look like: &lt;printservice&gt;https://ndismaps.nrel.colostate.edu/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task&lt;/printservice&gt;\n\nWill use that url for now.","Data Error"),printServiceUrl="https://ndismaps.nrel.colostate.edu/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"}try{printGeoServiceUrl=T.getElementsByTagName("printservicegeo")[0].firstChild.nodeValue}catch(e){alert("Missing tag: printservicegeo in "+app+"/config.xml.\n\nTag should look like: &lt;printservicegeo&gt;https://ndismaps.nrel.colostate.edu/arcgis/rest/services/PrintTemplate/georefPrinting/GPServer/georefPrinting&lt;/printservice&gt;\n\nWill use that url for now.","Data Error"),printGeoServiceUrl="https://ndismaps.nrel.colostate.edu/arcgis/rest/services/PrintTemplate/georefPrinting/GPServer/georefPrinting"}try{a=T.getElementsByTagName("title")[0].firstChild.nodeValue}catch(e){alert("Warning: Missing title tag in "+app+"/config.xml file. "+e.message,"Data Error")}try{e.byId("title").innerHTML=a,document.title=a,e.byId("subtitle").innerHTML=T.getElementsByTagName("subtitle")[0].firstChild.nodeValue,e.byId("logo").src=T.getElementsByTagName("logo")[0].firstChild.nodeValue,e.byId("logourl").href=T.getElementsByTagName("logourl")[0].firstChild.nodeValue}catch(e){alert("Warning: Missing title, subtitle, logo, or logurl tag in "+app+"/config.xml file. "+e.message,"Data Error")}T.getElementsByTagName("noDisclaimer")&&T.getElementsByTagName("noDisclaimer")[0]&&"true"==T.getElementsByTagName("noDisclaimer")[0].firstChild.nodeValue||1!=getCookie("noDisclaimer")&&loadDisclaimer(a);try{myFindService=T.getElementsByTagName("findplaceservice")[0].getAttribute("url")}catch(e){alert("Missing tag: findplaceservice in "+app+'/config.xml.\n\nTag should look like: &lt;findplaceservice url="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/GNIS_Loc/GeocodeServer"/&gt;\n\nWill use that url for now.',"Data Error"),myFindService="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/GNIS_Loc/GeocodeServer"}try{findPlaceInit()}catch(e){alert("Error in javascript/FindPlace.js "+e.message,"Code Error",e)}try{S=T.getElementsByTagName("map")[0].getAttribute("initialextent").split(" "),wkid=parseInt(T.getElementsByTagName("map")[0].getAttribute("wkid").trim()),fullExtent=new o({xmin:parseFloat(S[0]),ymin:parseFloat(S[1]),xmax:parseFloat(S[2]),ymax:parseFloat(S[3]),spatialReference:{wkid:wkid}})}catch(e){alert("Warning: Missing tag attributes initalextent or wkid for the map tag in "+app+"/config.xml file. "+e.message,"Data Error")}var t=[{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];try{require(["dojo/_base/Color","dojo/dom-construct"],function(e,r){var a=new d({fillSymbol:new y(y.STYLE_SOLID,new g(g.STYLE_SOLID,new e([255,0,0]),2),new e([255,255,0,.25]))},r.create("div"));map=new n("mapDiv",{autoResize:!0,showAttribution:!1,logo:!1,infoWindow:a,isRubberBandZoom:!0,isScrollWheelZoom:!0,isShiftDoubleClick:!0,displayGraphicsOnPan:!w("ie"),sliderStyle:"large",basemap:"streets",minScale:9244649,lods:t})})}catch(e){alert("Error creating map in readConfig.js. "+e.message,"Code Error",e)}if(map.on("layers-add-result",function(e){var r=!1;try{for(var a=0;a<e.layers.length;a++)if(e.layers[a].error)r=!0,alert("Problem loading layer: "+e.layers[a].layer.url+". "+e.layers[a].error.message+". At javascript/readConfig.js","Code Error");else if(e.layers[a].layer.url.indexOf("MVUM")>-1)for(j=0;j<e.layers[a].layer.layerInfos.length;j++)"Visitor Map Symbology"==e.layers[a].layer.layerInfos[j].name?e.layers[a].layer.layerInfos[j].defaultVisibility=!1:"Status"==e.layers[a].layer.layerInfos[j].name&&(e.layers[a].layer.layerInfos[j].defaultVisibility=!1);r||readSettingsWidget()}catch(e){alert("Error loading Map Layers: "+e.message+" in javascript/readConfig.js","Code Error",e)}try{var t=new p({map:map,layerInfos:legendLayers},"tocDiv");t.startup();var l=new c({name:"showLegendChkBox",onChange:function(){require(["dijit/registry"],function(e){try{var r=document.getElementById("tocLoading");r.style.display="block",r.style.visibility="visible";var a=!0,t=e.byId("tocDiv");l.checked?(a=!1,setCookie("legend","1")):setCookie("legend","0");for(var i=0;i<t._rootLayerTOCs.length;i++)t._rootLayerTOCs[i].config.noLegend=a;t.refresh(),t._adjustToState(),setTimeout(function(){r.style.display="none",r.style.visibility="hidden"},1e3)}catch(e){alert("Error in readConfig.js. Loading click event for Show Legend checkbox. "+e.message,"Code Error",e),hideLoading()}})}},"showLegendChkBox");l.startup(),1==getCookie("legend")&&l.set("checked",!0)}catch(e){alert("Error loading TOC Map Layers & Legend: "+e.message+" in javascript/readConfig.js or toc/src/agsjs/dijit/TOC.js","Code Error",e)}try{E()}catch(e){alert("Error loading graphics and labels from the URL: "+e.message+" in javascript/readConfig.js","URL Graphics Error",e)}}),map.on("load",function(){map.on("mouse-move",showCoordinates),map.on("mouse-drag",showCoordinates),map.on("update-start",showLoading),map.on("update-end",hideLoading),require(["esri/dijit/Scalebar"],function(e){new e({map:map,scalebarUnit:"dual"})}),map.on("click",doIdentify),map.on("extent-change",showMapScale),document.getElementById("mapscaleList").selectedIndex=map.getLevel(),x(),addOverviewMap(),hideLoading()}),queryObj.extent&&""!=queryObj.extent){var u,m=[];m="[object Array]"===Object.prototype.toString.call(queryObj.extent)?queryObj.extent[0].split(","):queryObj.extent.split(","),u=queryObj.prj&&""!=queryObj.prj?queryObj.prj:m[0]<0&&m[0]>-200?4326:26913,S=new o({xmin:parseFloat(m[0]),ymin:parseFloat(m[1]),xmax:parseFloat(m[2]),ymax:parseFloat(m[3]),spatialReference:{wkid:parseInt(u)}});var b=new s;b.geometries=[S],b.outSR=new i(wkid),geometryService.project(b,function(e){initExtent=e[0],map.setExtent(initExtent)},function(e){alert("There was a problem converting the extent read from the URL to Web Mercator projection. extent="+m[0],", "+m[1]+", "+m[2]+", "+m[3]+"  prj="+u+"  "+e.message,"URL Extent Error",e)})}else initExtent=new o({xmin:parseFloat(S[0]),ymin:parseFloat(S[1]),xmax:parseFloat(S[2]),ymax:parseFloat(S[3]),spatialReference:{wkid:wkid}}),map.setExtent(initExtent);if(queryObj.place&&""!=queryObj.place){var f=queryObj.place.replace("%20"," ");queryObj.prj&&""!=queryObj.prj&&(settings={XYProjection:queryObj.prj}),gotoLocation(f,!0)}queryObj.keyword&&""!=queryObj.keyword&&(queryObj.value&&""!=queryObj.value?require(["esri/request","esri/tasks/QueryTask","esri/tasks/query"],function(e,r,a){var t=app+"/url.xml?v="+ndisVer,l=createXMLhttpRequest();l.onreadystatechange=function(){if(4==l.readyState&&200===l.status){for(var e=createXMLdoc(l),t=e.getElementsByTagName("layer"),i=0;i<t.length&&(t[i].getElementsByTagName("keyword")[0]&&t[i].getElementsByTagName("keyword")[0].firstChild||alert("Missing tag keyword or blank, in "+app+"/url.xml file.","Data Error"),queryObj.keyword!=t[i].getElementsByTagName("keyword")[0].firstChild.nodeValue);i++);if(i==t.length)alert("Keyword ["+queryObj.keyword+"] is not defined in "+app+"/url.xml file.","Data Error");else if(t[i].getElementsByTagName("url")[0]&&t[i].getElementsByTagName("url")[0].firstChild||alert("Missing tag url or blank, in "+app+"/url.xml file for keyword: "+queryObj.keyword+".","Data Error"),t[i].getElementsByTagName("expression")[0]&&t[i].getElementsByTagName("expression")[0].firstChild){var s=t[i].getElementsByTagName("expression")[0].firstChild.nodeValue.replace("[value]",queryObj.value),n=new r(t[i].getElementsByTagName("url")[0].firstChild.nodeValue),d=new a;d.where=s,d.returnGeometry=!0,n.execute(d,function(e){0==e.features.length?gotoLocation(queryObj.value,!0):require(["esri/geometry/Point","esri/graphicsUtils","esri/layers/GraphicsLayer","esri/graphic","esri/symbols/PictureMarkerSymbol"],function(r,a,l,s,n){var d,y;if("esriGeometryPoint"==e.geometryType){var u=8;if(t[i].getElementsByTagName("mapscale")[0]&&t[i].getElementsByTagName("mapscale")[0].firstChild&&(u=parseInt(t[i].getElementsByTagName("mapscale")[0].firstChild.nodeValue)),u>11&&(u=8),d=new r(e.features[0].geometry.x,e.features[0].geometry.y,e.spatialReference),map.centerAndZoom(d,u),queryObj.label&&""!=queryObj.label){y=new l,y.id="searchgraphics"+searchGraphicsCounter,searchGraphicsCount.push(y.id),searchGraphicsCounter++,addLabel(new s(d),queryObj.label,y,"11pt");var c=new n("assets/images/yellowdot.png",30,30);y.add(new s(d,c)),document.getElementById("findClear").style.opacity=1,document.getElementById("findClear").style.filter="alpha(opacity=100)"}}else if("esriGeometryPolygon"==e.geometryType){var p=!1;if(t[i].getElementsByTagName("union")[0]&&t[i].getElementsByTagName("union")[0].firstChild&&"true"===t[i].getElementsByTagName("union")[0].firstChild.nodeValue.toLowerCase()&&(p=!0),p){for(var g=new o(e.features[0].geometry.getExtent()),m=0;m<e.features.length;m++){var b=e.features[m].geometry.getExtent();g=g.union(b)}map.setExtent(g),d=g.getCenter()}else d=e.features[0].geometry.getCentroid(),map.setExtent(e.features[0].geometry.getExtent(),!0);queryObj.label&&""!=queryObj.label&&(y=new l,y.id="searchgraphics"+searchGraphicsCounter,searchGraphicsCount.push(y.id),searchGraphicsCounter++,addLabel(new s(d),queryObj.label,y,"11pt"),document.getElementById("findClear").style.opacity=1,document.getElementById("findClear").style.filter="alpha(opacity=100)")}else map.setExtent(e.features[0].geometry.getExtent(),!0)})},function(e){e.responseText?(alert("Error: QueryTask failed for keyword="+queryObj.keyword+" value="+queryObj.value+" "+e.message+e.responseText,"URL Keyword/Value Error",e),document.execCommand("Stop")):(alert("Error: QueryTask failed for keyword="+queryObj.keyword+" value="+queryObj.value+" "+e.message,"URL Keyword/Value Error",e),document.execCommand("Stop"))})}else alert("Missing tag expression, in "+app+"/url.xml file for keyword: "+queryObj.keyword,"Data Error")}else 404===l.status?alert("Missing url.xml file in "+app+" directory.","Data Error"):4===l.readyState&&500===l.status&&alert("Error: had trouble reading "+app+"/url.xml file in readConfig.js.","Data Error")},l.open("GET",t,!0),l.send(null)}):alert("When &keyword is used on the URL, there must be a &value also.","URL Keyword/Value Error")),queryObj.map&&""!=queryObj.map&&(queryObj.value&&""!=queryObj.value&&queryObj.field&&""!=queryObj.field?require(["esri/request","esri/tasks/QueryTask","esri/tasks/query"],function(e,r,a){var t=new r(queryObj.map),l=new a;Number(queryObj.value)?l.where=queryObj.field+"="+queryObj.value:l.where="UPPER("+queryObj.field+") LIKE UPPER('"+queryObj.value+"')",l.returnGeometry=!0,t.execute(l,function(e){require(["esri/geometry/Point","esri/graphicsUtils"],function(r,a){0==e.features.length?alert("Cannot zoom to "+queryObj.value+". The feature was not found in "+queryObj.map+" for field "+queryObj.field,"URL Map/Value Error"):"esriGeometryPoint"==e.geometryType?map.centerAndZoom(new r(e.features[0].geometry.x,e.features[0].geometry.y,e.spatialReference),8):map.setExtent(e.features[0].geometry.getExtent(),!0)})},function(e){e.responseText?alert("Error: QueryTask failed for map="+queryObj.map+" "+e.message+e.responseText,"URL Map/Value Error",e):alert("Error: QueryTask failed for map="+queryObj.map+" "+e.message,"URL Map/Value Error",e)})}):alert("When &map is used on the URL, there must also be an &field and &value.","URL Map/Value Error"))}else 404===M.status?(alert("Error: Missing config.xml file in "+app+" directory.","Data Error"),hideLoading()):4===M.readyState&&500===M.status&&(alert("Make sure your application name is correct on the URL. app="+app,"Warning"),hideLoading())},M.open("GET",G,!0),M.send(null)}catch(e){alert("Error in javascript/readConfig.js. "+e.message,"Code Error",e)}})}var locator,layerObj,loadedFromCfg,addressGraphicsCount=[],addressGraphicsCounter=0;
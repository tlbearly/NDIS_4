function showGMUCombo(e,o){try{if(gmu_combo=gmu,gmu_field=o,gmu_url=e,!gmu_url||!gmu_field)return void alert("Missing gmu_url or gmu_field tag in SettingsWidget.xml.  This must be set when use_gmus is true.","Data Error");require(["esri/rest/query","esri/rest/support/Query"],function(e,o){try{const t=new o({returnGeometry:!1,outFields:[gmu_field]});"Goat GMU"==gmu_combo||"Bighorn GMU"==gmu_combo?(t.where="'"+gmu_field+"' <> ''",t.outFields.push("HUNTING")):t.where=gmu_field+" <> -1",e.executeQueryJSON(gmu_url,t).then(showResults).catch(onLoadFault)}catch(e){alert("Error occured while trying to show the GMU drop down: "+e.message+" in javascript/gmu.js showGMUCombo().","Code Error",e)}})}catch(e){alert("Error occured while trying to show the GMU drop down: "+e.message+" in javascript/gmu.js showGMUCombo().","Code Error",e)}}function onLoadFault(e){hideLoading(),alert(e.message+" Error querying url, "+gmu_url+", for field, "+gmu_field+", in javascript/gmu.js ShowGMUCombo()","Data Error")}function showResults(e){try{require(["dijit/form/ComboBox","dojo/store/Memory","esri/rest/query","esri/rest/support/Query"],function(o,t,r,u){var i,n=[],s=[],a=[];for(i=0;i<e.features.length;i++)("Goat GMU"!=gmu_combo&&"Bighorn GMU"!=gmu_combo||"YES"==e.features[i].attributes.HUNTING)&&n.push(e.features[i].attributes[gmu_field]);if("Big Game GMU"==gmu)n.sort(function(e,o){return e-o});else{var g="G";"Bighorn GMU"==gmu&&(g="S"),n.forEach(function(e){"OUT"!=e&&e.substring(1)&&a.push(e.substring(1))}),a.sort(function(e,o){return e-o}),n=[],a.forEach(function(e){n.push(g+e)})}for(i=0;i<n.length;i++)s.push({gmuid:n[i]});var m=document.getElementById("gmuDiv"),l=new o({id:"gmuList",placeHolder:"Unit",store:new t({data:s}),autoComplete:!0,maxHeight:300,searchAttr:"gmuid",style:"width: 60px;",onClick:function(){if(gmu!=gmu_combo){showLoading(),reloadGMUCombo=!0,"Bighorn GMU"==gmu?showGMUCombo(settings.sheepUrl,settings.sheepField):"Big Game GMU"==gmu?showGMUCombo(settings.elkUrl,settings.elkField):"Goat GMU"==gmu&&showGMUCombo(settings.goatUrl,settings.goatField),l&&l.destroy();var e=document.createElement("span");e.id="gmuCombo",m.appendChild(e)}},onChange:function(e){if(""!=e){showLoading(),this.reset();const o=new u({returnGeometry:!0,outFields:[gmu_field]});"Goat GMU"==gmu_combo||"Bighorn GMU"==gmu_combo?(o.where=gmu_field+" = '"+e+"'",o.outFields.push("HUNTING")):o.where=gmu_field+" = "+e,"function"==typeof gtag&&gtag("event","widget_click",{widget_name:"Go to GMU"}),r.executeQueryJSON(gmu_url,o).then(onResult).catch(onFault)}},required:!1},"gmuCombo");l.startup(),m.style.display="block",reloadGMUCombo&&(hideLoading(),l.loadAndOpenDropDown(),reloadGMUCombo=!1),n=null,s=null,a=null})}catch(e){alert(e.message+" in javascript/gmu.js showResults().","Code Error",e)}}function onResult(e){return 0==e.features.length?(alert("No GMU area found by that name.","Warning"),void hideLoading()):"Goat GMU"!=gmu_combo&&"Bighorn GMU"!=gmu_combo||"YES"==e.features[0].attributes.HUNTING?(view.extent=e.features[0].geometry.extent,addTempPolygon(e.features[0]),void hideLoading()):(alert("Hunting is not allowed at this location. Please select from drop down menu."),void hideLoading())}function onFault(e){hideLoading(),alert("No GMU area found by that name.","Warning")}var gmu_field,gmu_url,gmu_combo,reloadGMUCombo=!1;
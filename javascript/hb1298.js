var zoomScale2=144448;var hb1298GraphicsLayer=null;var identifyPoint2;var latlong,pointXY;var hb1298LayerIds;var hb1298FileNm;var bmpdir;var wellidExp,wellidUrl;var toolbar2;function addHB1298Points(points){require(["esri/symbols/PictureMarkerSymbol","esri/graphic","esri/geometry/Point","esri/layers/GraphicsLayer"],function(PictureMarkerSymbol,Graphic,Point,GraphicsLayer){try{if(!hb1298GraphicsLayer){hb1298GraphicsLayer=new GraphicsLayer();map.addLayer(hb1298GraphicsLayer);}
else{hb1298GraphicsLayer.clear();}
pointsArr=points.split(",");var symbol=new PictureMarkerSymbol("assets/images/yellowdot.png",30,30);for(var i=0;i<pointsArr.length;i++){var ptInfo=pointsArr[i].split("|");var pt=new Point(Number(ptInfo[0]),Number(ptInfo[1]),map.spatialReference);hb1298GraphicsLayer.add(new Graphic(pt,symbol));if(ptInfo[2]&&ptInfo[2]!=""){addLabel(new Graphic(pt),ptInfo[2],hb1298GraphicsLayer,"11pt");pt=null;}}
symbol=null;}
catch(e){alert("Error adding HB1298 points. "+e.message+". At line ","Code Error",e);}});}
function getHB1298Points(){if(!hb1298GraphicsLayer||hb1298GraphicsLayer.graphics.length==0)return"";var str="&hb1298=";for(var i=0;i<hb1298GraphicsLayer.graphics.length;i=i+8){if(i!=0)str+=",";str+=hb1298GraphicsLayer.graphics[i].geometry.x+"|";str+=hb1298GraphicsLayer.graphics[i].geometry.y+"|";str+=hb1298GraphicsLayer.graphics[i+1].symbol.text;}
return str;}
function setupIdentify(theWellLabel)
{require(["dijit/registry","esri/tasks/IdentifyParameters","esri/tasks/IdentifyTask","dojo/_base/array","dojo/promise/all","esri/SpatialReference","esri/geometry/Extent"],function(registry,IdentifyParameters,IdentifyTask,array,all,SpatialReference,Extent){var identifyParams=new IdentifyParameters();identifyParams.tolerance=1;identifyParams.returnGeometry=false;identifyParams.layerOption=IdentifyParameters.LAYER_OPTION_ALL;identifyParams.geometry=identifyPoint2;identifyParams.width=map.width;identifyParams.height=map.height;identifyParams.spatialReference=map.spatialReference;identifyParams.mapExtent=new Extent(identifyPoint2.x-10,identifyPoint2.y-10,identifyPoint2.x+10,identifyPoint2.y+10,new SpatialReference({wkid:wkid}));function hb1298IdentifyFailed(e){alert("Error in identifyTask for HB1298 report. At javascript/hb1298.js/identifysetup. "+e.message+" ","Code Error",e);registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
function hb1298IdentifySuccess(e){}
var deferreds;require(["dojo/_base/array","dojo/promise/all"],function(array,all){deferreds=array.map(hb1298LayerIds,function(layer){if(layer)
{identifyParams.layerIds=[layer.ids];var task=new IdentifyTask(layer.url);return task.execute(identifyParams,hb1298IdentifySuccess,hb1298IdentifyFailed);}});var data=[];data["RSO Occurrences"]={};data["SWH Occurrences"]={};data["HPH Data"]={};data["RSO Occurrences"]["ActivityCode"]=[];data["SWH Occurrences"]["ActivityCode"]=[];data["HPH Data"]["ActivityCode"]=[];all(deferreds).then(function(results){if(results[0].length==0&&results[1].length==0&&results[2].length==0&&results[3].length==0&&results[4].length==0){alert("No HB1298 data found at this point.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();return;}
array.map(results,function(result){if(result.length==0)return;var found=false;for(var i=0;i<hb1298LayerIds.length;i++){if(hb1298LayerIds[i].label==result[0].layerName){found=true;break;}}
if(!found){alert("WARNING: Read "+result[0].layerName+" in MapService not found in HB1298Widget.xml file. Check layer name and ID.","Data Error");}
else{data[result[0].layerName]={};for(var j=0;j<hb1298LayerIds[i].fields.length;j++){if(hb1298LayerIds[i].fields[j]=="ActivityCode"){data[result[0].layerName][hb1298LayerIds[i].fields[j]]=[];for(var k=0;k<result.length;k++){if(result[k].feature.attributes[hb1298LayerIds[i].fields[j]]===undefined){alert("Missing field "+hb1298LayerIds[i].fields[j]+" in mapservice layer "+result[k].layerName+".  Read from HB1298Widget.xml file.","Data Error");data[result[k].layerName][hb1298LayerIds[i].fields[j]][k]="";}
else
data[result[k].layerName][hb1298LayerIds[i].fields[j]][k]=result[k].feature.attributes[hb1298LayerIds[i].fields[j]];}}
else{if(result[0].feature.attributes[hb1298LayerIds[i].fields[j]]===undefined){alert("Missing field "+hb1298LayerIds[i].fields[j]+" in mapservice layer "+result[0].layerName+". Read from HB1298Widget.xml file.","Data Error");data[result[0].layerName][hb1298LayerIds[i].fields[j]]="";}
else
data[result[0].layerName][hb1298LayerIds[i].fields[j]]=result[0].feature.attributes[hb1298LayerIds[i].fields[j]];}}}});var xmlhttp=createXMLhttpRequest();xmlhttp.open("POST",hb1298FileNm+"?v="+ndisVer+"&rso="+data["RSO Occurrences"]["ActivityCode"].join()+"&swh="+data["SWH Occurrences"]["ActivityCode"].join()+"&cdow="+data["HPH Data"]["ActivityCode"].join()+"&v="+Date.now(),true);xmlhttp.onreadystatechange=function(){function savePDF(){var data=doc.output();var buffer=new ArrayBuffer(data.length);var array=new Uint8Array(buffer);for(var i=0;i<data.length;i++){array[i]=data.charCodeAt(i);}
var blob=new Blob([array],{type:'application/pdf',encoding:'raw'});saveAs(blob,"AtlasReport.pdf");blob=null;buffer=null;array=null;data=null;hideLoading();}
function savePDF(){var data=doc.output();var buffer=new ArrayBuffer(data.length);var array=new Uint8Array(buffer);for(var i=0;i<data.length;i++){array[i]=data.charCodeAt(i);}
var blob=new Blob([array],{type:'application/pdf',encoding:'raw'});saveAs(blob,"HB1298Report.pdf");blob=null;buffer=null;array=null;data=null;hideLoading();}
function openPDF(){var string=doc.output('datauristring');var iframe="<iframe width='100%' height='100%' src='"+string+"'></iframe>"
var win=window.open();if(!win){alert("Failed to open PDF. Make sure popups are allowed.","Warning");hideLoading();return;}
win.document.open();win.document.write(iframe);win.document.title="HB1298 Report";win.document.close();hideLoading();}
function pageHeader(){if(pageNo!=1)
doc.addPage();y=marginTop+14;doc.setFont("arial","bold");doc.text(marginLeft,y,"HB1298");doc.text(400,y,"CPW Species Impact Summary");doc.setFont("arial","normal");}
function footer(){doc.setFontSize(10);doc.setFont("arial","normal");doc.text((pageWidth/2+marginLeft)-8,pageHeight+marginTop,"Page "+pageNo);pageNo++;doc.setFontSize(fontsize);}
function grid(title,arr,header,headerHt){if(arr.length==0)return;function header2(title){doc.setFont("arial","normal");doc.setFontSize(fontsize);y+=5;doc.setFillColor(204,204,204);doc.setDrawColor(0);doc.rect(marginLeft,y,pageWidth,lineHt,'FD');y+=15;doc.myText(marginLeft,y,title,{align:"center"});y+=20;doc.setFont("arial","normal");}
var indent=110;var x=marginLeft+4;for(var i=0;i<arr.length;i++){for(j=0;j<header.length;j++){for(var k=0;k<arr[i][header[j].field].length;k++){if(arr[i][header[j].field].charCodeAt(k)==8209){arr[i][header[j].field]=arr[i][header[j].field].substr(0,k)+'-'+arr[i][header[j].field].substr(k+1);}}}
var desc=doc.setFontSize(11).splitTextToSize("Description: "+arr[i]["Desc"],pageWidth-8,{fontName:"arial",fontStyle:"normal"});var bmp=doc.setFontSize(11).splitTextToSize(arr[i]["BMPDoc"],pageWidth-38,{fontName:"arial",fontStyle:"normal"});var bmpFont=11;if(bmp.length>1){bmp=doc.setFontSize(9).splitTextToSize(arr[i]["BMPDoc"],pageWidth-38,{fontName:"arial",fontStyle:"normal"});bmpFont=9;}
if(y+6+(lineHt*3)+(13*(desc.length-1))>pageHeight-lineHt){footer();pageHeader();if(i==0)
header2(title);else
header2(title+" - Continued");}
else if(i==0)header2(title);var startY=y-lineHt;doc.setFontSize(24);if(arr[i]["TotalFactor"]=="NA"||arr[i]["TotalFactor"]=="10")
doc.text(arr[i]["TotalFactor"],marginLeft+2,y+6);else
doc.text(arr[i]["TotalFactor"],marginLeft+10,y+6);doc.setFontSize(7);doc.text("total factor",x,y+14);doc.text("   (4-10)",x,y+23);doc.setFontSize(11);doc.setFont("arial","bold");doc.text(arr[i]["Species"],indent,y);doc.setFont("arial","normal");y+=lineHt;doc.text(arr[i]["Activity"],indent,y);y+=lineHt+6;doc.text("BMP: ",x,y);doc.setFontSize(bmpFont);doc.text(bmp,x+30,y);doc.setFontSize(fontsize);y+=lineHt;doc.text(desc,x,y);doc.setDrawColor(0);y=y+(13*(desc.length-1)+lineHt);doc.line(marginLeft,y,pageWidth+marginLeft,y);doc.line(marginLeft,startY,marginLeft,y);doc.line(pageWidth+marginLeft,startY,pageWidth+marginLeft,y);y+=lineHt;}}
if(xmlhttp.readyState===4&&xmlhttp.status===200){var xmlData=createXMLparser(xmlhttp.responseText.substr(xmlhttp.response.indexOf("?>")+2));var rsoArr=xmlData.getElementsByTagName("rso")[0].getElementsByTagName("Data");var swhArr=xmlData.getElementsByTagName("swh")[0].getElementsByTagName("Data");var cdowArr=xmlData.getElementsByTagName("cdow")[0].getElementsByTagName("Data");(function(API){API.myText=function(x,y,txt,options,width){options=options||{};var fontSize=this.internal.getFontSize();var pageWidth;if(!width)pageWidth=this.internal.pageSize.width;else pageWidth=width;txtWidth=this.getStringUnitWidth(txt)*fontSize/this.internal.scaleFactor;if(options.align=="center"){x=x+((pageWidth-txtWidth)/2)-marginLeft;this.text(txt,x,y);}
else if(options.align=="right"){x=x+(pageWidth-(txtWidth+3));this.text(txt,x,y);}
else if(options.underline==true){this.text(txt,x,y);this.line(x,y+1,x+txtWidth,y+1);}}})(jsPDF.API);var marginLeft=54;var marginTop=54;var lineHt=18;var y=marginTop+11;var pageNo=1;var fontsize=11;var pageWidth=612-(2*marginLeft);var pageHeight=792-(2*marginTop);var doc=new jsPDF("portrait","pt","letter");doc.onerror=function(){alert("Error creating PDF file","Code Error");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
doc.setProperties({title:"HB1298 Report",author:'Colorado Parks and Wildlife',keywords:'hb1298, rso, swh, cpw'});doc.setFont("san-serif","normal");doc.setFontSize(fontsize);pageHeader();y+=20;today=new Date();today=today.toDateString();if(today.substr[8]=="0")
today=today.substr(0,8)+today.substr(9,1)+","+today.substr(today.length-5,today.length);else
today=today.substr(0,8)+today.substr(8,2)+","+today.substr(today.length-5,today.length);doc.text(marginLeft,y,today);y+=lineHt*2;var col_1=marginLeft+100;doc.text(marginLeft,y,'Well Number:');doc.text(col_1,y,theWellLabel);y+=lineHt;doc.text(marginLeft,y,'XY Location:');doc.text(col_1,y,pointXY+" UTM NAD83 zone 13");y+=lineHt;doc.text(col_1,y,latlong);y+=lineHt;doc.text(marginLeft,y,'Township:');if(!data["Section boundary"])
doc.text(col_1,y,"Unknown");else
doc.text(col_1,y,data["Section boundary"]["TWP"]+data["Section boundary"]["TDIR"]);y+=lineHt;doc.text(marginLeft,y,'Range:');if(!data["Section boundary"])
doc.text(col_1,y,"Unknown");else
doc.text(col_1,y,data["Section boundary"]["RNG"]+data["Section boundary"]["RDIR"]);y+=lineHt;doc.text(marginLeft,y,'Section:');if(!data["Section boundary"])
doc.text(col_1,y,"Unknown");else
doc.text(col_1,y,data["Section boundary"]["SECTION"]);y+=lineHt*2;doc.setFont("arial","bold");doc.myText(marginLeft,y,"Official House Bill 1298 Species Data:",{underline:true});doc.setFont("arial","normal");y+=lineHt;doc.text(marginLeft,y,"Number of COGCC Restricted Surface Occupancy (RSO) features:");doc.text(marginLeft+360,y,data["RSO Occurrences"]["ActivityCode"].length.toString());y+=lineHt;doc.text(marginLeft,y,"Number of COGCC Sensitive Wildife Habitat (SWH) features:");doc.text(marginLeft+360,y,data["SWH Occurrences"]["ActivityCode"].length.toString());y+=lineHt*2;doc.setFont("arial","bold");doc.myText(marginLeft,y,"Supporting (non-HB1298) Species Data:",{underline:true});y+=lineHt;doc.setFont("arial","normal");doc.text(marginLeft,y,"Number of Important CPW features:");doc.text(marginLeft+360,y,data["HPH Data"]["ActivityCode"].length.toString());y+=lineHt*2;var header=null;header=[];header.push({displayname:"Species",field:"Species",width:70});header.push({displayname:"Activity",field:"Activity",width:80});var width=pageWidth-70-80-50-100;header.push({displayname:"Description",field:"Desc",width:width});header.push({displayname:"Total Factor (4-10)",field:"TotalFactor",width:50});header.push({displayname:"BMP",field:"BMPDoc",width:100});var bmpStr;var speciesStr;var actStr;var descStr;var totalStr;var layerNmStr;var rso=[];for(var i=0;i<rsoArr.length;i++){bmpStr="";speciesStr="";actStr="";descStr="";totalStr="";if(!rsoArr[i])alert("Missing activity code, "+data["RSO Occurrences"]["ActivityCode"][i]+", in hb1298_ndis.mdb.","Data Error");else{if(rsoArr[i].getElementsByTagName("BMPDoc")[0])bmpStr=bmpdir+rsoArr[i].getElementsByTagName("BMPDoc")[0].firstChild.nodeValue;if(rsoArr[i].getElementsByTagName("Species")[0])speciesStr=rsoArr[i].getElementsByTagName("Species")[0].firstChild.nodeValue.trim();if(rsoArr[i].getElementsByTagName("Activity")[0])actStr=rsoArr[i].getElementsByTagName("Activity")[0].firstChild.nodeValue.trim();if(rsoArr[i].getElementsByTagName("Description")[0])descStr=rsoArr[i].getElementsByTagName("Description")[0].firstChild.nodeValue;if(rsoArr[i].getElementsByTagName("TotalFactor")[0])totalStr=rsoArr[i].getElementsByTagName("TotalFactor")[0].firstChild.nodeValue;if(totalStr<0)totalStr="NA";}
rso.push({Species:speciesStr,Activity:actStr,Desc:descStr,TotalFactor:totalStr,BMPDoc:bmpStr.replace(" ","%20"),LayerName:speciesStr+" "+actStr});}
rso.sort(sortMultipleArryOfObj("Species","Activity"));var swh=[];for(i=0;i<swhArr.length;i++){bmpStr="";speciesStr="";actStr="";descStr="";totalStr="";if(!swhArr[i])alert("Missing activity code, "+data["SWH Occurrences"]["ActivityCode"][i]+", in hb1298_ndis.mdb.","Data Error");else{if(swhArr[i].getElementsByTagName("BMPDoc")[0])bmpStr=bmpdir+swhArr[i].getElementsByTagName("BMPDoc")[0].firstChild.nodeValue;if(swhArr[i].getElementsByTagName("Species")[0])speciesStr=swhArr[i].getElementsByTagName("Species")[0].firstChild.nodeValue.trim();if(swhArr[i].getElementsByTagName("Activity")[0])actStr=swhArr[i].getElementsByTagName("Activity")[0].firstChild.nodeValue.trim();if(swhArr[i].getElementsByTagName("Description")[0])descStr=swhArr[i].getElementsByTagName("Description")[0].firstChild.nodeValue;if(swhArr[i].getElementsByTagName("TotalFactor")[0])totalStr=swhArr[i].getElementsByTagName("TotalFactor")[0].firstChild.nodeValue;if(totalStr<0)totalStr="NA";}
swh.push({Species:speciesStr,Activity:actStr,Desc:descStr,TotalFactor:totalStr,BMPDoc:bmpStr.replace(" ","%20"),LayerName:speciesStr+" "+actStr});}
swh.sort(sortMultipleArryOfObj("Species","Activity"));var cdow=[];for(i=0;i<cdowArr.length;i++){bmpStr="";speciesStr="";actStr="";descStr="";totalStr="";if(!cdowArr[i])
alert("Missing activity code, "+data["HPH Data"]["ActivityCode"][i]+", in hb1298_ndis.mdb.","Data Error");else{if(cdowArr[i].getElementsByTagName("BMPDoc")[0])bmpStr=bmpdir+cdowArr[i].getElementsByTagName("BMPDoc")[0].firstChild.nodeValue;if(cdowArr[i].getElementsByTagName("Species")[0])speciesStr=cdowArr[i].getElementsByTagName("Species")[0].firstChild.nodeValue.trim();if(cdowArr[i].getElementsByTagName("Activity")[0])actStr=cdowArr[i].getElementsByTagName("Activity")[0].firstChild.nodeValue.trim();if(cdowArr[i].getElementsByTagName("Description")[0])descStr=cdowArr[i].getElementsByTagName("Description")[0].firstChild.nodeValue;if(cdowArr[i].getElementsByTagName("TotalFactor")[0])totalStr=cdowArr[i].getElementsByTagName("TotalFactor")[0].firstChild.nodeValue;if(totalStr<0)totalStr="NA";}
cdow.push({Species:speciesStr,Activity:actStr,Desc:descStr,TotalFactor:totalStr,BMPDoc:bmpStr.replace(" ","%20")});}
cdow.sort(sortMultipleArryOfObj("Species","Activity"));grid("COGCC - Habitat Types with Restricted Surface Occupancy",rso,header,70);grid("COGCC - Sensitive Wildife Habitat",swh,header,70);grid("CPW Important Wildlife Habitat (non-HB1298)",cdow,header,70);y+=lineHt;for(i=0;i<hb1298LayerIds.length;i++){if(hb1298LayerIds[i].label=="Biologists"){break;}}
if(i==hb1298LayerIds.length||!hb1298LayerIds[i].display)alert("Missing display tag in HB1298Widgets.xml file for label Biologists.","Data Error");else{for(var j=0;j<hb1298LayerIds[i].display.length;j++){if(y>pageHeight-lineHt){footer();pageHeader();y+=20;}
if(hb1298LayerIds[i].fields[j]!="Energy Liaison Phone"){doc.text(marginLeft,y,hb1298LayerIds[i].display[j]+":");doc.text(marginLeft+140,y,data["Biologists"][hb1298LayerIds[i].fields[j]]);}
if(hb1298LayerIds[i].fields[j]=="Energy Liaison Phone"){doc.text(marginLeft+290,y,data["Biologists"][hb1298LayerIds[i].fields[j]]);}
if(hb1298LayerIds[i].fields[j]!="Energy Liaison"){y+=lineHt;}}}
y+=lineHt;doc.setFontSize(9);doc.setFont("arial","normal");doc.text(marginLeft,y,"This report was generated using COGCC and Colorado Parks and Wildlife species data, and NDIS mapping technology.");y+=lineHt;footer();if(navigator.sayswho.indexOf("IE")>-1|navigator.sayswho.indexOf("Edge")>-1){savePDF();else
openPDF();registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);registry.byId("XYReportBtn2").set("label","Generate Report");registry.byId("XYReportBtn2").set('disabled',false);document.getElementById("wellLabel").value="";document.getElementById("wellID").value="";document.getElementById("wellLabel2").value="";var rsoIndex=-1;var swhIndex=-1;require(["esri/layers/ArcGISDynamicMapServiceLayer"],function(ArcGISDynamicMapServiceLayer){for(var i=0;i<map.layerIds.length;i++)
{if(map.getLayer(map.layerIds[i]).declaredClass=="esri.layers.ArcGISDynamicMapServiceLayer")
{if(map.getLayer(map.layerIds[i]).url.indexOf("RSO")>0)
{rsoIndex=i;break;}}}
if(rsoIndex==-1)
{alert("Cannot find layer in config.xml with name containing RSO.","Data Error");return;}
for(i=0;i<map.layerIds.length;i++)
{if(map.getLayer(map.layerIds[i]).declaredClass=="esri.layers.ArcGISDynamicMapServiceLayer")
{if(map.getLayer(map.layerIds[i]).url.indexOf("SWH")>0)
{swhIndex=i;break;}}}
if(swhIndex==-1)
{alert("Cannot find layer in config.xml with name containing SWH.","Data Error");return;}
var visLayers=[];var found;for(i=0;i<rso.length;i++)
{found=false;for(var j=0;j<map.getLayer(map.layerIds[rsoIndex]).layerInfos.length;j++)
{if(map.getLayer(map.layerIds[rsoIndex]).layerInfos[j].name.toUpperCase().trim()==rso[i].LayerName.toUpperCase())
{visLayers.push(map.getLayer(map.layerIds[rsoIndex]).layerInfos[j].id);found=true;break;}}
if(!found)alert("Warning: unable to highlight a layer. Missing '"+rso[i].LayerName+"' in Restricted Surface Occupancy map service. Should be the same name as what is used in hb1298_ndis.mdb. ","Data Error");}
var vis;var layer=map.getLayer(map.layerIds[rsoIndex]);for(i=0;i<layer.layerInfos.length;i++)
{if(visLayers.indexOf(layer.layerInfos[i].id)!=-1)layer.layerInfos[i].visible=true;else layer.layerInfos[i].visible=false;}
layer.setVisibleLayers(visLayers);layer.refresh();visLayers=null;visLayers=[];for(i=0;i<swh.length;i++)
{found=false;for(j=0;j<map.getLayer(map.layerIds[swhIndex]).layerInfos.length;j++)
{if(map.getLayer(map.layerIds[swhIndex]).layerInfos[j].name.toUpperCase().trim()==swh[i].LayerName.toUpperCase())
{visLayers.push(map.getLayer(map.layerIds[swhIndex]).layerInfos[j].id);found=true;break;}}
if(!found)alert("Warning: unable to highlight a layer. Missing '"+swh[i].LayerName+"' in Sensitive Wildlife Habitat map service. Should be the same name as what is used in hb1298_ndis.mdb. ","Data Error");}
layer=map.getLayer(map.layerIds[swhIndex]);for(i=0;i<layer.layerInfos.length;i++)
{if(visLayers.indexOf(layer.layerInfos[i].id)!=-1)layer.layerInfos[i].visible=true;else layer.layerInfos[i].visible=false;}
layer.setVisibleLayers(visLayers);layer.refresh();});hideLoading();}
else if(xmlhttp.status===404){alert("Error: Missing readDB.aspx file in "+app+" directory.","Data Error");hideLoading();}
else if(xmlhttp.readyState===4&&xmlhttp.status===500){alert("Missing readDB.aspx file. app="+app,"Data Error");hideLoading();}}
xmlhttp.send(null);});});});}
function convertProjection2(proj,pointX,pointY,label){require(["esri/tasks/ProjectParameters","esri/SpatialReference","esri/geometry/Point","esri/graphic"],function(ProjectParameters,SpatialReference,Point,Graphic){var inSR;var outSR;inSR=new SpatialReference(wkid);outSR=new SpatialReference(proj);var params=new ProjectParameters();params.geometries=[new Point(pointX,pointY,inSR)];params.outSR=outSR;geometryService.project(params,function(feature){if(latlong=="")
{latlong="Latitude: "+feature[0].y.toFixed(6)+", Longitude: "+feature[0].x.toFixed(6);convertProjection2(26913,identifyPoint2.x,identifyPoint2.y,label);}
else
{pointXY=feature[0].x.toFixed(2)+", "+feature[0].y.toFixed(2);setupIdentify(label);}});});}
function showLocation(infoData,zoomin){require(["dijit/registry","esri/symbols/PictureMarkerSymbol","esri/graphic"],function(registry,PictureMarkerSymbol,Graphic){try{identifyPoint2=infoData.point;latlong="";pointXY="";var symbol=new PictureMarkerSymbol("assets/images/yellowdot.png",30,30);hb1298GraphicsLayer.add(new Graphic(infoData.point,symbol));if(zoomin&&(map.getScale()>zoomScale2))
{map.setScale(zoomScale2);}
map.centerAt(infoData.point);addLabel(new Graphic(infoData.point),infoData.label,hb1298GraphicsLayer,"11pt");convertProjection2(4326,infoData.point.x,infoData.point.y,infoData.label);}
catch(e){alert("Error message: "+e.message+" in javascript/hb1298.js/showLocation. ","Error",e);registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);registry.byId("XYReportBtn2").set("label","Generate Report");registry.byId("XYReportBtn2").set('disabled',false);hideLoading();}});}
function convertProjection(proj,pointX,pointY){require(["dijit/registry","esri/tasks/ProjectParameters","esri/SpatialReference","esri/geometry/Point","esri/graphic"],function(registry,ProjectParameters,SpatialReference,Point,Graphic){try{var displayWellID=document.getElementById("wellLabel").value;var inSR;var outSR;var point;var coordGraphic;inSR=new SpatialReference(Number(proj));point=new Point(pointX,pointY,inSR);coordGraphic=new Graphic(point);outSR=new SpatialReference(wkid);geometryService.project([coordGraphic.geometry],outSR);var params=new ProjectParameters();params.geometries=[new Point(pointX,pointY,inSR)];params.outSR=outSR;geometryService.project(params,function(feature){var pointObj={label:displayWellID,point:feature[0]};showLocation(pointObj,true);params=null;},function(err){alert("Problem projecting point. In javascript/hb1298.js/convertProjection. Error message: "+err.message,"Warning",err);registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();params=null;});}
catch(e){alert("Error message: "+e.message+" At javascript/hb1298.js/convertProjection.","Error");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}});}
function setPointXY(){require(["dijit/registry"],function(registry){try{showLoading();registry.byId("XYReportBtn").set("label","Generating...");registry.byId("XYReportBtn").set('disabled',true);var pattern=/,/g;var s=registry.byId("hb1298_xy_proj");var pointX,pointY;switch(s.get("value"))
{case"dd":{pointX=Number(document.getElementById("xDD").value);pointY=Number(document.getElementById("yDD").value);document.getElementById("xDD").value="";document.getElementById("yDD").value="";if(pointX>0)pointX=pointX* -1;if((pointX>=-110&&pointX<=-100)&&(pointY>=35&&pointY<=42))
{convertProjection(4326,pointX,pointY);}
else
{alert("This latitude, longitude is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"dms":{pointX=Number(document.getElementById("xDeg").value)+(Number(document.getElementById("xMin").value)+(Number(document.getElementById("xSec").value)/60))/60;pointY=Number(document.getElementById("yDeg").value)+(Number(document.getElementById("yMin").value)+(Number(document.getElementById("ySec").value)/60))/60;document.getElementById("xDeg").value="";document.getElementById("xMin").value="";document.getElementById("xSec").value="";document.getElementById("yDeg").value="";document.getElementById("yMin").value="";document.getElementById("ySec").value="";if(pointX>0)pointX=pointX* -1;if((pointX>=-110&&pointX<=-100)&&(pointY>=35&&pointY<=42))
{convertProjection(4326,pointX,pointY);}
else
{alert("This latitude, longitude is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"dm":{pointX=Number(document.getElementById("xDeg2").value)+(Number(document.getElementById("xMin2").value)/60);pointY=Number(document.getElementById("yDeg2").value)+(Number(document.getElementById("yMin2").value)/60);document.getElementById("xDeg2").value="";document.getElementById("xMin2").value="";document.getElementById("yDeg2").value="";document.getElementById("yMin2").value="";if(pointX>0)pointX=pointX* -1;if((pointX>=-110&&pointX<=-100)&&(pointY>=35&&pointY<=42))
{convertProjection(4326,pointX,pointY);}
else
{alert("This latitude, longitude is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"26712":{pointX=Number(document.getElementById("xUTM1227").value.replace(pattern,""));pointY=Number(document.getElementById("yUTM1227").value.replace(pattern,""));document.getElementById("xUTM1227").value="";document.getElementById("yUTM1227").value="";if((pointX>=660000&&pointX<=1300000)&&(pointY>=4095000&&pointY<=4580000))
{convertProjection(26712,pointX,pointY);}
else
{alert("This UTM is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"26713":{pointX=Number(document.getElementById("xUTM1327").value.replace(pattern,""));pointY=Number(document.getElementById("yUTM1327").value.replace(pattern,""));document.getElementById("xUTM1327").value="";document.getElementById("yUTM1327").value="";if((pointX>=139700&&pointX<=765000)&&(pointY>=4097000&&pointY<=4544000))
{convertProjection(26713,pointX,pointY);}
else
{alert("This UTM is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"26912":{pointX=Number(document.getElementById("xUTM1283").value.replace(pattern,""));pointY=Number(document.getElementById("yUTM1283").value.replace(pattern,""));document.getElementById("xUTM1283").value="";document.getElementById("yUTM1283").value="";if((pointX>=660000&&pointX<=1300000)&&(pointY>=4095000&&pointY<=4580000))
{convertProjection(26912,pointX,pointY);}
else
{alert("This UTM is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"26913":{pointX=Number(document.getElementById("xUTM1383").value.replace(pattern,""));pointY=Number(document.getElementById("yUTM1383").value.replace(pattern,""));document.getElementById("xUTM1383").value="";document.getElementById("yUTM1383").value="";if((pointX>=139700&&pointX<=765000)&&(pointY>=4097000&&pointY<=4544000))
{convertProjection(26913,pointX,pointY);}
else
{alert("This UTM is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"32612":{pointX=Number(document.getElementById("xUTM1284").value.replace(pattern,""));pointY=Number(document.getElementById("yUTM1284").value.replace(pattern,""));document.getElementById("xUTM1284").value="";document.getElementById("yUTM1284").value="";if((pointX>=660000&&pointX<=1300000)&&(pointY>=4095000&&pointY<=4580000))
{convertProjection(32612,pointX,pointY);}
else
{alert("This UTM is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}
case"32613":{pointX=Number(document.getElementById("xUTM1384").value.replace(pattern,""));pointY=Number(document.getElementById("yUTM1384").value.replace(pattern,""));document.getElementById("xUTM1384").value="";document.getElementById("yUTM1384").value="";if((pointX>=139700&&pointX<=765000)&&(pointY>=4097000&&pointY<=4544000))
{convertProjection(32613,pointX,pointY);}
else
{alert("This UTM is not in the state of Colorado.  Please enter it again.","Warning");registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}
break;}}}
catch(e){alert(e.message+" At javascript/hb1298.js/setPointXY. ","Error",e);registry.byId("XYReportBtn").set("label","Generate Report");registry.byId("XYReportBtn").set('disabled',false);hideLoading();}});}
function wellIDReport(){require(["dijit/registry","esri/tasks/QueryTask","esri/tasks/query"],function(registry,QueryTask,Query){showLoading();registry.byId("XYReportBtn2").set("label","Generating...");registry.byId("XYReportBtn2").set('disabled',true);var displayWellID=document.getElementById("wellID").value;var url=wellidUrl||null;var expr=wellidExp||null;if(url==null||expr==null)
{alert("Missing tag, <wellid><url> or <wellid><expression> in HB1298Widget.xml file.","Data Error");return;}
var queryTask=new QueryTask(url);var query=new Query();expr=expr.replace("[value]",displayWellID);query.where=expr;query.returnGeometry=true;query.outSpatialReference=map.spatialReference;queryTask.execute(query,function(featureSet){try
{require(["esri/geometry/Point"],function(Point){var point=new Point(featureSet.features[0].geometry.x,featureSet.features[0].geometry.y,map.spatialReference);var pointObj={label:displayWellID,point:point};showLocation(pointObj,true);point=null;});}
catch(error)
{alert("Your search for the well ID, "+displayWellID+", was not successful.  Please try again. ","Warning Message");registry.byId("XYReportBtn2").set("label","Generate Report");registry.byId("XYReportBtn2").set('disabled',false);hideLoading();}},function(){alert("Error in queryTask in javascript/hb1298.js/wellIDReport.","Code Error");registry.byId("XYReportBtn2").set("label","Generate Report");registry.byId("XYReportBtn2").set('disabled',false);hideLoading();});queryTask=null;query=null;});}
function removeHB1298(){hb1298GraphicsLayer.clear();hideLoading();}
function deselectPointTool(){drawing=false;document.getElementById("btnLocation").className="graphBtn";toolbar2.deactivate();}
function selectPointTool(){if(document.getElementById("btnLocation").className=="graphBtnSelected"){deselectPointTool();return;}
drawing=true;document.getElementById("btnLocation").className="graphBtnSelected";require(["esri/toolbars/draw","dojo/i18n!esri/nls/jsapi"],function(Draw,bundle){bundle.toolbars.draw.addPoint="Click a location for the report";toolbar2.activate(Draw.POINT);});}
function mapReport(evtObj){require(["esri/geometry/Point"],function(Point){showLoading();var pointObj={label:document.getElementById("wellLabel2").value,point:new Point(evtObj.geometry.x,evtObj.geometry.y,map.spatialReference)};showLocation(pointObj,true);deselectPointTool();});}
function HB1298init(){require(["dijit/registry","dojo/dom","dojo/dom-style","dojo/dom-construct","dijit/layout/TabContainer","dijit/layout/ContentPane","esri/layers/GraphicsLayer","esri/symbols/PictureMarkerSymbol","esri/toolbars/draw","dojo/_base/lang"],function(registry,dom,domStyle,domConstruct,TabContainer,ContentPane,GraphicsLayer,PictureMarkerSymbol,Draw,lang){try{if(!hb1298GraphicsLayer){hb1298GraphicsLayer=new GraphicsLayer();map.addLayer(hb1298GraphicsLayer);}
var layers;toolbar2=new Draw(map,{showTooltips:true});toolbar2.on("draw-end",lang.hitch(map,mapReport));var xmlhttp=createXMLhttpRequest();var configFile=app+"/HB1298Widget.xml?v="+ndisVer;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status===200){var xmlDoc=createXMLdoc(xmlhttp);try{zoomScale2=xmlDoc.getElementsByTagName("zoomscale")[0].firstChild.nodeValue;}
catch(e){alert("Missing zoomscale tag in HB1298Widget.xml file.","Data Error");}
try{layers=xmlDoc.getElementsByTagName("layer");}
catch(e){alert("Missing layer tags in HB1298Widget.xml file.","Data Error");}
try{hb1298FileNm=xmlDoc.getElementsByTagName("filename")[0].firstChild.nodeValue;}
catch(e){alert("Missing filename tag in HB1298Widget.xml file.","Data Error");}
try{bmpdir=xmlDoc.getElementsByTagName("bmpdir")[0].firstChild.nodeValue;}
catch(e){alert("Missing bmpdir tag in HB1298Widget.xml file.","Data Error");}
try{wellidUrl=xmlDoc.getElementsByTagName("wellid")[0].getElementsByTagName("url")[0].firstChild.nodeValue}
catch(e){alert("Missing wellid url tags in HB1298Widget.xml file.","Data Error");}
try{wellidExp=xmlDoc.getElementsByTagName("wellid")[0].getElementsByTagName("expression")[0].firstChild.nodeValue}
catch(e){alert("Missing wellid expression tags in HB1298Widget.xml file.","Data Error");}
try{hb1298LayerIds=[];for(var i=0;i<layers.length;i++){hb1298LayerIds[i]={url:layers[i].getElementsByTagName("url")[0].childNodes[0].nodeValue,ids:layers[i].getElementsByTagName("id")[0].childNodes[0].nodeValue,fields:layers[i].getElementsByTagName("fields")[0].childNodes[0].nodeValue.split(","),display:layers[i].getElementsByTagName("displaynames")[0].childNodes[0].nodeValue.split(","),label:layers[i].getAttribute("label")}}}
catch(e){alert("Missing layer tag attribute label or tags: url, ids, fields, or display inside each layer tag in HB1298Widget.xml file.","Data Error");}
var tc=new TabContainer({style:"height: 350px; width:100%;",useMenu:false,useSlider:false},"hb1298_tc");var cp1=new ContentPane({title:'XY Location',content:'<div>Generate Habitat Impact Report based on location.</div><br/>'+'<label>Well label: </label><input id="wellLabel" /><br/><br/>'+'<label>Select coordinate format:</label><br/>'+'<select id="hb1298_xy_proj" name="hb1298_xy_proj" data-dojo-type="dijit/form/Select">'+'<option value="dd">Lat/Long Decimal Degrees</option>'+'<option value="dms">Lat/Long Degrees, Min, Sec</option>'+'<option value="dm">Lat/Long Degrees, Decimal Min</option>'+'<option value="32612">WGS84 UTM Zone 12N</option>'+'<option value="32613">WGS84 UTM Zone 13N</option>'+'<option value="26912">NAD83 UTM Zone 12N</option>'+'<option value="26913">NAD83 UTM Zone 13N</option>'+'<option value="26712">NAD27 UTM Zone 12N</option>'+'<option value="26713">NAD27 UTM Zone 13N</option>'+'</select><br/><br/>'+'<!-- Lat/Long Decimal Degrees -->'+'<div id="hb_ddDiv">'+'<table><tbody>'+'<tr><td colspan="2">Example: Lat. N:  39.834&#176;</td></tr>'+'<tr><td colspan="2">Example: Long. W: 103.984&#176;</td></tr>'+'<tr><td>Lat N: </td><td><input id="yDD" type="text"/> &#176;</td></tr>'+'<tr><td>Long W:</td><td><input id="xDD" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/> &#176;</td></tr>'+'</tbody></table>'+'</div>'+'<!-- Lat/Long Degrees, Min, Sec -->'+'<div id="hb_dmsDiv" style="display:none">'+'<table><tbody>'+'<tr><td colspan="4">Example: Lat. N:  39&#176; 50&#39; 4.111&#34;</td></tr>'+'<tr><td colspan="4">Example: Long. W: 103&#176; 48&#39; 1.25&#34;</td></tr>'+'<tr  style="font-size: x-small; text-align:center;"><td></td><td>degrees</td><td>minutes</td><td>seconds</td><td></td></tr>'+'<tr><td>Lat N: </td><td><input id="yDeg" size="3" type="text"/> &#176; </td><td><input id="yMin" size="3" type="text"/> &#39; </td><td><input id="ySec" size="5" type="text"/> &#34;</td></tr>'+'<tr><td>Long W:</td><td><input id="xDeg" size="3" type="text"/> &#176; </td><td><input id="xMin" size="3" type="text"/> &#39; </td><td><input id="xSec" size="5" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/> &#34;</td></tr>'+'</tbody></table>'+'</div>'+'<!-- Lat/Long Degrees, Decimal Min -->'+'<div id="hb_dmDiv" style="display:none">'+'<table><tbody>'+'<tr><td colspan="3">Example: Lat. N:  39&#176; 5.2&#39;</td></tr>'+'<tr><td colspan="3">Example: Long. W: 103&#176; 28&#39;</td></tr>'+'<tr style="font-size: x-small; text-align:center;"><td></td><td>degrees</td><td>minutes</td><td></td></tr>'+'<tr><td>Lat N: </td><td><input id="yDeg2" size="3" type="text"/>&#176; </td><td><input id="yMin2" size="5" type="text"/> &#39;</td></tr>'+'<tr><td>Long W:</td><td><input id="xDeg2" size="3" type="text"/>&#176; </td><td><input id="xMin2" size="5" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/> &#39;</td></tr>'+'</tbody></table>'+'</div>'+'<!-- WGS84 UTM Zone 12N -->'+'<div id="hb_32612Div" style="display:none">'+'<table><tbody>'+'<tr><td colspan="2">Range: 660,000 &lt;= X &lt;= 1,300,000</td></tr>'+'<tr><td colspan="2">Range: 4,095,000 &lt;= Y &lt;= 4,580,000</td></tr>'+'<tr><td>Easting: </td><td><input id="xUTM1284" type="text"/></td></tr>'+'<tr><td>Northing:</td><td><input id="yUTM1284" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/></td></tr>'+'</tbody></table>'+'</div>'+'<!-- WGS84 UTM Zone 13N -->'+'<div id="hb_32613Div" style="display:none">'+'<table><tbody>'+'<tr><td colspan="2">Range: 139,700 &lt;= X &lt;= 765,000</td></tr>'+'<tr><td colspan="2">Range: 4,097,000 &lt;= Y &lt;= 4,544,000</td></tr>'+'<tr><td>Easting: </td><td><input id="xUTM1384" type="text"/></td></tr>'+'<tr><td>Northing:</td><td><input id="yUTM1384" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/></td></tr>'+'</tbody></table>'+'</div>'+'<!-- UTM NAD83 Zone 12 -->'+'<div id="hb_26912Div" style="display:none">'+'<table><tbody>'+'<tr><td colspan="2">Range: 660,000 &lt;= X &lt;= 1,300,000</td></tr>'+'<tr><td colspan="2">Range: 4,095,000 &lt;= Y &lt;= 4,580,000</td></tr>'+'<tr><td>Easting: </td><td><input id="xUTM1283" type="text"/></td></tr>'+'<tr><td>Northing:</td><td><input id="yUTM1283" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/></td></tr>'+'</tbody></table>'+'</div>'+'<!-- UTM NAD83 Zone 13 -->'+'<div id="hb_26913Div" style="display:none">'+'<table><tbody>'+'<tr><td colspan="2">Range: 139,700 &lt;= X &lt;= 765,000</td></tr>'+'<tr><td colspan="2">Range: 4,097,000 &lt;= Y &lt;= 4,544,000</td></tr>'+'<tr><td>Easting: </td><td><input id="xUTM1383" type="text"/></td></tr>'+'<tr><td>Northing:</td><td><input id="yUTM1383" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/></td></tr>'+'</tbody></table>'+'</div>'+'<!-- UTM NAD27 Zone 12 -->'+'<div id="hb_26712Div" style="display:none">'+'<table><tbody>'+'<tr><td colspan="2">Range: 660,000 &lt;= X &lt;= 1,300,000</td></tr>'+'<tr><td colspan="2">Range: 4,095,000 &lt;= Y &lt;= 4,580,000</td></tr>'+'<tr><td>Easting: </td><td><input id="xUTM1227" type="text"/></td></tr>'+'<tr><td>Northing:</td><td><input id="yUTM1227" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/></td></tr>'+'</tbody></table>'+'</div>'+'<!-- UTM NAD27 Zone 13 -->'+'<div id="hb_26713Div" style="display:none">'+'<table><tbody>'+'<tr><td colspan="2">Range: 139,700 &lt;= X &lt;= 765,000</td></tr>'+'<tr><td colspan="2">Range: 4,097,000 &lt;= Y &lt;= 4,544,000</td></tr>'+'<tr><td>Easting: </td><td><input id="xUTM1327" type="text"/></td></tr>'+'<tr><td>Northing:</td><td><input id="yUTM1327" type="text" onkeydown="if (event.keyCode == 13) setPointXY();"/></td></tr>'+'</tbody></table>'+'</div>'+'<p align="center">'+'<button id="XYReportBtn" data-dojo-type="dijit/form/Button" role="presentation" type="button" onclick="setPointXY()">Generate Report</button>'+'<button data-dojo-type="dijit/form/Button" role="presentation" type="button" title="Remove well labels from the map." onClick="removeHB1298">Clear</button>'+'</p>'});tc.addChild(cp1);var s=registry.byId("hb1298_xy_proj");s.on("change",function(){var v=s.get("value");document.getElementById("hb_ddDiv").style.display="none";document.getElementById("hb_dmsDiv").style.display="none";document.getElementById("hb_dmDiv").style.display="none";document.getElementById("hb_32612Div").style.display="none";document.getElementById("hb_32613Div").style.display="none";document.getElementById("hb_26912Div").style.display="none";document.getElementById("hb_26913Div").style.display="none";document.getElementById("hb_26712Div").style.display="none";document.getElementById("hb_26713Div").style.display="none";if(v=="dd")document.getElementById("hb_ddDiv").style.display="block";else if(v=="dms")document.getElementById("hb_dmsDiv").style.display="block";else if(v=="dm")document.getElementById("hb_dmDiv").style.display="block";else if(v=="32612")document.getElementById("hb_32612Div").style.display="block";else if(v=="32613")document.getElementById("hb_32613Div").style.display="block";else if(v=="26912")document.getElementById("hb_26912Div").style.display="block";else if(v=="26913")document.getElementById("hb_26913Div").style.display="block";else if(v=="26712")document.getElementById("hb_26712Div").style.display="block";else if(v=="26713")document.getElementById("hb_26713Div").style.display="block";});var cp2=new ContentPane({title:'Well ID',content:'<div>Generate Habitat Impact Report based on well ID.</div><br/>'+'<label>Well ID: </label><input id="wellID" onkeydown="if (event.keyCode == 13) wellIDReport();"/>'+'<p align="center">'+'<button id="XYReportBtn2" data-dojo-type="dijit/form/Button" role="presentation" type="button" onclick="wellIDReport">Generate Report</button>'+'<button data-dojo-type="dijit/form/Button" role="presentation" type="button" title="Remove well labels from the map." onclick="removeHB1298">Clear</button>'+'</p>'});tc.addChild(cp2);var cp3=new ContentPane({title:'Select on Map',content:'<div>Generate Habitat Impact Report based on map click.</div><br/>'+'<label>Well Label: </label><input id="wellLabel2"/>'+'<p align="center">'+'<img id="btnLocation" onclick="javascript:selectPointTool();" style="vertical-align:middle" title="Set map tool to input map location" useHandCursor="true" class="graphBtn" src="assets/images/i_draw_point.png"/>&nbsp;&nbsp;'+'<button data-dojo-type="dijit/form/Button" role="presentation" type="button" title="Remove well labels from the map." onclick="removeHB1298">Clear</button>'+'</p>'});tc.addChild(cp3);tc.startup();tc.resize();tc.watch("selectedChildWidget",function(name,oval,nval){if(nval.title=="XY Location"){setTimeout(function(){document.getElementById("wellLabel").focus();},10);deselectPointTool();}
else if(nval.title=="Well ID"){setTimeout(function(){document.getElementById("wellID").focus();},10);deselectPointTool();}
else if(nval.title=="Select on Map"){setTimeout(function(){document.getElementById("wellLabel2").focus();},10);selectPointTool();}});cp1=null;cp2=null;cp3=null;registry.byId("hb1298Pane").set("open",true);dom.byId("hb1298Pane").addEventListener('click',function(event){if(!registry.byId("hb1298Pane").open){deselectPointTool();}});}
else if(xmlhttp.status===404){alert("Error: Missing HB1298Widget.xml file in "+app+" directory.","Data Error");hideLoading();}
else if(xmlhttp.readyState===4&&xmlhttp.status===500){alert("Error reading "+app+"/HB1298Widget.xml file.","Data Error");hideLoading();}};xmlhttp.open("GET",configFile,true);xmlhttp.send(null);}
catch(e){alert(e.message+" At javascript/hb1298.js/HB1298init. ","Error Message",e);}});}
HB1298init();require(["dojo/io-query"],function(ioquery){var cmdLineObj=ioquery.queryToObject(document.location.search.substr((document.location.search[0]==="?"?1:0)));if(cmdLineObj.hb1298&&cmdLineObj.hb1298!=""){addHB1298Points(cmdLineObj.hb1298);}});
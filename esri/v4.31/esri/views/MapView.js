// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/View2D":function(){define("require ../chunks/tslib.es6 ../geometry ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../geometry/projection ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./2d/AnimationManager ./2d/FrameTask ./2d/GoToManager ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/ViewStateManager ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/layers/support/util ./2d/support/clippingUtils ./2d/support/HighlightGroup ./2d/support/highlightGroupUtils ./2d/support/HighlightOptions ./2d/support/hitTestUtils ./2d/support/screenshotUtils ./2d/support/StationaryManager ./2d/support/Timeline ./support/screenUtils ./support/WebGLRequirements ./ui/DefaultUI ./ui/2d/DefaultUI2D ../webmap/utils ../webmap/background/ColorBackground ../geometry/Polygon".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q,k,u,v,z,y,t,w,B,A,D,E,I,O,U,W,K,P,T,C,F,N,Y,G,J,M,V,Z,aa,ia,da,H,L,R,S,X,ba,ea){async function na(){const [,{GraphicsView2D:Q,GraphicContainer:ca,LabelManager:fa,MapViewNavigation:la,MagnifierView2D:qa,GridView2D:sa,Stage:ta}]=await Promise.all([new Promise((oa,pa)=>b(["./2d/webglDeps"],oa,pa)),new Promise((oa,pa)=>b(["./2d/mapViewDeps"],oa,pa))]);ja=Q;ma=ca;ka=fa;ua=la;va=qa;wa=sa;ha=ta}let ha,ja,ma,ka,ua,va,wa;f=class extends y.BreakpointsOwner(w.PopupView(t.DOMContainer(B))){constructor(Q){super(Q);
this.stage=this._gridView=this._magnifierView=null;this._resolveWhenReady=[];this.rootLayerViews=new h({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});this.featuresTilingScheme=null;this.fullOpacity=1;this.goToManager=new E.GoToManager({view:this});this.graphicsView=null;this.stateManager=new C.ViewStateManager({constraints:new O({view:this})});this.stationaryManager=new ia.StationaryManager;this.mapViewNavigation=
this.labelManager=null;this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};this.supersampleScreenshotsEnabled=!0;this.supportsGround=!1;this.frameTask=new D(this);this.floors=new r;this.grid=null;this.highlights=M.createInitialHighlightGroups();this.inputManager=new F({view:this});this.map=null;this.spatialReferenceLocked=!1;this.timeline=new da.Timeline;this.type="2d";this.view2dType=null;this.ui=new S;this.test={takeScreenshot:async ca=>
aa.takeRawScreenshot(this._getScreenshotView(ca),ca)};this.padding={top:0,right:0,bottom:0,left:0};this.addHandles([c.watch(()=>this.viewpoint,()=>this.stationaryManager.flip(),c.sync),this.on("resize",ca=>this.stateManager.resize(ca.width,ca.height))]);m.initialize()}destroy(){this.layerViewManager.clear();this._set("preconditionsReady",!1);this.frameTask=e.destroyMaybe(this.frameTask);this.goToManager.destroy();this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)}get graphicsTileStore(){return new N(this.featuresTilingScheme)}get constraintsInfo(){const Q=
this.defaultsFromMap?.tileInfo,ca=this.spatialReference;return{lods:Q?.spatialReference?.equals(ca)?Q.lods:null,spatialReference:ca}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const {scale:Q,constraints:ca,center:fa,viewpoint:la,extent:qa}=this;let sa=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||qa)return!1;ca?.effectiveLODs||(sa=-1);return fa&&(0!==Q||-1!==sa)||null!=la?.targetGeometry&&
("extent"===la.targetGeometry.type||la.scale)?!1:!0}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const Q=this._getDefaultViewpoint();return Q?v.isLoadedOrLoadFor(Q.targetGeometry.spatialReference,this.spatialReference):!1}set animation(Q){var ca=this._get("animation");Q!==ca&&(ca&&ca.stop(),Q!==this.animationManager.animation&&
this.animationManager.stop(),!Q||Q.isFulfilled()?this._set("animation",null):(this._set("animation",Q),ca=()=>{this.destroyed||Q!==this._get("animation")||(this._set("animation",null),this.frameTask?.requestFrame())},Q.when(ca,ca)))}get background(){return X.isWebMap(this.map)?this.map.initialViewProperties.background:null}set background(Q){this._override("background",Q)}get center(){return this.stateManager?.center??null}set center(Q){this.stateManager.center=Q}get constraints(){return this.stateManager?.constraints}set constraints(Q){Q.view=
this;const ca=this.stateManager.constraints;this.stateManager.constraints=Q;ca?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(Q){this.stateManager.extent=Q}get highlightOptions(){return M.getDefaultHighlightOptions(this)}set highlightOptions(Q){M.setDefaultHighlightOptions(this,Q)}get padding(){return this.stateManager?.padding}set padding(Q){this.stateManager&&(this.stateManager.padding=Q)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(Q){this.stateManager.resizeAlign=
Q}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(Q){const {rotationEnabled:ca}=this.constraints;this.constraints.rotationEnabled=!0;this.stateManager.rotation=Q;this.constraints.rotationEnabled=ca}get scale(){return this.stateManager?.scale??0}set scale(Q){this.stateManager&&(this.stateManager.scale=Q)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const Q=
!(!this.magnifier.visible||null===this.magnifier.position||!this._magnifierView?.updatingHandles.updating),ca=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(fa=>!fa.destroyed&&!("layerViews"in fa)&&!0===fa.updating)||Q);if(p("esri-2d-log-updating")){const fa=this.allLayerViews.reduce((la,qa)=>({...la,[`${qa.layer.id}(${qa.layer.type})`]:!qa.destroyed&&
!("layerViews"in qa)&&qa.updating}),{});console.log(`Updating MapView: ${ca}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(fa)}\n-> updatingMagnifier: ${Q}\n`)}return ca}get viewpoint(){return this.stateManager.viewpoint??
null}set viewpoint(Q){this.stateManager.viewpoint=Q;this.frameTask.requestFrame()}get visibleArea(){const Q=this.stateManager.visibleArea;return Q?new ea({rings:[Q.map(ca=>[ca[0],ca[1]])],spatialReference:this.spatialReference}):Q}get zoom(){return this.stateManager.zoom??-1}set zoom(Q){this.stateManager.zoom=Q}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(Q,ca){return this.goToManager.goTo(Q,ca)}async hitTest(Q,ca){return Z.hitTest(this,Q,ca)}async takeScreenshot(Q){return aa.takeScreenshot(this._getScreenshotView(Q),
Q)}toMap(Q){if(!this.ready)return null;Q=H.isSupportedScreenPointEvent(Q)?H.createScreenPointFromSupportedEvent(this,Q):Q;return this.stateManager.toMap(Q)}toScreen(Q,ca){return this.stateManager.toScreen(Q,ca)}on(Q,ca,fa,la){return(fa=this.inputManager&&this.viewEvents.on(Q,ca,fa,la))?fa:super.on(Q,ca)}hasEventListener(Q){return super.hasEventListener(Q)||this.viewEvents.hasHandler(Q)}whenLayerView(Q){return super.whenLayerView(Q)}graphicChanged(Q){this.graphicsView&&this.graphicsView.graphicUpdateHandler(Q)}whenReady(){return new Promise(Q=>
{this.ready?Q(this):this._resolveWhenReady.push(Q)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return X.isWebMap(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return X.isWebMap(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(Q){return I.layerView2DImporter.hasLayerViewModule(Q)}importLayerView(Q){return I.layerView2DImporter.importLayerView(Q)}pixelSizeAt(){return this.ready?
this.resolution:(n.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(Q){const ca=this.toMap(Q),fa=await this.hitTest(Q),la=this.allLayerViews.toArray().filter(ra=>ra.clips.every(xa=>G.clipContainsPoint(this,xa,Q,ca))).reverse(),qa=new globalThis.Map(la.map(ra=>[ra.layer.uid,ra])),sa=[];let ta=0,oa=0;for(;ta<fa.results.length||oa<la.length;){var pa=fa.results.at(ta);if(pa&&"graphic"!==pa.type){++ta;continue}const ra=qa.get((pa?.layer??pa?.graphic.layer)?.uid);
(!pa||ra)&&oa<la.length&&la.at(oa)!==ra?(pa=la.at(oa),"fetchPopupFeaturesAtLocation"in pa&&sa.push({mapPoint:ca,layerView:pa}),++oa):pa&&(sa.push({graphic:pa.graphic,layerView:ra}),++ta)}return{hits:sa,location:ca}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let Q=L.check(this.type);p("safari")&&9>p("safari")&&(Q=new g("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:p("safari")}));
if(null!=Q)throw n.getLogger(this).warn("#validate()",Q.message),Q;}loadAsyncDependencies(){return na()}_getDefaultViewpoint(){const {constraints:Q,initialExtent:ca,map:fa,padding:la,size:qa}=this;if(!Q)return null;var sa=fa&&"initialViewProperties"in fa?fa.initialViewProperties:void 0;const ta=this.stateManager.getUserStartupOptions(this.size);var oa=sa?.viewpoint;const pa=oa?.targetGeometry?.extent??ca;var ra=pa?.center;sa=oa?.rotation??0;oa=oa?.scale||pa&&T.extentToScale(pa,[qa[0]-la.left-la.right,
qa[1]-la.top-la.bottom]);ra=ta.center??ra;oa=ta.scale??oa;return ra&&oa?new d({targetGeometry:ra,scale:oa,rotation:ta.rotation??sa}):null}_startup(){this.timeline.begin("MapView Startup");var Q=this._getDefaultViewpoint();this.stateManager.startup(Q,this.size,this.spatialReference,this.defaultsFromMap.extent?.center);this.graphics.owner=this;const ca=new ha(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},
renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=ca;this._magnifierView=new va;this._magnifierView.magnifier=this.magnifier;this._gridView=new wa;Q=new ka({view:this});this._set("labelManager",Q);Q=new A({view:this});this._set("animationManager",Q);Q=new ua({view:this,animationManager:Q});this._set("mapViewNavigation",Q);this._setupSpatialReferenceDependentProperties();this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),ca.on("webgl-error",fa=>
this.fatalError=fa.error),c.watch(()=>this.stationary,fa=>ca.stationary=fa,c.syncAndInitial),c.watch(()=>this.background,fa=>{ca.backgroundColor=fa?.color;this._magnifierView.backgroundColor=fa?.color},c.syncAndInitial),c.watch(()=>this.magnifier,fa=>this._magnifierView.magnifier=fa,c.syncAndInitial),c.watch(()=>this.grid,fa=>this._gridView.grid=fa,c.syncAndInitial),c.watch(()=>this.renderingOptions,fa=>ca.renderingOptions=fa,c.syncAndInitial),c.watch(()=>this.highlights.items.map(fa=>({name:fa.name,
options:{fillColor:fa.options.color,haloColor:fa.options.haloColor,fillOpacity:fa.options.fillOpacity,haloOpacity:fa.options.haloOpacity,haloWidth:fa.options.haloWidth,haloBlur:fa.options.haloBlur}})),()=>{ca.highlightGradient=Y.createOrReuseHighlightGradient(ca.highlightGradient,this.highlights.items)},c.syncAndInitial),c.watch(()=>this.state.id,()=>ca.state=this.state,c.syncAndInitial)],"map-view");this._updateStageChildren();Q=this._resolveWhenReady;this._resolveWhenReady=[];Q.forEach(fa=>fa(this));
this.timeline.end("MapView Startup");this.frameTask.start();this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties();this.removeHandles("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animation=null;this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._gridView.destroy();this.stage.destroy();this.stage=null;this._set("graphicsView",
null);this._gridView=this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask.stop();this.stationaryManager.clear();this._set("ready",!1);this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren();this.rootLayerViews.forEach(Q=>{this.stage.addChild(Q.container)});this.stage.addChild(this.graphicsView.container);this.stage.addChild(this._magnifierView);this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){var Q=
new U(z.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",Q);Q=new ja({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new ma(Q)});this._set("graphicsView",Q)}_destroySpatialReferenceDependentProperties(){const Q=this.graphicsView;this._set("graphicsView",null);Q.destroy();this._set("featuresTilingScheme",null)}_getScreenshotView(Q){const {allLayerViews:ca,padding:fa,size:la,stage:qa}=this;return{allLayerViews:ca,
backgroundColor:Q?.ignoreBackground?null:this.background?.color,padding:fa,size:la,stage:qa}}_spatialReferenceChanged(Q){if(this.ready){this.frameTask.stop();for(const ca of this.allLayerViews)ca.processDetach();this._destroySpatialReferenceDependentProperties();this.stateManager.changeSpatialReference(Q);this.stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const ca of this.allLayerViews)ca.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}}};
f.type="2d";a.__decorate([l.property({readOnly:!0})],f.prototype,"animationManager",void 0);a.__decorate([l.property({constructOnly:!0})],f.prototype,"deactivatedWebGLExtensions",void 0);a.__decorate([l.property({constructOnly:!0})],f.prototype,"debugWebGLExtensions",void 0);a.__decorate([l.property({readOnly:!0})],f.prototype,"featuresTilingScheme",void 0);a.__decorate([l.property({readOnly:!0})],f.prototype,"fullOpacity",void 0);a.__decorate([l.property()],f.prototype,"goToManager",void 0);a.__decorate([l.property({readOnly:!0})],
f.prototype,"graphicsTileStore",null);a.__decorate([l.property()],f.prototype,"graphicsView",void 0);a.__decorate([l.property()],f.prototype,"stateManager",void 0);a.__decorate([l.property()],f.prototype,"constraintsInfo",null);a.__decorate([l.property({readOnly:!0})],f.prototype,"state",null);a.__decorate([l.property()],f.prototype,"initialExtentRequired",null);a.__decorate([l.property()],f.prototype,"labelManager",void 0);a.__decorate([l.property({readOnly:!0})],f.prototype,"mapViewNavigation",
void 0);a.__decorate([l.property({constructOnly:!0})],f.prototype,"renderCanvas",void 0);a.__decorate([l.property()],f.prototype,"renderingOptions",void 0);a.__decorate([l.property({constructOnly:!0})],f.prototype,"supersampleScreenshotsEnabled",void 0);a.__decorate([l.property({readOnly:!0})],f.prototype,"supportsGround",void 0);a.__decorate([l.property()],f.prototype,"defaultsFromMapSettings",null);a.__decorate([l.property({readOnly:!0})],f.prototype,"typeSpecificPreconditionsReady",null);a.__decorate([l.property()],
f.prototype,"animation",null);a.__decorate([l.property({type:ba})],f.prototype,"background",null);a.__decorate([l.property()],f.prototype,"center",null);a.__decorate([l.property({type:O})],f.prototype,"constraints",null);a.__decorate([l.property()],f.prototype,"extent",null);a.__decorate([l.property()],f.prototype,"floors",void 0);a.__decorate([l.property()],f.prototype,"grid",void 0);a.__decorate([l.property({type:V})],f.prototype,"highlightOptions",null);a.__decorate([l.property({type:r.ofType(J.HighlightGroup)})],
f.prototype,"highlights",void 0);a.__decorate([l.property({readOnly:!0})],f.prototype,"inputManager",void 0);a.__decorate([l.property()],f.prototype,"map",void 0);a.__decorate([l.property()],f.prototype,"padding",null);a.__decorate([l.property({readOnly:!0})],f.prototype,"rendering",null);a.__decorate([l.property()],f.prototype,"resizeAlign",null);a.__decorate([l.property({readOnly:!0})],f.prototype,"resolution",null);a.__decorate([l.property()],f.prototype,"rotation",null);a.__decorate([l.property()],
f.prototype,"scale",null);a.__decorate([l.property({constructOnly:!0})],f.prototype,"spatialReferenceLocked",void 0);a.__decorate([l.property()],f.prototype,"stationary",null);a.__decorate([l.property({readOnly:!0})],f.prototype,"tileInfo",null);a.__decorate([l.property({type:da.Timeline,readOnly:!0})],f.prototype,"timeline",void 0);a.__decorate([l.property({readOnly:!0})],f.prototype,"type",void 0);a.__decorate([l.property({readOnly:!0})],f.prototype,"updating",null);a.__decorate([l.property({readOnly:!0})],
f.prototype,"view2dType",void 0);a.__decorate([l.property()],f.prototype,"viewpoint",null);a.__decorate([l.property({readOnly:!0})],f.prototype,"visibleArea",null);a.__decorate([l.property()],f.prototype,"zoom",null);a.__decorate([l.property({readOnly:!0})],f.prototype,"navigating",null);a.__decorate([l.property(),x.cast(Q=>Q instanceof R?Q:u.ensureClass(S,Q))],f.prototype,"ui",void 0);return f=a.__decorate([k.subclass("esri.views.View2D")],f)})},"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q,k,u,v){var z;a=new a.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});f=z=class extends f.JSONSupport{static create(y={}){const {resolutionFactor:t=1,scales:w,size:B=256,spatialReference:A=l.WebMercator,numLODs:D=24}=y;if(!q.isValid(A)){y=[];if(w)for(var E=0;E<w.length;E++){var I=
w[E];y.push(new u({level:E,scale:I,resolution:I}))}else for(E=5E-4,I=D-1;0<=I;I--)y.unshift(new u({level:I,scale:E,resolution:E})),E*=2;return new z({dpi:96,lods:y,origin:new m(0,0,A),size:[B,B],spatialReference:A})}E=q.getInfo(A);y=y.origin?new m({x:y.origin.x,y:y.origin.y,spatialReference:A}):E?new m({x:E.origin[0],y:E.origin[1],spatialReference:A}):new m({x:0,y:0,spatialReference:A});E=1/(39.37*d.getMetersPerUnitForSR(A)*96);I=[];if(w)for(var O=0;O<w.length;O++){var U=w[O];I.push(new u({level:O,
scale:U,resolution:U*E}))}else{var W=q.isGeographic(A)?512/B*5.916575275917094E8:256/B*5.91657527591555E8;O=Math.ceil(D/t);I.push(new u({level:0,scale:W,resolution:W*E}));for(U=1;U<O;U++)W/=2**t,I.push(new u({level:U,scale:W,resolution:W*E}))}return new z({dpi:96,lods:I,origin:y,size:[B,B],spatialReference:A})}constructor(y){super(y);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:y,origin:t}=this;if(y&&t){const w=q.getInfo(y);return y.isWrappable&&
!!w&&Math.abs(w.origin[0]-t.x)<=w.dx}return!1}readOrigin(y,t){return m.fromJSON({spatialReference:t.spatialReference,...y})}set lods(y){const t=[],w=this._levelToLOD={};y&&y.forEach(B=>{t.push(B.scale);w[B.level]=B});this._set("scales",t);this._set("lods",y);this._initializeUpsampleLevels()}readSize(y,t){return[t.cols,t.rows]}writeSize(y,t){t.cols=y[0];t.rows=y[1]}zoomToScale(y){const t=this.scales;if(0>=y)return t[0];if(y>=t.length-1)return t[t.length-1];const w=Math.floor(y);return t[w]/(t[w]/t[w+
1])**(y-w)}scaleToZoom(y){const t=this.scales,w=t.length-1;let B=0;for(;B<w;B++){const A=t[B],D=t[B+1];if(A<=y)break;if(D===y)return B+1;if(A>y&&D<y)return B+Math.log(A/y)/Math.log(A/D)}return B}tileAt(y,t,w,B){var A=this.lodAt(y);if(!A)return null;let D;if("number"===typeof t)D=t,t=w;else{if(q.equals(t.spatialReference,this.spatialReference))D=t.x,t=t.y;else{B=k.project(t,this.spatialReference);if(null==B)return null;D=B.x;t=B.y}B=w}w=A.resolution*this.size[0];A=A.resolution*this.size[1];B||=new v.TileKey(null,
0,0,0,x.create());B.level=y;B.row=Math.floor((this.origin.y-t)/A+.001);B.col=Math.floor((D-this.origin.x)/w+.001);this.updateTileInfo(B);return B}updateTileInfo(y,t=z.ExtrapolateOptions.NONE){var w=this.lodAt(y.level);w||t!==z.ExtrapolateOptions.POWER_OF_TWO||(t=this.lods[this.lods.length-1],t.level<y.level&&(w=t));if(w){var B=y.level-w.level;t=w.resolution*this.size[0]/2**B;w=w.resolution*this.size[1]/2**B;y.id=`${y.level}/${y.row}/${y.col}`;y.extent||(y.extent=x.create());y.extent[0]=this.origin.x+
y.col*t;y.extent[1]=this.origin.y-(y.row+1)*w;y.extent[2]=y.extent[0]+t;y.extent[3]=y.extent[1]+w}}upsampleTile(y){const t=this._upsampleLevels[y.level];if(!t||-1===t.parentLevel)return!1;y.level=t.parentLevel;y.row=Math.floor(y.row/t.factor+.001);y.col=Math.floor(y.col/t.factor+.001);this.updateTileInfo(y);return!0}getTileBounds(y,t){var w=this.lodAt(t.level);if(null==w)return null;var {resolution:B}=w;w=B*this.size[0];B*=this.size[1];y[0]=this.origin.x+t.col*w;y[1]=this.origin.y-(t.row+1)*B;y[2]=
y[0]+w;y[3]=y[1]+B;return y}lodAt(y){return this._levelToLOD?.[y]??null}clone(){return z.fromJSON(this.write({}))}getCompatibleForVTL(y){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===y)return null;const t=(512===this.size[0]&&256===y?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===y&&0===t)return this;const w=[],B=this.lods.length-t;for(let A=0;A<B;A++){const D=A+t,{scale:E,resolution:I}=0<=D?this.lods[D]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};
w.push(new u({level:A,scale:E,resolution:I}))}return new z({size:[y,y],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:w})}_initializeUpsampleLevels(){const y=this.lods;this._upsampleLevels=[];let t=null;for(let w=0;w<y.length;w++){const B=y[w];this._upsampleLevels[B.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/B.resolution:0};t=B}}};b.__decorate([r.property({type:Number,json:{write:!0}})],f.prototype,
"compressionQuality",void 0);b.__decorate([r.property({type:Number,json:{write:!0}})],f.prototype,"dpi",void 0);b.__decorate([r.property({type:String,json:{read:a.read,write:a.write,origins:{"web-scene":{read:!1,write:!1}}}})],f.prototype,"format",void 0);b.__decorate([r.property({readOnly:!0})],f.prototype,"isWrappable",null);b.__decorate([r.property({type:m,json:{write:!0}})],f.prototype,"origin",void 0);b.__decorate([n.reader("origin")],f.prototype,"readOrigin",null);b.__decorate([r.property({type:[u],
value:null,json:{write:!0}})],f.prototype,"lods",null);b.__decorate([r.property({readOnly:!0})],f.prototype,"scales",void 0);b.__decorate([r.property({cast:y=>Array.isArray(y)?y:"number"===typeof y?[y,y]:[256,256]})],f.prototype,"size",void 0);b.__decorate([n.reader("size",["rows","cols"])],f.prototype,"readSize",null);b.__decorate([c.writer("size",{cols:{type:h.Integer},rows:{type:h.Integer}})],f.prototype,"writeSize",null);b.__decorate([r.property({type:l,json:{write:!0}})],f.prototype,"spatialReference",
void 0);f=z=b.__decorate([e.subclass("esri.layers.support.TileInfo")],f);(function(y){y=y.ExtrapolateOptions||(y.ExtrapolateOptions={});y[y.NONE=0]="NONE";y[y.POWER_OF_TWO=1]="POWER_OF_TWO"})(f||={});return f})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,f,d,r,
h,g){var p;a=p=class extends a.JSONSupport{constructor(n){super(n);this.cols=null;this.level=0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new p({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};b.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"cols",void 0);b.__decorate([f.property({type:d.Integer,
json:{write:!0}})],a.prototype,"level",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"levelValue",void 0);b.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"origin",void 0);b.__decorate([f.property({type:Number,json:{write:!0}})],a.prototype,"resolution",void 0);b.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,
"rows",void 0);b.__decorate([f.property({type:Number,json:{write:!0}})],a.prototype,"scale",void 0);return a=p=b.__decorate([g.subclass("esri.layers.support.LOD")],a)})},"esri/layers/support/TileKey":function(){define(["exports"],function(b){class a{constructor(f,d,r,h,g){this.id=f;this.level=d;this.row=r;this.col=h;this.extent=g}}b.TileKey=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/tslib.es6 ../core/ArrayPool ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,f,d,r,h,g,p,n){function e(l,x){return x?c[l].valueToClassName[x].split(" "):[]}const c={widthBreakpoint:{getValue(l){const x=l.viewSize[0];l=l.breakpoints;const q=this.values;return x<=l.xsmall?q.xsmall:x<=l.small?q.small:x<=l.medium?q.medium:x<=l.large?q.large:q.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(l){const x=l.viewSize[1];l=l.breakpoints;const q=this.values;return x<=l.xsmall?q.xsmall:x<=l.small?q.small:x<=l.medium?q.medium:x<=l.large?q.large:q.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(l){l=l.viewSize;const x=this.values;return l[1]>=l[0]?x.portrait:x.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},m={xsmall:544,small:768,medium:992,large:1200};b.BreakpointsOwner=
l=>{l=class extends l{constructor(...x){super(...x);this.heightBreakpoint=this.widthBreakpoint=this.orientation=null;this.breakpoints=m}initialize(){this.addHandles(d.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),d.initial))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(x){var q=this._get("breakpoints");x!==q&&(q=x,q&&q.xsmall<q.small&&q.small<q.medium&&q.medium<q.large||(x=JSON.stringify(m,null,2),console.warn("provided breakpoints are not valid, using defaults:"+
x),x=m),this._set("breakpoints",{...x}))}_updateClassNames(){if(this.container){var x=f.acquire(),q=f.acquire(),k=!1,u;for(u in c){const v=this[u],z=c[u].getValue({viewSize:this.size,breakpoints:this.breakpoints});v!==z&&(k=!0,this[u]=z,e(u,v).forEach(y=>q.push(y)),e(u,z).forEach(y=>x.push(y)))}k&&(this._applyClassNameChanges(x,q),f.release(x),f.release(q))}}_applyClassNameChanges(x,q){const k=this.container;k&&(q.forEach(u=>k.classList.remove(u)),x.forEach(u=>k.classList.add(u)))}_removeActiveClassNames(){const x=
this.container;if(x)for(var q in c)e(q,this[q]).forEach(k=>x.classList.remove(k))}};a.__decorate([r.property()],l.prototype,"breakpoints",null);a.__decorate([r.property()],l.prototype,"orientation",void 0);a.__decorate([r.property()],l.prototype,"widthBreakpoint",void 0);a.__decorate([r.property()],l.prototype,"heightBreakpoint",void 0);return l=a.__decorate([n.subclass("esri.views.BreakpointsOwner")],l)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/tslib.es6 ../core/domUtils ../core/events ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/has ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l){function x(k){k&&(k.textContent="",k.parentNode&&k.parentNode.removeChild(k))}const q=[0,0];b.DOMContainer=k=>{k=class extends k{constructor(...u){super(...u);this._freqInfo={freq:16,time:750};this._overlayRenderTaskHandle=null;this.height=0;this.position=this.overlay=this.messagesCommon=null;this.resizing=!1;this.surface=this.root=null;this.suspended=!0;this.userContent=this.ui=null;this.width=0;this.widthBreakpoint=null;this.addHandles([g.watch(()=>this.cursor,
v=>{const {surface:z}=this;z&&z.setAttribute("data-cursor",v)}),g.watch(()=>this.navigating,v=>{const {surface:z}=this;z&&z.setAttribute("data-navigating",v.toString())})])}initialize(){this.addHandles([g.watch(()=>this.ui,(u,v)=>this._handleUIChange(u,v),g.initial),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=h.destroyMaybe(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(u){var v=
this._get("container");const z=f.byId(u);z||"string"!==typeof u||r.getLogger(this).error("#container",`element with id '${u}' not found`);if(v!==z)if(this._stopMeasuring(),v&&(v.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(x(this.root),this._set("root",null)),this.userContent&&(f.reparent(this.userContent,v),x(this.userContent),this._set("userContent",
null))),z){z.classList.add("esri-view");u=document.createElement("div");u.className="esri-view-user-storage";f.reparent(z,u);z.appendChild(u);this._set("userContent",u);u=document.createElement("div");u.className="esri-view-root";z.insertBefore(u,z.firstChild);this._set("root",u);v=document.createElement("div");v.className="esri-view-surface";v.setAttribute("role","application");v.tabIndex=0;u.appendChild(v);this._set("surface",v);var y=new l;u.appendChild(y.surface);this._set("overlay",y);this.addHandles(g.watch(()=>
y.needsRender,t=>{this._overlayRenderTaskHandle=t&&!this._overlayRenderTaskHandle?p.addFrameTask({render:()=>this.overlay?.render()}):h.removeMaybe(this._overlayRenderTaskHandle)}));this.forceDOMReadyCycle();this._set("container",z);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const u=document.activeElement===this.surface;return document.hasFocus()&&u}get size(){return[this.width,
this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(u,v,z){const y=this.position;u-=y?y[0]:0;v-=y?y[1]:0;z?(z[0]=u,z[1]=v):z=[u,v];return z}containerToPage(u,v,z){const y=this.position;u+=y?y[0]:0;v+=y?y[1]:0;z?(z[0]=u,z[1]=v):z=[u,v];return z}_handleUIChange(u,v){this.removeHandles("ui");v&&v!==u&&v.destroy();u&&(u.view=this,this.addHandles(g.watch(()=>this.root,z=>{if(z){const y=document.createElement("div");z.appendChild(y);z=y}else z=null;u.container=z},g.initial),
"ui"));this._set("ui",u)}_stopMeasuring(){this.removeHandles("measuring");this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const u=this._freqInfo;u.freq=16;u.time=750;this.addHandles([d.on(window,"resize",()=>{u.freq=16;u.time=750}),p.addFrameTask({prepare:v=>{const z=this._measure(),y=this._freqInfo;y.time+=v.deltaTime;z&&(y.freq=16,this._get("resizing")||this._set("resizing",!0));y.time<y.freq||(y.time=0,this._position()||z?y.freq=16:y.freq=Math.min(750,2*y.freq),!z&&512<=y.freq&&
this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()}_measure(){var u=this.container;const v=u?u.clientWidth:0;u=u?u.clientHeight:0;if(0===v||0===u)return this.suspended||this._set("suspended",!0),!1;const z=this.width,y=this.height;if(v===z&&u===y)return this.suspended&&this._set("suspended",!1),!1;this._set("width",v);this._set("height",u);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:z,oldHeight:y,width:v,height:u});return!0}_position(){var u=
this.container;const v=this.position;var z;if(z=u)z=(u.ownerDocument||window.document).defaultView,u=u.getBoundingClientRect(),q[0]=u.left+(z?.pageXOffset??0),q[1]=u.top+(z?.pageYOffset??0),z=q;u=z;return u?v&&u[0]===v[0]&&u[1]===v[1]?!1:(this._set("position",[u[0],u[1]]),!0):!1}forceDOMReadyCycle(){}};a.__decorate([n.property()],k.prototype,"container",null);a.__decorate([n.property({readOnly:!0})],k.prototype,"focused",null);a.__decorate([n.property({readOnly:!0})],k.prototype,"height",void 0);
a.__decorate([n.property()],k.prototype,"messagesCommon",void 0);a.__decorate([n.property({type:l})],k.prototype,"overlay",void 0);a.__decorate([n.property({readOnly:!0})],k.prototype,"position",void 0);a.__decorate([n.property({readOnly:!0})],k.prototype,"resizing",void 0);a.__decorate([n.property({readOnly:!0})],k.prototype,"root",void 0);a.__decorate([n.property({value:null,readOnly:!0})],k.prototype,"size",null);a.__decorate([n.property({readOnly:!0})],k.prototype,"surface",void 0);a.__decorate([n.property({readOnly:!0})],
k.prototype,"suspended",void 0);a.__decorate([n.property()],k.prototype,"ui",void 0);a.__decorate([n.property({readOnly:!0})],k.prototype,"userContent",void 0);a.__decorate([n.property({readOnly:!0})],k.prototype,"width",void 0);a.__decorate([n.property()],k.prototype,"widthBreakpoint",void 0);return k=a.__decorate([m.subclass("esri.views.DOMContainer")],k)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c){a=class extends a{constructor(){super(...arguments);this.items=new f;this._watchUpdatingTracking=new n.UpdatingHandles;this._callbacks=new Map;this._projector=c.createProjector();this._hiddenProjector=c.createProjector()}get needsRender(){return 0<this.items.length}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const m=document.createElement("div");m.className="esri-overlay-surface";this._set("surface",m);this._hiddenSurface=document.createElement("div");
this._hiddenSurface.setAttribute("style","visibility: hidden;");m.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,l=>{for(const x of l.added){const q=()=>x.render();this._callbacks.set(x,q);this._projector.append(this.surface,q)}for(const x of l.removed)l=this._projector.detach(this._callbacks.get(x)),this.surface.removeChild(l.domNode),this._callbacks.delete(x)})}addItem(m){this.items.add(m)}removeItem(m){this.items.remove(m)}destroy(){this.items.removeAll();
this._callbacks.forEach(m=>this._projector.detach(m));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(m){const l=this._hiddenSurface,x=this._hiddenProjector;let q;const k=()=>q=m.render();x.append(l,k);x.renderNow();const u={left:0,top:0,right:0,bottom:0};if(q?.domNode){const v=q.domNode.getBoundingClientRect();u.left=v.left;u.top=v.top;u.right=v.right;u.bottom=v.bottom}for(x.detach(k);l.firstChild;)l.removeChild(l.firstChild);
return u}overlaps(m,l){m=this.computeBoundingRect(m);l=this.computeBoundingRect(l);return Math.max(m.left,l.left)<=Math.min(m.right,l.right)&&Math.max(m.top,l.top)<=Math.min(m.bottom,l.bottom)}get hasVisibleItems(){return this.items.some(m=>m.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(m,l){const x=!!l?.disableDecorations;if(this.items.some(k=>k.visible&&!(x&&k.isDecoration))){var q=m.getContext("2d");q.save();q.font=this._fontString();this.items.forEach(k=>
{x&&k.isDecoration||(q.save(),k.renderCanvas(q),q.restore())});q.restore()}}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};b.__decorate([d.property({readOnly:!0})],a.prototype,"surface",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,"items",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,"needsRender",null);b.__decorate([d.property({readOnly:!0})],a.prototype,"_watchUpdatingTracking",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,
"updating",null);return a=b.__decorate([p.subclass("esri.views.overlay.ViewOverlay")],a)})},"esri/views/PopupView":function(){define("require exports ../chunks/tslib.es6 ../core/asyncUtils ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./input/InputManager".split(" "),function(b,a,f,d,r,h,g,p,n,e,c,m,l){function x(v){return null!=v&&"open"in v&&"declaredClass"in
v}function q(v){return null!=v&&"declaredClass"in v&&"dockOptions"in v}const k=v=>Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));class u{constructor(v){this.layerView=v;this._resolver=p.createResolver();this.graphics=[]}get promise(){return this._resolver.promise}resolve(v){const {layerView:z,graphics:y,_resolver:t}=this;if(!z)return t.resolve(y),t.promise;let w;z.fetchPopupFeaturesFromGraphics(y,v).catch(B=>{w=B;return null}).then(B=>{B?t.resolve(B):
t.reject(w)});return t.promise}}a.PopupView=v=>{v=class extends v{constructor(){super(...arguments);this._popupSetupTask=null;this.popup={};this.popupEnabled=!0}initialize(){this.addHandles([n.watch(()=>[this.ui,this.popup],([z,y],t)=>{if(t){const [w,B]=t;w&&x(B)&&(B.view=null,q(B)&&w.remove(B,"popup"))}z&&x(y)&&(y.view=this,q(y)&&z.add(y,{key:"popup",position:"manual",internal:!0}))},n.initial),this.on("click",z=>{this.popup&&this.popupEnabled&&("mouse"!==z.pointerType||0===z.button)&&(x(this.popup)?
this.popup.viewModel.handleViewClick(z):z.async(async()=>{await this.setupPopup();x(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(z)}))},l.ViewEventPriorities.WIDGET)]);n.whenOnce(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{new Promise((z,y)=>b(["../widgets/Popup"],t=>z(k(t)),y))})}destroy(){this.destroyed||this.closePopup()}async openPopup(z){if(x(this.popup))return this.popup.open(z);try{await this.setupPopup(),this.popup?this.popup.open(z):
g.getLogger(this).error(new r("view:null-popup","Popup is null and can't be opened"))}catch{}}closePopup(){this._popupSetupTask?.abort();x(this.popup)&&this.popup.close()}async fetchPopupFeatures(z,y){await this.when();return this._popupHitsToFeatures(await this._getPopupHits(z,y),y)}async setupPopup(){this._popupSetupTask?.abort();if(this.popup&&!x(this.popup))return this._popupSetupTask=d.createTask(async z=>{const {default:y}=await new Promise((t,w)=>b(["../widgets/Popup"],B=>t(k(B)),w));p.throwIfAborted(z);
this.popup&&!x(this.popup)&&(z=this.popup,delete z.open,delete z.close,this.popup=new y(z))}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:z,hits:y},t){const w=[],B=[];let A=!1;const D=p.wrapAbortWithTimeout(t,h("popup-view-fetch-timeout")??5E3);t=E=>{const I=B.at(-1);I&&I.layerView===E&&!A?E=I:(E=new u(E),B.push(E),w.push(E.promise));return E};for(const E of y)"graphic"in E?(t(E.layerView).graphics.push(E.graphic),A=!1):(w.push(E.layerView.fetchPopupFeaturesAtLocation(E.mapPoint,
D)),A=!0);B.map(E=>E.resolve(D));y=p.allSettledValues(w).then(E=>E.filter(I=>!!I).flat());return{pendingFeatures:w,allGraphicsPromise:y,location:z}}async _getPopupHits(z,y){const {hits:t,location:w}=await this.popupHitTest(z);p.throwIfAborted(y);z=[];for(const B of t)if("graphic"in B){if(this._isValidPopupGraphic(B.graphic,y)){const A=this._isValidPopupGraphicsLayerView(B.layerView)?B.layerView:void 0;z.push({graphic:B.graphic,layerView:A})}}else this._isValidPopupLocationLayerView(B.layerView)&&
z.push({mapPoint:B.mapPoint,layerView:B.layerView});return{hits:z,location:w}}_isValidPopupGraphic(z,y){return z&&!!z.getEffectivePopupTemplate(y?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(z){return!z||(!("layer"in z)||!z.suspended)&&"fetchPopupFeaturesFromGraphics"in z}_isValidPopupLocationLayerView(z){return(!("layer"in z)||!z.suspended)&&"fetchPopupFeaturesAtLocation"in z}};f.__decorate([e.property()],v.prototype,"popup",void 0);f.__decorate([e.property()],v.prototype,"popupEnabled",
void 0);return v=f.__decorate([m.subclass("esri.views.PopupView")],v)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/has ../../core/maybe ../../core/scheduling ../../core/screenUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/factories/vec2f64 ../ViewAnimation ./PaddedViewState ./unitBezier ./viewpointUtils ./pointToPoint/Camera ../animation/pointToPoint/Animation ../animation/pointToPoint/Settings ../../geometry/Point".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q,k,u,v,z,y,t,w){function B(D,E,I,O){if(null!=E?.duration)return!0;const {time:U,isLinear:W}=D;D=E?.speedFactor||1;E=E?.maxDuration??t.defaultSettings2D.maxDuration/D;r("esri-goto-debug")&&(console.log("speed factor:",D),console.log("adjusted duration:\t\t",U),console.log("adjusted max duration:\t",E),console.log("is linear:",W));if(U>E)return r("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${E/1E3}s`),!1;if(W){var K=
x.create();const P=p.createScreenPoint(...O.toScreen(K,...I.center));K=p.createScreenPoint(...I.toScreen(K,...O.center));I=null!=K&&K.x>-1*I.size[0]&&K.x<2*I.size[0]&&K.y>-1*I.size[1]&&K.y<2*I.size[1];O=null!=P&&P.x>-1*O.size[0]&&P.x<2*O.size[0]&&P.y>-1*O.size[1]&&P.y<2*O.size[1];r("esri-goto-debug")&&(console.log("dest is within 1.5 screens at start view:",I),console.log("start is within 1.5 screens at dest view:",O));if(U>2E3/D&&!I&&!O)return r("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...\n  - shorter than ${2/
D}s, or\n  - shorter than ${E/1E3}s and the destination is close enough to the starting screen, or\n  - shorter than ${E/1E3}s and the start point is close enough to the destination screen`),!1}return!0}class A{constructor(D){this._view=D;this._animation=new y.Animation(()=>new z.Camera(this._view));this._current=new z.Camera(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(D,
E,I={}){v.copy(this._current.viewpoint,D);v.copy(this._source.viewpoint,D);v.copy(this._target.viewpoint,E);this._animation.update(this._source,this._target,I)}applyRatio(D,E){this._animation.cameraAt(E,this._current);v.copy(D,this._current.viewpoint)}}a=class extends d{constructor(D){super(D);this._animation=null;this._destinationViewState=new k;this.updateFunction=null;this.easing=u.easingFunctions.ease;this.viewpoint=new f({targetGeometry:new w,scale:0,rotation:0});this._updateTask=g.addFrameTask({postRender:this._postRender.bind(this)});
this._updateTask.pause();this._transition=new A(D.view)}destroy(){this._updateTask=h.removeMaybe(this._updateTask)}get animation(){return this._animation}set animation(D){this._animation=D;this.view.animation=D}animate(D,E,I){this.stop();v.copy(this.viewpoint,E);const O=("string"===typeof I?.easing?u.parse(I.easing):I?.easing)||this.easing,U=D.target;this._transition.update(this.viewpoint,U,{apex:{maximumDistance:Math.min(64*Math.min(E.scale,U.scale),this.view.constraints.effectiveMinScale),desiredSlope:5E-8},
duration:I?.duration,maxDuration:"auto"===I?.animationMode?n.Milliseconds(Infinity):I?.maxDuration??t.defaultSettings2D.maxDuration,speedFactor:I?.speedFactor,easing:"function"===typeof O?W=>O(W):void 0});"auto"===I?.animationMode&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=U,B(this._transition.animation,I,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,U,{duration:n.Milliseconds(0)}));E=()=>{this.animation===D&&this._updateTask&&
("finished"===D.state&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};D.when(E,E);this._startTime=performance.now();this._updateTask.resume();return this.animation=D}animateContinuous(D,E){this.stop();this.updateFunction=E;this.viewpoint=D;const I=new q({target:D.clone()});D=()=>{this.animation===I&&this._updateTask&&(this.updateFunction=this.animation=null)};I.when(D,D);this._startTime=
performance.now();this._updateTask.resume();return this.animation=I}stop(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)}_postRender(D){var E=this.animation;E&&E.state!==q.State.STOPPED?(this.updateFunction?(this.updateFunction(this.viewpoint,D.deltaTime),this.animation?.update(this.viewpoint)):(D=performance.now()-this._startTime,E=this._transition.duration,D=0<E?D/E:1,E=1<=D,this._transition.applyRatio(this.viewpoint,D),E&&this.animation?.finish()),this.view.state&&
(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}};b.__decorate([e.property()],a.prototype,"easing",void 0);b.__decorate([e.property()],a.prototype,"view",void 0);b.__decorate([e.property()],a.prototype,"viewpoint",void 0);return a=b.__decorate([l.subclass("esri.views.2d.AnimationManager")],a)})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(b){function a(){return[0,0]}function f(k){return[k[0],k[1]]}function d(k,u){return[k,u]}function r(k,
u=[0,0]){const v=Math.min(2,k.length);for(let z=0;z<v;++z)u[z]=k[z];return u}function h(k,u){return new Float64Array(k,u,2)}function g(){return[0,0]}function p(){return[1,1]}function n(){return[1,0]}function e(){return[0,1]}const c=[0,0],m=[1,1],l=[1,0],x=[0,1],q=Object.freeze(Object.defineProperty({__proto__:null,ONES:m,UNIT_X:l,UNIT_Y:x,ZEROS:c,clone:f,create:a,createView:h,fromArray:r,fromValues:d,ones:p,unitX:n,unitY:e,zeros:g},Symbol.toStringTag,{value:"Module"}));b.ONES=m;b.UNIT_X=l;b.UNIT_Y=
x;b.ZEROS=c;b.clone=f;b.create=a;b.createView=h;b.fromArray=r;b.fromValues=d;b.ones=p;b.unitX=n;b.unitY=e;b.vec2f64=q;b.zeros=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m){var l,x;let q=l=class extends a{constructor(){super(...arguments);this.bottom=this.right=this.top=this.left=0}clone(){return new l({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};b.__decorate([d.property()],q.prototype,"left",void 0);b.__decorate([d.property()],q.prototype,"top",void 0);b.__decorate([d.property()],q.prototype,"right",void 0);b.__decorate([d.property()],q.prototype,"bottom",void 0);q=l=b.__decorate([p.subclass("esri.views.2d.PaddedViewState.Padding")],
q);a=x=class extends m{constructor(...k){super(...k);this.paddedViewState=new m;this._updateContent=(()=>{const u=e.create();return()=>{var v=this._get("size");const z=this._get("padding");if(v&&z){var y=this.paddedViewState;n.set(u,z.left+z.right,z.top+z.bottom);n.subtract(u,v,u);n.copy(y.size,u);if(v=y.viewpoint)this.viewpoint=v}}})();this.addHandles(f.watch(()=>[this.size,this.padding],()=>this._updateContent(),f.sync));this.padding=new q;this.size=[0,0]}set padding(k){this._set("padding",k||new q)}set viewpoint(k){if(k){let u=
this.paddedViewState.viewpoint=k;const v=this._get("padding");v&&(u=c.addPadding(k.clone(),k,this._get("size"),v));const {targetGeometry:z,rotation:y,scale:t}=u,{x:w,y:B,spatialReference:A}=z;k=this._viewpoint2D;k.center[0]=w;k.center[1]=B;k.rotation=y;k.scale=t;k.spatialReference=A;this._update()}}clone(){return new x({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};b.__decorate([d.property()],a.prototype,"paddedViewState",
void 0);b.__decorate([d.property({type:q})],a.prototype,"padding",null);b.__decorate([d.property()],a.prototype,"viewpoint",null);return a=x=b.__decorate([p.subclass("esri.views.2d.PaddedViewState")],a)})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["exports","./common"],function(b,a){function f(G,J){G[0]=J[0];G[1]=J[1];return G}function d(G,J,M){G[0]=J;G[1]=M;return G}function r(G,J,M){G[0]=J[0]+M[0];G[1]=J[1]+M[1];return G}function h(G,J,M){G[0]=J[0]-M[0];G[1]=J[1]-M[1];return G}function g(G,
J,M){G[0]=J[0]*M[0];G[1]=J[1]*M[1];return G}function p(G,J,M){G[0]=J[0]/M[0];G[1]=J[1]/M[1];return G}function n(G,J){G[0]=Math.ceil(J[0]);G[1]=Math.ceil(J[1]);return G}function e(G,J){G[0]=Math.floor(J[0]);G[1]=Math.floor(J[1]);return G}function c(G,J,M){G[0]=Math.min(J[0],M[0]);G[1]=Math.min(J[1],M[1]);return G}function m(G,J,M){G[0]=Math.max(J[0],M[0]);G[1]=Math.max(J[1],M[1]);return G}function l(G,J){G[0]=Math.round(J[0]);G[1]=Math.round(J[1]);return G}function x(G,J,M){G[0]=J[0]*M;G[1]=J[1]*M;
return G}function q(G,J,M,V){G[0]=J[0]+M[0]*V;G[1]=J[1]+M[1]*V;return G}function k(G,J){const M=J[0]-G[0];G=J[1]-G[1];return Math.sqrt(M*M+G*G)}function u(G,J){const M=J[0]-G[0];G=J[1]-G[1];return M*M+G*G}function v(G){const J=G[0];G=G[1];return Math.sqrt(J*J+G*G)}function z(G){const J=G[0];G=G[1];return J*J+G*G}function y(G,J){G[0]=-J[0];G[1]=-J[1];return G}function t(G,J){G[0]=1/J[0];G[1]=1/J[1];return G}function w(G,J){var M=J[0];const V=J[1];M=M*M+V*V;0<M&&(M=1/Math.sqrt(M),G[0]=J[0]*M,G[1]=J[1]*
M);return G}function B(G,J){return G[0]*J[0]+G[1]*J[1]}function A(G,J,M){J=J[0]*M[1]-J[1]*M[0];G[0]=G[1]=0;G[2]=J;return G}function D(G,J,M,V){const Z=J[0];J=J[1];G[0]=Z+V*(M[0]-Z);G[1]=J+V*(M[1]-J);return G}function E(G,J=1){const M=2*a.RANDOM()*Math.PI;G[0]=Math.cos(M)*J;G[1]=Math.sin(M)*J;return G}function I(G,J,M){const V=J[0];J=J[1];G[0]=M[0]*V+M[2]*J;G[1]=M[1]*V+M[3]*J;return G}function O(G,J,M){const V=J[0];J=J[1];G[0]=M[0]*V+M[2]*J+M[4];G[1]=M[1]*V+M[3]*J+M[5];return G}function U(G,J,M){const V=
J[0];J=J[1];G[0]=M[0]*V+M[3]*J+M[6];G[1]=M[1]*V+M[4]*J+M[7];return G}function W(G,J,M){const V=J[0];J=J[1];G[0]=M[0]*V+M[4]*J+M[12];G[1]=M[1]*V+M[5]*J+M[13];return G}function K(G,J,M,V){const Z=J[0]-M[0];J=J[1]-M[1];const aa=Math.sin(V);V=Math.cos(V);G[0]=Z*V-J*aa+M[0];G[1]=Z*aa+J*V+M[1];return G}function P(G,J){var M=G[0];G=G[1];const V=J[0];J=J[1];let Z=M*M+G*G;0<Z&&(Z=1/Math.sqrt(Z));let aa=V*V+J*J;0<aa&&(aa=1/Math.sqrt(aa));M=(M*V+G*J)*Z*aa;return 1<M?0:-1>M?Math.PI:Math.acos(M)}function T(G){return"vec2("+
G[0]+", "+G[1]+")"}function C(G,J){return G[0]===J[0]&&G[1]===J[1]}function F(G,J){const M=G[0];G=G[1];const V=J[0];J=J[1];const Z=a.getEpsilon();return Math.abs(M-V)<=Z*Math.max(1,Math.abs(M),Math.abs(V))&&Math.abs(G-J)<=Z*Math.max(1,Math.abs(G),Math.abs(J))}function N(G,J,M,V,Z){let aa=J[0]-M[0];M=J[1]-M[1];Z=(V[0]*aa+V[1]*M)*(Z-1);aa=V[0]*Z;M=V[1]*Z;G[0]=J[0]+aa;G[1]=J[1]+M;return G}const Y=Object.freeze(Object.defineProperty({__proto__:null,add:r,angle:P,ceil:n,copy:f,cross:A,dist:k,distance:k,
div:p,divide:p,dot:B,equals:F,exactEquals:C,floor:e,inverse:t,len:v,length:v,lerp:D,max:m,min:c,mul:g,multiply:g,negate:y,normalize:w,projectAndScale:N,random:E,rotate:K,round:l,scale:x,scaleAndAdd:q,set:d,sqrDist:u,sqrLen:z,squaredDistance:u,squaredLength:z,str:T,sub:h,subtract:h,transformMat2:I,transformMat2d:O,transformMat3:U,transformMat4:W},Symbol.toStringTag,{value:"Module"}));b.add=r;b.angle=P;b.ceil=n;b.copy=f;b.cross=A;b.dist=k;b.distance=k;b.div=p;b.divide=p;b.dot=B;b.equals=F;b.exactEquals=
C;b.floor=e;b.inverse=t;b.len=v;b.length=v;b.lerp=D;b.max=m;b.min=c;b.mul=g;b.multiply=g;b.negate=y;b.normalize=w;b.projectAndScale=N;b.random=E;b.rotate=K;b.round=l;b.scale=x;b.scaleAndAdd=q;b.set=d;b.sqrDist=u;b.sqrLen=z;b.squaredDistance=u;b.squaredLength=z;b.str=T;b.sub=h;b.subtract=h;b.transformMat2=I;b.transformMat2d=O;b.transformMat3=U;b.transformMat4=W;b.vec2=Y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../Viewpoint ../../core/Collection ../../core/mathUtils ../../core/unitUtils ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/normalizeUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q,k,u){function v(H,L){return L.type?n.set(H,L.x,L.y):n.copy(H,L)}function z(H,L,R=0){var S=H.width,X=H.height;0!==R&&(S=d.deg2rad(R),R=Math.abs(Math.cos(S)),X=Math.abs(Math.sin(S)),S=H.width*R+H.height*X,X=H.width*X+H.height*R);return Math.max(S/Math.max(1,L[0]),X/Math.max(1,L[1]))*I(H.spatialReference)}async function y(H,L,R,S){if(!H||Array.isArray(H)&&!H.length)return null;f.isCollection(H)&&(H=H.toArray());if(Array.isArray(H)&&H.length&&"object"===typeof H[0]){var X=
H.every(ka=>"attributes"in ka);var ba=H.some(ka=>!ka.geometry),ea=H;if(X&&ba&&L&&L.allLayerViews){X=new Map;for(var na of H)H=na.layer,ba=X.get(H)||[],ea=na.attributes[H.objectIdField],null!=ea&&ba.push(ea),X.set(H,ba);const ka=[];X.forEach((ua,va)=>{const wa=L.allLayerViews.find(Q=>Q.layer.id===va.id);if(wa&&"queryFeatures"in wa){const Q=va.createQuery();Q.objectIds=ua;Q.returnGeometry=!0;ka.push(wa.queryFeatures(Q))}});na=await Promise.all(ka);H=[];for(var ha of na)if(ha&&ha.features&&ha.features.length)for(var ja of ha.features)null!=
ja.geometry&&H.push(ja.geometry);ea=H}for(var ma of ea)S=await y(ma,L,R,S);return S}if(Array.isArray(H)&&2===H.length&&"number"===typeof H[0]&&"number"===typeof H[1])X=new l(H);else if(H instanceof m)X=H;else if("geometry"in H)if(H.geometry)X=H.geometry;else if(H.layer){const ka=H.layer;(ha=L.allLayerViews.find(ua=>ua.layer.id===ka.id))&&"queryFeatures"in ha&&(ja=ka.createQuery(),ja.objectIds=[H.attributes[ka.objectIdField]],ja.returnGeometry=!0,X=(await ha.queryFeatures(ja))?.features?.[0]?.geometry)}if(null==
X)return null;switch(X.type){case "point":ha=new c({xmin:X.x,ymin:X.y,xmax:X.x,ymax:X.y,spatialReference:X.spatialReference});break;case "extent":case "multipoint":case "polygon":case "polyline":ha=k.getDenormalizedExtent(X);break;default:ha=X.extent}if(!ha)return null;x.isLoaded()||x.canProjectWithoutEngine(ha.spatialReference,R)||await x.load();ha=x.project(ha,R);if(!ha)return null;S?(ja=ha.center,ma=ja.clone(),ma.x=k.getClosestDenormalizedXToReference(ja.x,S.center.x,R),ma.x!==ja.x&&ha.centerAt(ma),
S=S.union(ha)):S=ha;return S}function t(H){if(H&&(!Array.isArray(H)||"number"!==typeof H[0])&&("object"===typeof H||Array.isArray(H)&&"object"===typeof H[0])){if("layer"in H&&null!=H.layer?.minScale&&null!=H.layer.maxScale){var L=H.layer;return{min:L.minScale,max:L.maxScale}}if(Array.isArray(H)&&H.length&&H.every(R=>"layer"in R)){let R=L=0;for(const S of H)H=S.layer,H?.minScale&&H.maxScale&&(L=H.minScale<L?H.minScale:L,R=H.maxScale>R?H.maxScale:R);return L&&R?{min:L,max:R}:null}}}function w(H,L){const R=
H.wkid?H:H.spatialReference||q.WGS84;return u.equals(R,L)||R.imageCoordinateSystem||L.imageCoordinateSystem?H:x.project(H,L)}function B(H,L){const R=H.targetGeometry,S=L.targetGeometry;R.x=S.x;R.y=S.y;R.spatialReference=S.spatialReference;H.scale=L.scale;H.rotation=L.rotation;return H}function A(H,L,R){return R?n.set(H,.5*(L[0]-R.right+R.left),.5*(L[1]-R.bottom+R.top)):n.scale(H,L,.5)}function D(H){return H.scale*E(H.targetGeometry?.spatialReference)}function E(H){return null!=H&&u.isValid(H)?1/(39.37*
r.getMetersPerUnitForSR(H)*96):1}function I(H){return u.isValid(H)?39.37*r.getMetersPerUnitForSR(H)*96:1}function O(H){return(H=u.getInfo(H))?H.valid[1]-H.valid[0]:0}const U=180/Math.PI,W=function(){const H=e.create();return function(L,R,S){const X=R.targetGeometry;v(H,X);R=.5*D(R);L.xmin=H[0]-R*S[0];L.ymin=H[1]-R*S[1];L.xmax=H[0]+R*S[0];L.ymax=H[1]+R*S[1];L.spatialReference=X.spatialReference;return L}}(),K=function(){const H=e.create();return function(L,R,S){return n.sub(L,n.scale(L,R,.5),A(H,R,
S))}}(),P=function(){const H=p.create(),L=e.create();return function(R,S,X,ba){const ea=D(S);S=h.toRadian(S.rotation)||0;n.set(L,ea,ea);g.fromScaling(H,L);g.rotate(H,H,S);g.translate(H,H,K(L,X,ba));g.translate(H,H,[0,ba.top-ba.bottom]);return n.set(R,H[4],H[5])}}(),T=function(){const H=e.create(),L=e.create(),R=e.create();return function(S,X,ba,ea,na,ha){n.negate(H,X);n.scale(L,ba,.5*ha);n.set(R,1/ea*ha,-1/ea*ha);g.fromTranslation(S,L);na&&g.rotate(S,S,na);g.scale(S,S,R);g.translate(S,S,H);return S}}(),
C=function(){const H=e.create();return function(L,R,S,X){const ba=D(R),ea=h.toRadian(R.rotation)||0;v(H,R.targetGeometry);return T(L,H,S,ba,ea,X)}}(),F=function(){const H=e.create();return function(L,R,S,X){const ba=D(R);v(H,R.targetGeometry);return T(L,H,S,ba,0,X)}}(),N=function(){const H=e.create(),L=e.create(),R=[0,0,0];return function(S,X,ba){n.subtract(H,S,X);n.normalize(H,H);n.subtract(L,S,ba);n.normalize(L,L);n.cross(R,H,L);S=Math.acos(n.dot(H,L)/(n.length(H)*n.length(L)))*U;0>R[2]&&(S=-S);
isNaN(S)&&(S=0);return S}}(),Y=function(){const H=e.create();return function(L,R,S,X){const ba=L.targetGeometry;B(L,R);P(H,R,S,X);ba.x+=H[0];ba.y+=H[1];return L}}(),G=function(){return function(H,L,R){B(H,L);L=H.targetGeometry;L.x=R.x;L.y=R.y;L.spatialReference=R.spatialReference;return H}}(),J=function(){const H=e.create();return function(L,R,S,X,ba){ba||="center";n.sub(H,S,X);n.scale(H,H,.5);S=H[0];X=H[1];switch(ba){case "center":n.set(H,0,0);break;case "left":n.set(H,-S,0);break;case "top":n.set(H,
0,X);break;case "right":n.set(H,S,0);break;case "bottom":n.set(H,0,-X);break;case "top-left":n.set(H,-S,X);break;case "bottom-left":n.set(H,-S,-X);break;case "top-right":n.set(H,S,X);break;case "bottom-right":n.set(H,S,-X)}da(L,R,H);return L}}(),M=function(){const H=e.create();return function(L,R,S,X,ba){B(L,R);isNaN(S)||0===S||(aa(H,X,R,ba),L.scale=R.scale*S,ia(H,H,L,ba),da(L,L,n.set(H,H[0]-X[0],X[1]-H[1])));return L}}(),V=function(){const H=e.create();return function(L,R,S,X,ba,ea){B(L,R);isNaN(S)||
0===S||(aa(H,ba,R,ea),L.scale=R.scale*S,L.rotation+=X,ia(H,H,L,ea),da(L,L,n.set(H,H[0]-ba[0],ba[1]-H[1])));return L}}(),Z=function(){const H=e.create(),L=e.create();return function(R,S,X,ba,ea,na,ha){K(L,na,ha);n.add(H,ea,L);return ba?V(R,S,X,ba,H,na):M(R,S,X,H,na)}}(),aa=function(){const H=p.create();return function(L,R,S,X){var ba=n.transformMat2d;C(H,S,X,1);S=g.invert(H,H);return ba.call(n,L,R,S)}}(),ia=function(){const H=p.create();return function(L,R,S,X){return n.transformMat2d(L,R,C(H,S,X,
1))}}(),da=function(){const H=e.create(),L=p.create();return function(R,S,X){B(R,S);const ba=D(S),ea=R.targetGeometry;g.fromRotation(L,h.toRadian(S.rotation)||0);g.scale(L,L,e.fromValues(ba,ba));n.transformMat2d(H,X,L);ea.x+=H[0];ea.y+=H[1];return R}}();b.addPadding=Y;b.angleBetween=N;b.centerAt=G;b.copy=B;b.create=async function(H,L){if(!H||!L)return new a({targetGeometry:new l,scale:0,rotation:0});var R=L.spatialReference;const {constraints:S,padding:X,viewpoint:ba,size:ea}=L,na=[X?ea[0]-X.left-
X.right:ea[0],X?ea[1]-X.top-X.bottom:ea[1]];let ha=null;H instanceof a?ha=H:H.viewpoint?ha=H.viewpoint:H.target&&"esri.Viewpoint"===H.target.declaredClass&&(ha=H.target);let ja=null;ha?.targetGeometry?ja=ha.targetGeometry:H instanceof c?ja=H:H instanceof m?ja=await y(H,L,R):H&&(ja=await y(H.center,L,R)||await y(H.target,L,R)||await y(H,L,R));!ja&&ba?.targetGeometry?ja=ba.targetGeometry:!ja&&L.extent&&(ja=L.extent);R||(R=L.spatialReference||L.extent||ja,R=R.wkid?R:R.spatialReference||q.WGS84);x.isLoaded()||
u.equals(ja.spatialReference,R)||x.canProjectWithoutEngine(ja.spatialReference,R)||await x.load();var ma=w(ja,R);ma="center"in ma?ma.center:ma;!1!==L.pickClosestTarget&&"point"===ma.type&&"point"===ba.targetGeometry?.type&&(ma.x=k.getClosestDenormalizedXToReference(ma.x,ba.targetGeometry.x,ma.spatialReference));L=0;ha?L=ha.rotation:H.hasOwnProperty("rotation")?L=H.rotation:ba&&(L=ba.rotation);let ka=0;ka=null!=ha?.targetGeometry&&"point"===ha.targetGeometry.type?ha.scale:"scale"in H&&H.scale?H.scale:
"zoom"in H&&-1!==H.zoom&&S&&S.effectiveLODs?S.zoomToScale(H.zoom):Array.isArray(ja)||"point"===ja.type||"extent"===ja.type&&0===ja.width&&0===ja.height?ba.scale:z(w(ja.extent,R),na,L);if(H=t(H.target??H))H.min&&H.min<ka?ka=H.min:H.max&&H.max>ka&&(ka=H.max);H=new a({targetGeometry:ma,scale:ka,rotation:L});S&&(H=S.fit(H),S.constrainByGeometry(H),S.rotationEnabled||(H.rotation=ba.rotation));return H};b.extentToScale=z;b.getAnchor=A;b.getExtent=W;b.getMatrix=T;b.getPaddingMapTranslation=P;b.getPaddingScreenTranslation=
K;b.getResolution=D;b.getResolutionToScaleFactor=I;b.getScaleToResolutionFactor=E;b.getTransform=C;b.getTransformNoRotation=F;b.getWorldScreenWidth=function(H,L){return Math.round(O(H)/L)};b.getWorldWidth=O;b.padAndScaleAndRotateBy=Z;b.resize=J;b.rotateBy=function(H,L,R){B(H,L);H.rotation+=R;return H};b.rotateTo=function(H,L,R){B(H,L);H.rotation=R;return H};b.scaleAndRotateBy=V;b.scaleTo=function(H,L,R){B(H,L);H.scale=R;return H};b.setExtent=function(H,L,R,S,X){G(H,L,R.center);H.scale=z(R,S);X?.constraints?.constrain(H);
return H};b.toMap=aa;b.toScreen=ia;b.translateBy=da;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["exports","./common"],function(b,a){function f(A,D){A[0]=D[0];A[1]=D[1];A[2]=D[2];A[3]=D[3];A[4]=D[4];A[5]=D[5];return A}function d(A){A[0]=1;A[1]=0;A[2]=0;A[3]=1;A[4]=0;A[5]=0;return A}function r(A,D,E,I,O,U,W){A[0]=D;A[1]=E;A[2]=I;A[3]=O;A[4]=U;A[5]=W;return A}function h(A,D){const E=D[0],I=D[1],O=D[2],U=D[3],W=D[4];D=D[5];
let K=E*U-I*O;if(!K)return null;K=1/K;A[0]=U*K;A[1]=-I*K;A[2]=-O*K;A[3]=E*K;A[4]=(O*D-U*W)*K;A[5]=(I*W-E*D)*K;return A}function g(A){return A[0]*A[3]-A[1]*A[2]}function p(A,D,E){const I=D[0],O=D[1],U=D[2],W=D[3],K=D[4];D=D[5];const P=E[0],T=E[1],C=E[2],F=E[3],N=E[4];E=E[5];A[0]=I*P+U*T;A[1]=O*P+W*T;A[2]=I*C+U*F;A[3]=O*C+W*F;A[4]=I*N+U*E+K;A[5]=O*N+W*E+D;return A}function n(A,D,E){const I=D[0],O=D[1],U=D[2],W=D[3],K=D[4];D=D[5];const P=Math.sin(E);E=Math.cos(E);A[0]=I*E+U*P;A[1]=O*E+W*P;A[2]=I*-P+
U*E;A[3]=O*-P+W*E;A[4]=K;A[5]=D;return A}function e(A,D,E){const I=D[1],O=D[2],U=D[3],W=D[4],K=D[5],P=E[0];E=E[1];A[0]=D[0]*P;A[1]=I*P;A[2]=O*E;A[3]=U*E;A[4]=W;A[5]=K;return A}function c(A,D,E){const I=D[0],O=D[1],U=D[2],W=D[3],K=D[4];D=D[5];const P=E[0];E=E[1];A[0]=I;A[1]=O;A[2]=U;A[3]=W;A[4]=I*P+U*E+K;A[5]=O*P+W*E+D;return A}function m(A,D){const E=Math.sin(D);D=Math.cos(D);A[0]=D;A[1]=E;A[2]=-E;A[3]=D;A[4]=0;A[5]=0;return A}function l(A,D){A[0]=D[0];A[1]=0;A[2]=0;A[3]=D[1];A[4]=0;A[5]=0;return A}
function x(A,D){A[0]=1;A[1]=0;A[2]=0;A[3]=1;A[4]=D[0];A[5]=D[1];return A}function q(A){return"mat2d("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+")"}function k(A){return Math.sqrt(A[0]**2+A[1]**2+A[2]**2+A[3]**2+A[4]**2+A[5]**2+1)}function u(A,D,E){A[0]=D[0]+E[0];A[1]=D[1]+E[1];A[2]=D[2]+E[2];A[3]=D[3]+E[3];A[4]=D[4]+E[4];A[5]=D[5]+E[5];return A}function v(A,D,E){A[0]=D[0]-E[0];A[1]=D[1]-E[1];A[2]=D[2]-E[2];A[3]=D[3]-E[3];A[4]=D[4]-E[4];A[5]=D[5]-E[5];return A}function z(A,D,E){A[0]=D[0]*
E;A[1]=D[1]*E;A[2]=D[2]*E;A[3]=D[3]*E;A[4]=D[4]*E;A[5]=D[5]*E;return A}function y(A,D,E,I){A[0]=D[0]+E[0]*I;A[1]=D[1]+E[1]*I;A[2]=D[2]+E[2]*I;A[3]=D[3]+E[3]*I;A[4]=D[4]+E[4]*I;A[5]=D[5]+E[5]*I;return A}function t(A,D){return A[0]===D[0]&&A[1]===D[1]&&A[2]===D[2]&&A[3]===D[3]&&A[4]===D[4]&&A[5]===D[5]}function w(A,D){const E=A[0],I=A[1],O=A[2],U=A[3],W=A[4];A=A[5];const K=D[0],P=D[1],T=D[2],C=D[3],F=D[4];D=D[5];const N=a.getEpsilon();return Math.abs(E-K)<=N*Math.max(1,Math.abs(E),Math.abs(K))&&Math.abs(I-
P)<=N*Math.max(1,Math.abs(I),Math.abs(P))&&Math.abs(O-T)<=N*Math.max(1,Math.abs(O),Math.abs(T))&&Math.abs(U-C)<=N*Math.max(1,Math.abs(U),Math.abs(C))&&Math.abs(W-F)<=N*Math.max(1,Math.abs(W),Math.abs(F))&&Math.abs(A-D)<=N*Math.max(1,Math.abs(A),Math.abs(D))}const B=Object.freeze(Object.defineProperty({__proto__:null,add:u,copy:f,determinant:g,equals:w,exactEquals:t,frob:k,fromRotation:m,fromScaling:l,fromTranslation:x,identity:d,invert:h,mul:p,multiply:p,multiplyScalar:z,multiplyScalarAndAdd:y,rotate:n,
scale:e,set:r,str:q,sub:v,subtract:v,translate:c},Symbol.toStringTag,{value:"Module"}));b.add=u;b.copy=f;b.determinant=g;b.equals=w;b.exactEquals=t;b.frob=k;b.fromRotation=m;b.fromScaling=l;b.fromTranslation=x;b.identity=d;b.invert=h;b.mat2d=B;b.mul=p;b.multiply=p;b.multiplyScalar=z;b.multiplyScalarAndAdd=y;b.rotate=n;b.scale=e;b.set=r;b.str=q;b.sub=v;b.subtract=v;b.translate=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["exports"],
function(b){function a(){return[1,0,0,1,0,0]}function f(p){return[p[0],p[1],p[2],p[3],p[4],p[5]]}function d(p,n,e,c,m,l){return[p,n,e,c,m,l]}function r(p,n){return new Float64Array(p,n,6)}const h=a(),g=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:h,clone:f,create:a,createView:r,fromValues:d},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=h;b.clone=f;b.create=a;b.createView=r;b.fromValues=d;b.mat2df64=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/ViewState":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df32 ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/mat3 ../../core/libs/gl-matrix-2/factories/mat3f32 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f32 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ../../geometry/support/normalizeUtils ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q,k,u,v,z,y,t,w,B){var A;const D=[0,0];a=A=class extends d.JSONSupport{constructor(E){super(E);this._viewpoint2D={center:v.create(),rotation:0,scale:0,spatialReference:void 0};this.center=[0,0];this.extent=new w;this.id=0;this.inverseTransform=l.create();this.scale=this.rotation=this.resolution=0;this.transform=l.create();this.transformNoRotation=l.create();this.displayMat3=q.create();this.displayViewMat3=q.create();this.viewMat3=q.create();this.viewMat2d=m.create();
this.worldScreenWidth=0;this.size=[0,0]}set pixelRatio(E){this._set("pixelRatio",E);this._update()}set size(E){this._set("size",E);this._update()}set viewpoint(E){if(E){const I=this._viewpoint2D,O=E.targetGeometry;I.center[0]=O.x;I.center[1]=O.y;I.rotation=E.rotation;I.scale=E.scale;I.spatialReference=O.spatialReference}this._update()}get visibleArea(){const [E,I]=this.size,O=this.toMap([0,0],0,0),U=this.toMap([0,0],0,I),W=this.toMap([0,0],E,I),K=this.toMap([0,0],E,0);return[O,U,W,K]}copy(E){const I=
this.size,O=this.viewpoint;O&&I?(this.viewpoint=t.copy(O,E.viewpoint),this._set("size",k.copy(I,E.size))):(this.viewpoint=E.viewpoint.clone(),this._set("size",[E.size[0],E.size[1]]));this._set("pixelRatio",E.pixelRatio);return this}clone(){return new A({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(E,I,O){if(z.isVec2(I))return k.transformMat2d(E,I,this.inverseTransform);D[0]=I;D[1]=O;return k.transformMat2d(E,D,this.inverseTransform)}toScreen(E,I,O){if(z.isVec2(I))return k.transformMat2d(E,
I,this.transform);D[0]=I;D[1]=O;return k.transformMat2d(E,D,this.transform)}toScreenNoRotation(E,I,O){if(z.isVec2(I))return k.transformMat2d(E,I,this.transformNoRotation);D[0]=I;D[1]=O;return k.transformMat2d(E,D,this.transformNoRotation)}wrapMapCoordinate(E,I){k.copy(E,I);[I]=I;const [O]=this.center,{extent:U,spatialReference:W}=this;let {xmin:K,xmax:P}=U;if(W.isWrappable){const T=t.getWorldWidth(W)/2;K=Math.max(K,O-T);P=Math.min(P,O+T)}if(I<K||I>P)E[0]=y.getClosestDenormalizedXToReference(I,O,W);
return E}getScreenTransform(E,I){const {center:O}=this._viewpoint2D,U=this._get("pixelRatio")||1,W=this._get("size");t.getMatrix(E,O,W,I,0,U);return E}_update(){const {center:E,spatialReference:I,scale:O,rotation:U}=this._viewpoint2D,W=this._get("pixelRatio")||1,K=this._get("size"),P=new f({targetGeometry:new B(E[0],E[1],I),scale:O,rotation:U});this._set("viewpoint",P);if(K&&I&&O){this.resolution=t.getResolution(P);this.rotation=U;this.scale=O;this.spatialReference=I;k.copy(this.center,E);x.set(this.displayMat3,
0!==K[0]?2/K[0]:0,0,0,0,0!==K[1]?-2/K[1]:0,0,-1,1,1);var T=x.identity(this.viewMat3),C=u.fromValues(K[0]/2,K[1]/2),F=u.fromValues(-K[0]/2,-K[1]/2),N=e.toRadian(U);x.translate(T,T,C);x.rotate(T,T,N);x.translate(T,T,F);x.multiply(this.displayViewMat3,this.displayMat3,T);T=c.fromTranslation(this.viewMat2d,C);c.rotate(T,T,N);c.translate(T,T,F);t.getExtent(this.extent,P,K);t.getTransform(this.transform,P,K,W);c.invert(this.inverseTransform,this.transform);t.getTransformNoRotation(this.transformNoRotation,
P,K,W);this.worldScreenWidth=t.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",this.id+1);this.notifyChange("visibleArea");return this}}};b.__decorate([r.property({readOnly:!0})],a.prototype,"id",void 0);b.__decorate([r.property({value:1,json:{write:!0}})],a.prototype,"pixelRatio",null);b.__decorate([r.property({json:{write:!0}})],a.prototype,"size",null);b.__decorate([r.property()],a.prototype,"spatialReference",void 0);b.__decorate([r.property({type:f,json:{write:!0}})],
a.prototype,"viewpoint",null);b.__decorate([r.property({readOnly:!0})],a.prototype,"visibleArea",null);return a=A=b.__decorate([n.subclass("esri.views.2d.ViewState")],a)})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["exports"],function(b){function a(){const n=new Float32Array(6);n[0]=1;n[3]=1;return n}function f(n){const e=new Float32Array(6);e[0]=n[0];e[1]=n[1];e[2]=n[2];e[3]=n[3];e[4]=n[4];e[5]=n[5];return e}function d(n,e,c,m,l,x){const q=new Float32Array(6);q[0]=n;q[1]=
e;q[2]=c;q[3]=m;q[4]=l;q[5]=x;return q}function r(n,e){return new Float32Array(n,e,6)}function h(n,e,c,m){const l=e[m];e=e[m+1];n[m]=c[0]*l+c[2]*e+c[4];n[m+1]=c[1]*l+c[3]*e+c[5]}function g(n,e,c,m=0,l=0,x=2){for(l=l||e.length/x;m<l;m++)h(n,e,c,m*x)}const p=Object.freeze(Object.defineProperty({__proto__:null,clone:f,create:a,createView:r,fromValues:d,transform:h,transformMany:g},Symbol.toStringTag,{value:"Module"}));b.clone=f;b.create=a;b.createView=r;b.fromValues=d;b.mat2df32=p;b.transform=h;b.transformMany=
g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],function(b,a){function f(C,F){C[0]=F[0];C[1]=F[1];C[2]=F[2];C[3]=F[4];C[4]=F[5];C[5]=F[6];C[6]=F[8];C[7]=F[9];C[8]=F[10];return C}function d(C,F){C[0]=F[0];C[1]=F[1];C[2]=F[2];C[3]=F[3];C[4]=F[4];C[5]=F[5];C[6]=F[6];C[7]=F[7];C[8]=F[8];return C}function r(C,F,N,Y,G,J,M,V,Z,aa){C[0]=F;C[1]=N;C[2]=Y;C[3]=G;C[4]=J;C[5]=M;C[6]=V;C[7]=Z;C[8]=aa;return C}function h(C){C[0]=
1;C[1]=0;C[2]=0;C[3]=0;C[4]=1;C[5]=0;C[6]=0;C[7]=0;C[8]=1;return C}function g(C,F){if(C===F){const N=F[1],Y=F[2],G=F[5];C[1]=F[3];C[2]=F[6];C[3]=N;C[5]=F[7];C[6]=Y;C[7]=G}else C[0]=F[0],C[1]=F[3],C[2]=F[6],C[3]=F[1],C[4]=F[4],C[5]=F[7],C[6]=F[2],C[7]=F[5],C[8]=F[8];return C}function p(C,F){const N=F[0],Y=F[1],G=F[2],J=F[3],M=F[4],V=F[5],Z=F[6],aa=F[7];F=F[8];const ia=F*M-V*aa,da=-F*J+V*Z,H=aa*J-M*Z;let L=N*ia+Y*da+G*H;if(!L)return null;L=1/L;C[0]=ia*L;C[1]=(-F*Y+G*aa)*L;C[2]=(V*Y-G*M)*L;C[3]=da*L;
C[4]=(F*N-G*Z)*L;C[5]=(-V*N+G*J)*L;C[6]=H*L;C[7]=(-aa*N+Y*Z)*L;C[8]=(M*N-Y*J)*L;return C}function n(C,F){const N=F[0],Y=F[1],G=F[2],J=F[3],M=F[4],V=F[5],Z=F[6],aa=F[7];F=F[8];C[0]=M*F-V*aa;C[1]=G*aa-Y*F;C[2]=Y*V-G*M;C[3]=V*Z-J*F;C[4]=N*F-G*Z;C[5]=G*J-N*V;C[6]=J*aa-M*Z;C[7]=Y*Z-N*aa;C[8]=N*M-Y*J;return C}function e(C){const F=C[3],N=C[4],Y=C[5],G=C[6],J=C[7],M=C[8];return C[0]*(M*N-Y*J)+C[1]*(-M*F+Y*G)+C[2]*(J*F-N*G)}function c(C,F,N){const Y=F[0],G=F[1],J=F[2],M=F[3],V=F[4],Z=F[5],aa=F[6],ia=F[7];
F=F[8];const da=N[0],H=N[1],L=N[2],R=N[3],S=N[4],X=N[5],ba=N[6],ea=N[7];N=N[8];C[0]=da*Y+H*M+L*aa;C[1]=da*G+H*V+L*ia;C[2]=da*J+H*Z+L*F;C[3]=R*Y+S*M+X*aa;C[4]=R*G+S*V+X*ia;C[5]=R*J+S*Z+X*F;C[6]=ba*Y+ea*M+N*aa;C[7]=ba*G+ea*V+N*ia;C[8]=ba*J+ea*Z+N*F;return C}function m(C,F,N){const Y=F[0],G=F[1],J=F[2],M=F[3],V=F[4],Z=F[5],aa=F[6],ia=F[7];F=F[8];const da=N[0];N=N[1];C[0]=Y;C[1]=G;C[2]=J;C[3]=M;C[4]=V;C[5]=Z;C[6]=da*Y+N*M+aa;C[7]=da*G+N*V+ia;C[8]=da*J+N*Z+F;return C}function l(C,F,N){const Y=F[0],G=F[1],
J=F[2],M=F[3],V=F[4],Z=F[5],aa=F[6],ia=F[7];F=F[8];const da=Math.sin(N);N=Math.cos(N);C[0]=N*Y+da*M;C[1]=N*G+da*V;C[2]=N*J+da*Z;C[3]=N*M-da*Y;C[4]=N*V-da*G;C[5]=N*Z-da*J;C[6]=aa;C[7]=ia;C[8]=F;return C}function x(C,F,N){const Y=N[0],G=N[1];N=N[2];C[0]=Y*F[0];C[1]=Y*F[1];C[2]=Y*F[2];C[3]=G*F[3];C[4]=G*F[4];C[5]=G*F[5];C[6]=N*F[6];C[7]=N*F[7];C[8]=N*F[8];return C}function q(C,F,N){const Y=N[0];N=N[1];C[0]=Y*F[0];C[1]=Y*F[1];C[2]=Y*F[2];C[3]=N*F[3];C[4]=N*F[4];C[5]=N*F[5];return C}function k(C,F){C[0]=
1;C[1]=0;C[2]=0;C[3]=0;C[4]=1;C[5]=0;C[6]=F[0];C[7]=F[1];C[8]=1;return C}function u(C,F){const N=Math.sin(F);F=Math.cos(F);C[0]=F;C[1]=N;C[2]=0;C[3]=-N;C[4]=F;C[5]=0;C[6]=0;C[7]=0;C[8]=1;return C}function v(C,F){C[0]=F[0];C[1]=0;C[2]=0;C[3]=0;C[4]=F[1];C[5]=0;C[6]=0;C[7]=0;C[8]=1;return C}function z(C,F){C[0]=F[0];C[1]=F[1];C[2]=0;C[3]=F[2];C[4]=F[3];C[5]=0;C[6]=F[4];C[7]=F[5];C[8]=1;return C}function y(C,F){var N=F[0],Y=F[1],G=F[2];F=F[3];var J=N+N,M=Y+Y;const V=G+G;N*=J;const Z=Y*J;Y*=M;const aa=
G*J,ia=G*M;G*=V;J*=F;M*=F;F*=V;C[0]=1-Y-G;C[3]=Z-F;C[6]=aa+M;C[1]=Z+F;C[4]=1-N-G;C[7]=ia-J;C[2]=aa-M;C[5]=ia+J;C[8]=1-N-Y;return C}function t(C,F){const N=F[0],Y=F[1],G=F[2],J=F[4],M=F[5],V=F[6],Z=F[8],aa=F[9];F=F[10];const ia=F*M-V*aa,da=-F*J+V*Z,H=aa*J-M*Z;var L=N*ia+Y*da+G*H;if(!L)return null;L=1/L;C[0]=ia*L;C[1]=(-F*Y+G*aa)*L;C[2]=(V*Y-G*M)*L;C[3]=da*L;C[4]=(F*N-G*Z)*L;C[5]=(-V*N+G*J)*L;C[6]=H*L;C[7]=(-aa*N+Y*Z)*L;C[8]=(M*N-Y*J)*L;return C}function w(C,F){const N=F[0],Y=F[1],G=F[2],J=F[3],M=F[4],
V=F[5],Z=F[6],aa=F[7];var ia=F[8],da=F[9],H=F[10],L=F[11];const R=F[12],S=F[13],X=F[14];F=F[15];const ba=N*V-Y*M,ea=N*Z-G*M,na=N*aa-J*M,ha=Y*Z-G*V,ja=Y*aa-J*V,ma=G*aa-J*Z,ka=ia*S-da*R,ua=ia*X-H*R;ia=ia*F-L*R;const va=da*X-H*S;da=da*F-L*S;H=H*F-L*X;L=ba*H-ea*da+na*va+ha*ia-ja*ua+ma*ka;if(!L)return null;L=1/L;C[0]=(V*H-Z*da+aa*va)*L;C[1]=(Z*ia-M*H-aa*ua)*L;C[2]=(M*da-V*ia+aa*ka)*L;C[3]=(G*da-Y*H-J*va)*L;C[4]=(N*H-G*ia+J*ua)*L;C[5]=(Y*ia-N*da-J*ka)*L;C[6]=(S*ma-X*ja+F*ha)*L;C[7]=(X*na-R*ma-F*ea)*L;C[8]=
(R*ja-S*na+F*ba)*L;return C}function B(C,F,N){C[0]=2/F;C[1]=0;C[2]=0;C[3]=0;C[4]=-2/N;C[5]=0;C[6]=-1;C[7]=1;C[8]=1;return C}function A(C){return"mat3("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+")"}function D(C){return Math.sqrt(C[0]**2+C[1]**2+C[2]**2+C[3]**2+C[4]**2+C[5]**2+C[6]**2+C[7]**2+C[8]**2)}function E(C,F,N){C[0]=F[0]+N[0];C[1]=F[1]+N[1];C[2]=F[2]+N[2];C[3]=F[3]+N[3];C[4]=F[4]+N[4];C[5]=F[5]+N[5];C[6]=F[6]+N[6];C[7]=F[7]+N[7];C[8]=F[8]+N[8];return C}
function I(C,F,N){C[0]=F[0]-N[0];C[1]=F[1]-N[1];C[2]=F[2]-N[2];C[3]=F[3]-N[3];C[4]=F[4]-N[4];C[5]=F[5]-N[5];C[6]=F[6]-N[6];C[7]=F[7]-N[7];C[8]=F[8]-N[8];return C}function O(C,F,N){C[0]=F[0]*N;C[1]=F[1]*N;C[2]=F[2]*N;C[3]=F[3]*N;C[4]=F[4]*N;C[5]=F[5]*N;C[6]=F[6]*N;C[7]=F[7]*N;C[8]=F[8]*N;return C}function U(C,F,N,Y){C[0]=F[0]+N[0]*Y;C[1]=F[1]+N[1]*Y;C[2]=F[2]+N[2]*Y;C[3]=F[3]+N[3]*Y;C[4]=F[4]+N[4]*Y;C[5]=F[5]+N[5]*Y;C[6]=F[6]+N[6]*Y;C[7]=F[7]+N[7]*Y;C[8]=F[8]+N[8]*Y;return C}function W(C,F){return C[0]===
F[0]&&C[1]===F[1]&&C[2]===F[2]&&C[3]===F[3]&&C[4]===F[4]&&C[5]===F[5]&&C[6]===F[6]&&C[7]===F[7]&&C[8]===F[8]}function K(C,F){const N=C[0],Y=C[1],G=C[2],J=C[3],M=C[4],V=C[5],Z=C[6],aa=C[7];C=C[8];const ia=F[0],da=F[1],H=F[2],L=F[3],R=F[4],S=F[5],X=F[6],ba=F[7];F=F[8];const ea=a.getEpsilon();return Math.abs(N-ia)<=ea*Math.max(1,Math.abs(N),Math.abs(ia))&&Math.abs(Y-da)<=ea*Math.max(1,Math.abs(Y),Math.abs(da))&&Math.abs(G-H)<=ea*Math.max(1,Math.abs(G),Math.abs(H))&&Math.abs(J-L)<=ea*Math.max(1,Math.abs(J),
Math.abs(L))&&Math.abs(M-R)<=ea*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(V-S)<=ea*Math.max(1,Math.abs(V),Math.abs(S))&&Math.abs(Z-X)<=ea*Math.max(1,Math.abs(Z),Math.abs(X))&&Math.abs(aa-ba)<=ea*Math.max(1,Math.abs(aa),Math.abs(ba))&&Math.abs(C-F)<=ea*Math.max(1,Math.abs(C),Math.abs(F))}function P(C){const F=a.getEpsilon(),N=C[0],Y=C[1],G=C[2],J=C[3],M=C[4],V=C[5],Z=C[6],aa=C[7];C=C[8];return Math.abs(1-(N*N+J*J+Z*Z))<=F&&Math.abs(1-(Y*Y+M*M+aa*aa))<=F&&Math.abs(1-(G*G+V*V+C*C))<=F}const T=Object.freeze(Object.defineProperty({__proto__:null,
add:E,adjoint:n,copy:d,determinant:e,equals:K,exactEquals:W,frob:D,fromMat2d:z,fromMat4:f,fromQuat:y,fromRotation:u,fromScaling:v,fromTranslation:k,identity:h,invert:p,isOrthoNormal:P,mul:c,multiply:c,multiplyScalar:O,multiplyScalarAndAdd:U,normalFromMat4:w,normalFromMat4Legacy:t,projection:B,rotate:l,scale:x,scaleByVec2:q,set:r,str:A,sub:I,subtract:I,translate:m,transpose:g},Symbol.toStringTag,{value:"Module"}));b.add=E;b.adjoint=n;b.copy=d;b.determinant=e;b.equals=K;b.exactEquals=W;b.frob=D;b.fromMat2d=
z;b.fromMat4=f;b.fromQuat=y;b.fromRotation=u;b.fromScaling=v;b.fromTranslation=k;b.identity=h;b.invert=p;b.isOrthoNormal=P;b.mat3=T;b.mul=c;b.multiply=c;b.multiplyScalar=O;b.multiplyScalarAndAdd=U;b.normalFromMat4=w;b.normalFromMat4Legacy=t;b.projection=B;b.rotate=l;b.scale=x;b.scaleByVec2=q;b.set=r;b.str=A;b.sub=I;b.subtract=I;b.translate=m;b.transpose=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["exports"],function(b){function a(){const g=
new Float32Array(9);g[0]=1;g[4]=1;g[8]=1;return g}function f(g){const p=new Float32Array(9);p[0]=g[0];p[1]=g[1];p[2]=g[2];p[3]=g[3];p[4]=g[4];p[5]=g[5];p[6]=g[6];p[7]=g[7];p[8]=g[8];return p}function d(g,p,n,e,c,m,l,x,q){const k=new Float32Array(9);k[0]=g;k[1]=p;k[2]=n;k[3]=e;k[4]=c;k[5]=m;k[6]=l;k[7]=x;k[8]=q;return k}function r(g,p){return new Float32Array(g,p,9)}const h=Object.freeze(Object.defineProperty({__proto__:null,clone:f,create:a,createView:r,fromValues:d},Symbol.toStringTag,{value:"Module"}));
b.clone=f;b.create=a;b.createView=r;b.fromValues=d;b.mat3f32=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["exports"],function(b){function a(){return new Float32Array(2)}function f(q){const k=new Float32Array(2);k[0]=q[0];k[1]=q[1];return k}function d(q,k){const u=new Float32Array(2);u[0]=q;u[1]=k;return u}function r(q,k){return new Float32Array(q,k,2)}function h(){return a()}function g(){return d(1,1)}function p(){return d(1,
0)}function n(){return d(0,1)}const e=a(),c=g(),m=p(),l=n(),x=Object.freeze(Object.defineProperty({__proto__:null,ONES:c,UNIT_X:m,UNIT_Y:l,ZEROS:e,clone:f,create:a,createView:r,fromValues:d,ones:g,unitX:p,unitY:n,zeros:h},Symbol.toStringTag,{value:"Module"}));b.ONES=c;b.UNIT_X=m;b.UNIT_Y=l;b.ZEROS=e;b.clone=f;b.create=a;b.createView=r;b.fromValues=d;b.ones=g;b.unitX=p;b.unitY=n;b.vec2f32=x;b.zeros=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],
function(b){function a(d){return d instanceof Float32Array&&2<=d.length}function f(d){return Array.isArray(d)&&2<=d.length}b.isVec2=function(d){return a(d)||f(d)};b.isVec2f32=a;b.isVec2f64=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(b){function a(r,h,g,p){function n(k,u){var v;let z,y;z=k;for(v=0;8>v;v++){y=((m*z+c)*z+e)*z-k;if(Math.abs(y)<u)return z;var t=(3*m*z+2*c)*z+e;if(1E-6>Math.abs(t))break;z-=y/t}t=0;v=
1;z=k;if(z<t)return t;if(z>v)return v;for(;t<v;){y=((m*z+c)*z+e)*z;if(Math.abs(y-k)<u)break;k>y?t=z:v=z;z=.5*(v-t)+t}return z}const e=3*r,c=3*(g-r)-e,m=1-e-c,l=3*h,x=3*(p-h)-l,q=1-l-x;return function(k,u=1E-6){k=n(k,u);return((q*k+x)*k+l)*k}}const f=/^cubic-bezier\((.*)\)/,d={};d.ease=a(.25,.1,.25,1);d.linear=a(0,0,1,1);d.easeIn=d["ease-in"]=a(.42,0,1,1);d.easeOut=d["ease-out"]=a(0,0,.58,1);d.easeInOut=d["ease-in-out"]=a(.42,0,.58,1);b.easingFunctions=d;b.parse=function(r){let h=d[r]||null;!h&&(r=
f.exec(r))&&(r=r[1].split(",").map(g=>parseFloat(g.trim())),4!==r.length||r.some(g=>isNaN(g))||(h=a.apply(a,r)));return h};b.unitBezier=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/pointToPoint/Camera":function(){define("exports ../../../geometry ../../../Viewpoint ../../../core/mathUtils ../../../geometry/support/pointUtils ../viewpointUtils ../../../geometry/Point".split(" "),function(b,a,f,d,r,h,g){class p{constructor(n){this._view=n;this.viewpoint=new f({targetGeometry:new g,
scale:0,rotation:0})}get view(){return this._view}get size(){const [n,e]=this._view.size;return Math.sqrt(n*n+e*e)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return h.getScaleToResolutionFactor(this.center.spatialReference)}pixelsPerPanAtZoom(n){return 1/(n*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(n){return 1/(n*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/
2}compareTo(n,e){e.pan=r.distance(this.center,n.center);let c=Math.abs(n.rotation-this.rotation);e.rotate=d.deg2rad(180<=c?360-c:c);e.sourceZoom=this.scale;e.targetZoom=n.scale}interpolate(n,e,c){const {pan:m,rotate:l,zoom:x,zoomOffset:q}=c;({center:c}=this);c.spatialReference=n.center.spatialReference;c.x=d.lerp(n.center.x,e.center.x,m);c.y=d.lerp(n.center.y,e.center.y,m);this.viewpoint.scale=d.lerp(n.scale,e.scale+q,x);n=n.rotation;e=e.rotation;180<=Math.abs(e-n)&&(n+=360*(n<e?1:-1));this.viewpoint.rotation=
d.lerp(n,e,l)}copyFrom(n){h.copy(this.viewpoint,n.viewpoint);this._view=n.view}}b.Camera=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Animation":function(){define("exports ../../../core/time ../easing ./Definition ./InterpolateComponents ./Settings ./apex/Path".split(" "),function(b,a,f,d,r,h,g){const p=new r.InterpolateComponents;b.Animation=class{get time(){return this._time}get isLinear(){return 1===this.path.segments.length}constructor(n){this._time=
a.Milliseconds(0);this._easing=f.inOutCoastQuad;this.definition=new d.Definition(n);this.path=new g.Path}update(n,e,c){this.definition.update(n,e,c);this.path.update(this.definition,c);this._time=this._applyTimeSettings(a.millisecondsFromSeconds(isFinite(this.path.time)?this.path.time:a.Seconds(0)),c);this._easing=c.easing??(1E3<=this._time?f.inOutCoastQuad:f.outExpo)}cameraAt(n,e){n=Math.min(Math.max(0,n),1);n=this._normalizedEasing(n);n=this.path.interpolateComponentsAt(n,p);e.interpolate(this.definition.source,
this.definition.target,n)}_normalizedEasing(n){const e=this._easing(0,this._time),c=this._easing(1,this._time);return(this._easing(n,this._time)-e)/(c-e)}_applyTimeSettings(n,e){const c=null!=e.speedFactor?e.speedFactor:1,m=e.minDuration??h.defaultSettings.minDuration/c,l=e.maxDuration??h.defaultSettings.maxDuration/c;return n=null!=e.duration?e.duration:a.Milliseconds(Math.min(Math.max(n/c,m),l))}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/easing":function(){define(["exports"],
function(b){function a(G){const J=2*(G-Math.sqrt((G-1)*G)),M=J/2/G;return V=>V<M?G*V*V:J*V-J+1}function f(G,J){return(M,V)=>M<J?J*G(M/J,V):1-G((1-M)/(1-J),V)*(1-J)}const d=G=>G,r=G=>G*G,h=G=>1-r(1-G),g=G=>.5>G?r(2*G)/2:(1-r(1-2*(G-.5))+1)/2,p=G=>G*G*G,n=G=>1-p(1-G),e=G=>.5>G?p(2*G)/2:(1-p(1-2*(G-.5))+1)/2,c=G=>G*G*G*G,m=G=>1-c(1-G),l=G=>.5>G?c(2*G)/2:(1-c(1-2*(G-.5))+1)/2,x=G=>G*G*G*G*G,q=G=>1-x(1-G),k=G=>.5>G?x(2*G)/2:(1-x(1-2*(G-.5))+1)/2,u=G=>-Math.cos(G*Math.PI/2)+1,v=G=>1-u(1-G),z=G=>.5>G?u(2*
G)/2:(1-u(1-2*(G-.5))+1)/2,y=G=>2**(10*(G-1)),t=G=>1-2**(10*(1-G-1)),w=G=>.5>G?2**(10*(2*G-1))/2:(1-2**(10*(1-2*(G-.5)-1))+1)/2,B=G=>-(Math.sqrt(1-G*G)-1),A=G=>1-B(1-G),D=G=>.5>G?B(2*G)/2:(1-B(1-2*(G-.5))+1)/2,E=f(a(1),1),I=f(a(1),0),O=f(a(1),.5),U=f(a(2),1),W=f(a(2),0),K=f(a(2),.5),P=f(a(3),1),T=f(a(3),0),C=f(a(3),.5),F=f(a(4),1),N=f(a(4),0),Y=f(a(4),.5);b.EasingFunctions={linear:d,"in-quad":r,"out-quad":h,"in-out-quad":g,"in-coast-quad":E,"out-coast-quad":I,"in-out-coast-quad":O,"in-cubic":p,"out-cubic":n,
"in-out-cubic":e,"in-coast-cubic":U,"out-coast-cubic":W,"in-out-coast-cubic":K,"in-quart":c,"out-quart":m,"in-out-quart":l,"in-coast-quart":P,"out-coast-quart":T,"in-out-coast-quart":C,"in-quint":x,"out-quint":q,"in-out-quint":k,"in-coast-quint":F,"out-coast-quint":N,"in-out-coast-quint":Y,"in-sine":u,"out-sine":v,"in-out-sine":z,"in-expo":y,"out-expo":t,"in-out-expo":w,"in-circ":B,"out-circ":A,"in-out-circ":D};b.inCirc=B;b.inCoastCubic=U;b.inCoastQuad=E;b.inCoastQuart=P;b.inCoastQuint=F;b.inCubic=
p;b.inExpo=y;b.inOutCirc=D;b.inOutCoastCubic=K;b.inOutCoastQuad=O;b.inOutCoastQuart=C;b.inOutCoastQuint=Y;b.inOutCubic=e;b.inOutExpo=w;b.inOutQuad=g;b.inOutQuart=l;b.inOutQuint=k;b.inOutSine=z;b.inQuad=r;b.inQuart=c;b.inQuint=x;b.inSine=u;b.linear=d;b.outCirc=A;b.outCoastCubic=W;b.outCoastQuad=I;b.outCoastQuart=T;b.outCoastQuint=N;b.outCubic=n;b.outExpo=t;b.outQuad=h;b.outQuart=m;b.outQuint=q;b.outSine=v;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Definition":function(){define(["exports",
"../../../core/libs/gl-matrix-2/math/common","./Camera","./Settings"],function(b,a,f,d){class r{constructor(h){this._createCamera=h;this.compared=new f.CompareResult;this.segmentStart=0;this.segmentEnd=1;this.settings={desiredScreenFlow:d.defaultSettings.desiredScreenFlow};this.source=h();this.target=h()}clone(){const h=new r(this._createCamera);h.copyFrom(this);return h}copyFrom(h){this.update(h.source,h.target,h.settings)}update(h,g,p){this.source!==h&&this.source.copyFrom(h);this.target!==g&&this.target.copyFrom(g);
this.source.compareTo(this.target,this.compared);this.settings.desiredScreenFlow=p.desiredScreenFlow??d.defaultSettings.desiredScreenFlow;this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size;this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(h){h=this.target.pixelsPerPanAtZoom(h);return this.halfWindowSize/h}get hasZoom(){return 1E-5<Math.abs(this.compared.sourceZoom-this.compared.targetZoom)}get hasPan(){return this.compared.pan>a.getEpsilon()}get hasFov(){return Math.abs(this.compared.fov)>
a.getEpsilon()}get hasRotate(){return this.compared.rotate>a.getEpsilon()}}b.Definition=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Camera":function(){define(["exports"],function(b){class a{constructor(){this.targetZoom=this.sourceZoom=this.fov=this.rotate=this.pan=0}}b.CompareResult=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Settings":function(){define(["exports","../../../core/time"],
function(b,a){const f={desiredScreenFlow:2,minDuration:a.Milliseconds(500),maxDuration:a.Milliseconds(8E3)};a={...f,maxDuration:a.Milliseconds(4E3)};b.defaultSettings=f;b.defaultSettings2D=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/InterpolateComponents":function(){define(["exports"],function(b){class a{constructor(){this.zoomOffset=this.fov=this.zoom=this.rotate=this.pan=0}}b.InterpolateComponents=a;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/animation/pointToPoint/apex/Path":function(){define(["exports","../../easing","../Path","../Segment","./planning"],function(b,a,f,d,r){class h extends f.Path{constructor(g,p){super();this._preallocSegments=[new d.Segment,new d.Segment,new d.Segment];this._descensionSegment=this._ascensionSegment=null;this.update(g,p)}update(g,p){g&&(this.definition?this.definition.copyFrom(g):this.definition=g.clone(),g=p?.apex?r.optimalDistance(g,p.apex):null,this.segments.length=
0,this._descensionSegment=this._ascensionSegment=null,g?this._updateWithApex(g,p?.apex):this._updateWithoutApex())}segmentInterpolateComponentsAt(g,p,n){g.interpolateComponentsAt(p,n);g===this._ascensionSegment?n.zoom=a.outQuad(n.zoom):g===this._descensionSegment&&(n.zoom=a.inQuad(n.zoom))}_updateWithApex(g,p){const [n,e,c]=this._preallocSegments,m=p?.ascensionFactor??.5;p=Math.min(1-m,null!=p?.ascensionFactor&&null!=p.descensionFactor?p.descensionFactor:.5);const l=1-m-p;n.definition?n.definition.copyFrom(this.definition):
n.definition=this.definition.clone();n.definition.compared.targetZoom=g;n.definition.compared.pan=this.definition.compared.pan*m;n.definition.compared.rotate=this.definition.compared.rotate*m;n.definition.segmentEnd=m;n.update();this._ascensionSegment=n;this.segments.push(n);0<l&&(e.definition?e.definition.copyFrom(this.definition):e.definition=this.definition.clone(),e.definition.copyFrom(this.definition),e.definition.compared.sourceZoom=g,e.definition.compared.targetZoom=g,e.definition.compared.pan=
this.definition.compared.pan*l,e.definition.compared.rotate=this.definition.compared.rotate*l,e.definition.segmentStart=n.definition.segmentEnd,e.definition.segmentEnd=n.definition.segmentEnd+l,e.update(),this.segments.push(e));c.definition?c.definition.copyFrom(this.definition):c.definition=this.definition.clone();c.definition.compared.sourceZoom=g;c.definition.compared.pan=this.definition.compared.pan*p;c.definition.compared.rotate=this.definition.compared.rotate*p;c.definition.segmentStart=m+l;
c.update();this._descensionSegment=c;this.segments.push(c)}_updateWithoutApex(){const [g]=this._preallocSegments;g.update(this.definition);this.segments.push(g)}}b.Path=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Path":function(){define(["exports","../../../core/time"],function(b,a){b.Path=class{constructor(){this.segments=[]}get time(){return this.segments.reduce((f,d)=>a.Seconds(f+d.time),a.Seconds(0))}interpolateComponentsAt(f,d){f=Math.min(Math.max(f,
0),1);f*=this.time;var r=0,h=0;const g=this.definition,p=this.segments.reduce((n,e)=>n||e.definition.hasZoom,!1);for(let n=0;n<this.segments.length;n++){const e=this.segments[n],c=e.definition;if(f<=e.time||n===this.segments.length-1){this.segmentInterpolateComponentsAt(e,0===e.time?0:f/e.time,d);g.hasPan&&!isNaN(d.pan)&&isFinite(g.compared.pan)?d.pan=(r+c.compared.pan*d.pan)/g.compared.pan:d.pan=1;g.hasRotate&&!isNaN(d.rotate)&&isFinite(g.compared.rotate)?d.rotate=(h+c.compared.rotate*d.rotate)/
g.compared.rotate:d.rotate=1;if(p&&!isNaN(d.zoom)&&isFinite(c.compared.targetZoom)){const {sourceZoom:m,targetZoom:l}=c.compared;f=d.zoom*(l-m)+m;r=this.segments[0].definition.compared.sourceZoom;h=Math.abs(l-r)>Math.abs(m-r)?l:m;d.zoomOffset=h-this.segments[this.segments.length-1].definition.compared.targetZoom;d.zoom=(f-r)/(h-r)}else d.zoom=1;return d}f-=e.time;r+=c.compared.pan;h+=c.compared.rotate}}segmentInterpolateComponentsAt(f,d,r){f.interpolateComponentsAt(d,r)}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Segment":function(){define(["exports","../../../core/mathUtils","../../../core/time"],function(b,a,f){class d{get time(){return this._time}constructor(h){h&&this.update(h)}update(h){h&&(this.definition?this.definition.copyFrom(h):this.definition=h.clone());this._updatePrecomputedVariables();this._updatePixelFlow()}_updatePrecomputedVariables(){var h=this.definition;const g=h.compared,p=g.sourceZoom;this._zoomSign=p>g.targetZoom?
1:-1;this._panPixelsAtSource=g.pan*h.source.pixelsPerPanAtZoom(p);h=(h.source.pixelsPerRotate()+h.target.pixelsPerRotate())/2;this._rotatePixels=g.rotate*h}_updatePixelFlow(){var h=this.definition.compared.sourceZoom,g=this.definition.compared.targetZoom;const {hasZoom:p,hasPan:n,hasRotate:e}=this.definition;var c=0,m=0;p&&(n&&(c=(g/h-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),e&&(m=Math.log(h/g)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/
this._rotatePixels));this._rotatePixelFlow=this._panPixelFlow=this._zoomPixelFlow=0;h=this.definition.desiredPixelFlow;p&&n&&e?(g=c+m+c*m,this._zoomPixelFlow=c*m/g*h,this._panPixelFlow=m/g*h,this._rotatePixelFlow=c/g*h):p&&n?(m=1+c,this._zoomPixelFlow=c/m*h,this._panPixelFlow=1/m*h):p&&e?(c=1+m,this._zoomPixelFlow=m/c*h,this._rotatePixelFlow=1/c*h):n&&e?(c=this._panPixelsAtSource/this._rotatePixels,m=1+c,this._panPixelFlow=c/m*h,this._rotatePixelFlow=1/m*h):n?this._panPixelFlow=h:p?this._zoomPixelFlow=
h:e&&(this._rotatePixelFlow=h);this._time=f.Seconds(Math.max(this.rotateTime,this.zoomTime,this.panTime));this.fovTime>this._time&&(h=this.fovTime/this._time,this._time=this.fovTime,this._zoomPixelFlow/=h,this._panPixelFlow/=h,this._rotatePixelFlow/=h)}get rotateTime(){return this.definition.hasRotate?f.Seconds(this._rotatePixels/this._rotatePixelFlow):f.Seconds(0)}get zoomTime(){return this.definition.hasZoom?f.Seconds(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/
Math.LN2*this._zoomSign*this.definition.halfWindowSize/this._zoomPixelFlow):f.Seconds(0)}get fovTime(){return this.definition.hasFov?f.Seconds(Math.abs(this.definition.compared.fov)/r):f.Seconds(0)}get panTime(){if(!this.definition.hasPan)return f.Seconds(0);if(this.definition.hasZoom){const h=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2;return f.Seconds(Math.log(this._zoomPixelFlow/this._panPixelFlow*this._panPixelsAtSource*h+1)/(h*this._zoomPixelFlow))}return f.Seconds(this._panPixelsAtSource/
this._panPixelFlow)}_interpolateComponentsZoom(h){if(0===h||1===h)return h;if(this.definition.hasZoom){const g=this.definition.compared.sourceZoom,p=this.definition.compared.targetZoom;return(g*(g/p)**-h-g)/(p-g)}return h}_interpolateComponentsFov(h){if(0===h)return this.definition.segmentStart;if(1===h)return this.definition.segmentEnd;if(this.definition.hasFov){const {segmentStart:g,segmentEnd:p}=this.definition;return g+h*(p-g)}return this.definition.segmentStart}_interpolateComponentsPan(h){if(0===
h||1===h)return h;if(this.definition.hasPan&&this.definition.hasZoom){const g=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*this._panPixelFlow*(2**(g*h*this._time)-1)/(g*Math.LN2)}return h}_interpolateComponentsRotate(h){return h}interpolateComponentsAt(h,g){h=Math.min(Math.max(h,0),1);g.zoom=this._interpolateComponentsZoom(h);g.pan=this._interpolateComponentsPan(h);g.rotate=this._interpolateComponentsRotate(h);g.zoomOffset=0;g.fov=this._interpolateComponentsFov(h)}}
const r=a.deg2rad(45);b.Segment=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/apex/planning":function(){define(["exports","./functions"],function(b,a){function f(d,r){const h=Math.max(d.compared.sourceZoom,d.compared.targetZoom);d=d.source.zoomAtPixelsPerPan(d.desiredPixelFlow/d.compared.pan)/2;return d<h?null!=r.maximumDistance?h+(r.maximumDistance-h)/2:1.5*h:r.maximumDistance?Math.min(r.maximumDistance,d):d}b.optimalDistance=function(d,r){let h=
f(d,r);const g={ascensionFactor:null!=r.ascensionFactor?r.ascensionFactor:.5,descensionFactor:null!=r.descensionFactor?r.descensionFactor:.5};var p=0===g.ascensionFactor,n=0===g.descensionFactor;const e=p?a.tAscensionZoomOnly:a.tAscensionZoomPan,c=p?a.dtAscensionZoomOnly:a.dtAscensionZoomPan,m=p?a.ddtAscensionZoomOnly:a.ddtAscensionZoomPan,l=n?a.tDescensionZoomOnly:a.tDescensionZoomPan,x=n?a.dtDescensionZoomOnly:a.dtDescensionZoomPan,q=n?a.ddtDescensionZoomOnly:a.ddtDescensionZoomPan;p=B=>e(d,B,g)+
a.tPanion(d,B,g)+l(d,B,g);n=B=>c(d,B,g)+a.dtPanion(d,B,g)+x(d,B,g);const k=B=>m(d,B,g)+a.ddtPanion(d,B,g)+q(d,B,g);let u=p(h);const v=a.tBaseLine(d);let z;const y=r.maximumIterations||20,t=null!=r.maximumDistance?r.maximumDistance:Infinity;for(z=0;z<y;z++){var w=r.desiredSlope??1E-6;let B=n(h);Math.abs(B)>w&&(B+=w);w=B/k(h);if(isNaN(w)||h>=t&&0>w){if(!isFinite(t))return null;h=t;u=p(h);break}h-=w;if(h<d.compared.sourceZoom||h<d.compared.targetZoom)return null;w=p(h);if(.005>=Math.abs(w-u)/u)break;
u=w}return u>.7*v||h<d.compared.sourceZoom||h<d.compared.targetZoom?null:h};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/apex/functions":function(){define(["exports"],function(b){b.ddtAscensionZoomOnly=function(a,f){return-a.halfWindowSize/(f*f*a.desiredPixelFlow*Math.LN2)};b.ddtAscensionZoomPan=function(a,f,d){const r=f-a.compared.sourceZoom,h=1/r,g=1/f,p=Math.log(a.compared.sourceZoom*g);d=(d.ascensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(r))/
a.halfWindowPanAtZoom(1);return a.halfWindowSize*h*(-2*h*g*d+2*h*p+2*g-2*p*d/(r*r)-d/(f*f))/(a.desiredPixelFlow*Math.LN2)};b.ddtDescensionZoomOnly=function(a,f){return-a.halfWindowSize/(f*f*a.desiredPixelFlow*Math.LN2)};b.ddtDescensionZoomPan=function(a,f,d){const r=f-a.compared.targetZoom,h=1/r,g=1/f,p=Math.log(f/a.compared.targetZoom);d=(a.halfWindowPanAtZoom(f)+d.descensionFactor*Math.LN2*a.compared.pan-a.halfWindowPanAtZoom(a.compared.targetZoom))/a.halfWindowPanAtZoom(1);return a.halfWindowSize*
h*(-2*h*g*d-2*h*p+2*g+2*p*d/(r*r)-d/(f*f))/(a.desiredPixelFlow*Math.LN2)};b.ddtPanion=function(a,f,d){return-2*a.compared.pan*a.halfWindowSize*(d.ascensionFactor+d.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(f*f*f))};b.dtAscensionZoomOnly=function(a,f){return a.halfWindowSize/(f*a.desiredPixelFlow*Math.LN2)};b.dtAscensionZoomPan=function(a,f,d){const r=1/f,h=Math.log(a.compared.sourceZoom*r),g=1/a.desiredPixelFlow,p=1/Math.LN2;f-=a.compared.sourceZoom;const n=1/f;d=(d.ascensionFactor*
Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(f))/a.halfWindowPanAtZoom(1);return a.halfWindowSize*r*g*p*n*d-a.halfWindowSize*h*g*p*n+a.halfWindowSize*h*g*p*d/(f*f)};b.dtDescensionZoomOnly=function(a,f){return a.halfWindowSize/(f*a.desiredPixelFlow*Math.LN2)};b.dtDescensionZoomPan=function(a,f,d){const r=Math.log(f/a.compared.targetZoom),h=1/a.desiredPixelFlow,g=1/Math.LN2,p=-f+a.compared.targetZoom,n=1/p;d=(-a.halfWindowPanAtZoom(f)-d.descensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(a.compared.targetZoom))/
a.halfWindowPanAtZoom(1);return-a.halfWindowSize*r*h*g*n+a.halfWindowSize*r*h*g*d/(p*p)+a.halfWindowSize*h*g*n*d/f};b.dtPanion=function(a,f,d){return a.compared.pan*a.halfWindowSize*(d.ascensionFactor+d.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(f*f))};b.tAscensionZoomOnly=function(a,f){return-a.halfWindowSize*Math.log(a.compared.sourceZoom/f)/(a.desiredPixelFlow*Math.LN2)};b.tAscensionZoomPan=function(a,f,d){const r=a.halfWindowPanAtZoom(f-a.compared.sourceZoom);return-a.halfWindowSize*
(d.ascensionFactor*Math.LN2*a.compared.pan+r)*Math.log(a.compared.sourceZoom/f)/(a.desiredPixelFlow*Math.LN2*r)};b.tBaseLine=function(a){var f=a.compared.sourceZoom-a.compared.targetZoom;if(0===f)return a.compared.pan*a.halfWindowSize/(a.desiredPixelFlow*a.halfWindowPanAtZoom(a.compared.sourceZoom));const d=Math.LN2*a.compared.pan;f=a.halfWindowPanAtZoom(f);const r=a.halfWindowSize*Math.log(a.compared.sourceZoom/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2*f);return a.compared.sourceZoom<=
a.compared.targetZoom?r*(d-f):r*(d+f)};b.tDescensionZoomOnly=function(a,f){return a.halfWindowSize*Math.log(f/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2)};b.tDescensionZoomPan=function(a,f,d){return a.halfWindowSize*(-a.halfWindowPanAtZoom(f)-d.descensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(a.compared.targetZoom))*Math.log(f/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2*a.halfWindowPanAtZoom(-f+a.compared.targetZoom))};b.tPanion=function(a,f,d){return-a.compared.pan*
a.halfWindowSize*(d.ascensionFactor+d.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(f))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/FrameTask":function(){define("../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ./PaddedViewState ../support/RenderState ../support/Scheduler".split(" "),function(b,a,f,d,r,h){class g{constructor(p){this.view=p;this._updateParameters=this._frameTaskHandle=this._stationaryHandle=null;this._updateRequested=
!1;this._scheduler=h.newScheduler();this.stationary=!0;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),null==this.view.animation?.target||b.isPromiseLike(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=
this.view.animation.target))};this.update=n=>{this._updateRequested=!1;if(!this.view?.destroyed){var {allLayerViews:e,graphicsView:c,labelManager:m,state:{id:l}}=this.view;e.forEach(this._updateLayerView,this);null!=m&&(m.lastUpdateId!==l&&(m.viewChange(),m.lastUpdateId=l),m.updateRequested&&m.processUpdate(this._updateParameters));null!=c&&(c.lastUpdateId!==l&&(c.viewChange(),c.lastUpdateId=l),c.updateRequested&&c.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);
this._scheduler.state=this.view.animation?r.RenderState.ANIMATING:this.view.interacting?r.RenderState.INTERACTING:r.RenderState.IDLE;this._scheduler.updateBudget(n)&&this._scheduler.frame()}}}destroy(){this.stop();this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(!this._frameTaskHandle){var p=this.view;this.stationary=p.stationary;this._updateParameters={state:p.state,targetState:new d,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:p.renderingOptions};
this._stationaryHandle=a.watch(()=>p.stationary,n=>{this.stationary=n;this.requestFrame()});this._frameTaskHandle=f.addFrameTask(this);this.requestUpdate()}}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(p){if(p.attached){var n=
this.view.state,e=p.lastUpdateId;if(null==e||!this.stationary&&!p.moving)p.moving=!0;e!==n.id&&p.viewChange();this.stationary&&p.moving&&(p.moving=!1,p.moveEnd());p.lastUpdateId=n.id;p.updateRequested&&p.processUpdate(this._updateParameters);"layerViews"in p&&p.layerViews?.forEach(this._updateLayerView,this)}else this.requestUpdate()}}return g})},"esri/views/support/RenderState":function(){define(["exports"],function(b){b.RenderState=void 0;var a=b.RenderState||(b.RenderState={});a[a.ANIMATING=0]=
"ANIMATING";a[a.INTERACTING=1]="INTERACTING";a[a.IDLE=2]="IDLE";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),function(b,a,f,d,r,h,g,p,n,e,
c,m,l,x,q){function k(I){return u.has(I)?u.get(I):"number"===typeof I?I:1}b.TaskPriority=void 0;(function(I){I.RESOURCE_CONTROLLER_IMMEDIATE="immediate";I.RESOURCE_CONTROLLER="schedule";I.SLIDE="slide";I.STREAM_DATA_LOADER="stream loader";I.ELEVATION_QUERY="elevation query";I.TERRAIN_SURFACE="terrain";I.SURFACE_GEOMETRY_UPDATES="surface geometry updates";I.LOD_RENDERER="LoD renderer";I.GRAPHICS_CORE="Graphics3D";I.I3S_CONTROLLER="I3S";I.POINT_CLOUD_LAYER="point cloud";I.FEATURE_TILE_FETCHER="feature fetcher";
I.OVERLAY="overlay";I.STAGE="stage";I.GRAPHICS_DECONFLICTOR="graphics deconflictor";I.FILTER_VISIBILITY="Graphics3D filter visibility";I.SCALE_VISIBILITY="Graphics3D scale visibility";I.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";I.POINT_OF_INTEREST_FREQUENT="POI frequent";I.POINT_OF_INTEREST_INFREQUENT="POI infrequent";I.LABELER="labeler";I.FEATURE_QUERY_ENGINE="feature query";I.FEATURE_TILE_TREE="feature tile tree";I.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";I.ELEVATION_ALIGNMENT=
"elevation alignment";I.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";I.TEXT_TEXTURE_ATLAS="text texture atlas";I.TEXTURE_UNLOAD="texture unload";I.LINE_OF_SIGHT_TOOL="line of sight tool";I.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";I.ELEVATION_PROFILE="elevation profile";I.SNAPPING="snapping";I.SHADOW_ACCUMULATOR="shadow accumulator";I.CLOUDS_GENERATOR="clouds generator";I.MAPVIEW_FETCH_QUEUE="mapview fetch queue";I.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update";
I.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue";I[I.NONE=0]="NONE";I[I.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority={}));const u=new Map([[b.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[b.TaskPriority.RESOURCE_CONTROLLER,4],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.LOD_RENDERER,2],[b.TaskPriority.GRAPHICS_CORE,
2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.CLOUDS_GENERATOR,2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,
8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.ELEVATION_ALIGNMENT_SCENE,14],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30],[b.TaskPriority.MAPVIEW_FETCH_QUEUE,0],[b.TaskPriority.MAPVIEW_LAYERVIEW_UPDATE,2],[b.TaskPriority.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,
0]]),v=c.Milliseconds(6.5),z=c.Milliseconds(1),y=c.Milliseconds(30),t=c.Milliseconds(1E3/30),w=c.Milliseconds(100);var B;(function(I){class O{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(K=>K.needsUpdate)}constructor(){this._updating=e.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new h("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new W;this._state=x.RenderState.INTERACTING;this._tasks=
new g;this._runQueue=new g;this._load=0;this._idleStateCallbacks=new g;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=n.watch(()=>l.SCHEDULER_LOG_SLOW_TASKS,K=>this._debug=K,n.initial);for(const K of Object.keys(b.TaskPriority))this.performanceInfo.tasks.set(b.TaskPriority[K],new h(b.TaskPriority[K]))}destroy(){this._tasks.toArray().forEach(K=>K.remove());this._tasks.clear();r.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(K){this._updatingChanged();
K&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(K,P){P=new U(this,K,P);this._tasks.push(P);this._updatingChanged();this.performanceInfo.tasks.has(K)||this.performanceInfo.tasks.set(K,new h(K));return P}registerIdleStateCallbacks(K,P){const T={idleBegin:K,idleEnd:P};this._idleStateCallbacks.push(T);this.state===x.RenderState.IDLE&&
this._idleUpdatesStartFired&&T.idleBegin();const C=this;return{remove:()=>this._removeIdleStateCallbacks(T),set idleBegin(F){C._idleUpdatesStartFired&&(T.idleEnd(),C._state===x.RenderState.IDLE&&F());T.idleBegin=F},set idleEnd(F){T.idleEnd=F}}}get load(){return this._load}set state(K){this._state!==K&&(this._state=K,this.state!==x.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(P=>P.idleEnd())))}get state(){return this._state}updateBudget(K){this._test&&
(this._test.usedBudget=0);++this._frameNumber;let P=v,T=K.frameDuration,C=z;switch(this.state){case x.RenderState.IDLE:P=c.Milliseconds(0);T=c.Milliseconds(Math.max(w,K.frameDuration));C=y;break;case x.RenderState.INTERACTING:T=c.Milliseconds(Math.max(t,K.frameDuration))}T=c.Milliseconds(T-K.elapsedFrameTime-P);if(this.state!==x.RenderState.IDLE&&T<z&&!this._forceTask)return this._forceTask=!0,!1;T=c.Milliseconds(Math.max(T,C));this._budget.reset(T,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=
this._forceTask=!1;switch(this.state){case x.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(K=>K.idleBegin()));this._runIdle();break;case x.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(c.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(K){this._idleUpdatesStartFired&&K.idleEnd();
this._idleStateCallbacks.removeUnordered(K)}removeTask(K){this._tasks.removeUnordered(K);this._runQueue.removeUnordered(K);this._updatingChanged()}_updateTask(K){this._tasks.forAll(P=>{P.name===K&&P.setPriority(K)})}_getState(K){if(this._runQueue.some(T=>T.name===K))return b.TaskState.SCHEDULED;let P=b.TaskState.IDLE;this._tasks.forAll(T=>{T.name===K&&T.needsUpdate&&(1>=T.schedulePriority?P=b.TaskState.READY:P!==b.TaskState.READY&&(P=b.TaskState.WAITING))});return P}_getRuntime(K){let P=0;this._tasks.forAll(T=>
{T.name===K&&(P+=T.runtime)});return P}_resetRuntimes(){this._tasks.forAll(K=>K.runtime=0)}_getRunning(){const K=new Map;this._tasks.forAll(T=>{T.needsUpdate&&K.set(T.name,(K.get(T.name)||0)+1)});if(0===K.size)return null;let P="";K.forEach((T,C)=>{P=1<T?P+` ${T}x ${C}`:P+` ${C}`});return P}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const K=this._tasks.reduce((P,T)=>T.needsUpdate?++P:P,0);this._load=.9*this._load+K*(1-.9)}_schedule(){this._runQueue.filterInPlace(K=>
{if(K.needsUpdate)return!0;K.schedulePriority=K.basePriority;return!1});for(this._tasks.forAll(K=>{0===K.basePriority&&K.needsUpdate&&!this._runQueue.includes(K)&&K.blockFrame!==this._frameNumber&&this._runQueue.unshift(K)});0===this._runQueue.length;){let K=!1;this._tasks.forAll(P=>{if(P.needsUpdate&&0!==P.schedulePriority&&0!==P.basePriority&&P.blockFrame!==this._frameNumber)switch(K=!0,P.schedulePriority){case 1:P.schedulePriority=0;this._runQueue.push(P);break;default:--P.schedulePriority}});
if(!K)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const K=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var P=this._budget.now();const T=this._runQueue.pop();this._budget.resetProgress();try{T.task.runTask(this._budget)===q.Yield&&(T.blockFrame=this._frameNumber)}catch(C){d.getLogger("esri.views.support.Scheduler").error(`Exception in task "${T.name}"`,C),T.blockFrame=this._frameNumber}!this._budget.hasProgressed&&T.blockFrame!==this._frameNumber&&
T.needsUpdate&&(T.blockFrame=this._frameNumber);T.schedulePriority=T.basePriority;P=this._budget.now()-P;T.runtime+=P;this._frameTaskTimes.set(T.priority,this._frameTaskTimes.get(T.priority)+P);if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-K);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-K)}_startFrameTaskTimes(){for(const K of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[K],
0)}_recordFrameTaskTimes(K){this._frameTaskTimes.forEach((P,T)=>this.performanceInfo.tasks.get(T).push(P));this.performanceInfo.total.push(K)}get test(){return this._test}}I.Scheduler=O;class U{get task(){return this._task.value}get updating(){return this._queue.running}constructor(K,P,T){this._scheduler=K;this.name=P;this.runtime=this.blockFrame=0;this._queue=new m.PromiseQueue;this._handles=new a;this.schedulePriority=this._basePriority=k(P);this._task=e.signal(null!=T?T:this._queue);this._handles.add(n.when(()=>
this.task.running,C=>K.taskRunningChanged(C)))}remove(){this.processQueue(A);this._scheduler.removeTask(this);this.schedule=E.schedule;this.reschedule=E.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(K){if(this.name!==K){this.name=K;K=k(K);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=K;this._basePriority=K}}get priority(){return this.name}set priority(K){this.setPriority(K)}get needsUpdate(){return this.updating||this.task.running}schedule(K,
P,T){return this._queue.push(K,P,T)}reschedule(K,P,T){return this._queue.unshift(K,P,T)}processQueue(K){return this._queue.runTask(K)}}class W{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=x.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(K){if(this.done)return!1;!0===K()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=
this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(K){this._enabled=K}reset(K,P){this._begin=this.now();this._budget=K;this._state=P;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}I.Budget=W})(B||={});b.TaskState=void 0;(function(I){I.SCHEDULED=
"s";I.READY="r";I.WAITING="w";I.IDLE="i"})(b.TaskState||(b.TaskState={}));const A=(()=>{const I=new B.Budget;I.enabled=!1;return I})();class D{remove(){}processQueue(){}schedule(I,O,U){try{if(p.isAborted(O)){const W=p.createAbortError();return U?Promise.resolve(U(W)):Promise.reject(W)}return p.when(I(A))}catch(W){return Promise.reject(W)}}reschedule(I,O,U){return this.schedule(I,O,U)}}const E=new D;b.ImmediateTask=E;b.getTaskPriority=k;b.newScheduler=function(){return new B.Scheduler};b.noBudget=
A;b.taskPriorities=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(b,a,f,d){class r{constructor(){this._tasks=[];this._runningTasks=f.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(g){if(0===this.length)return d.Yield;for(;!g.done&&this._process(g);)g.madeProgress()}push(g,
p,n){++this._runningTasks.value;return(new Promise((e,c)=>this._tasks.push(new h(e,c,g,p,n)))).finally(()=>--this._runningTasks.value)}unshift(g,p,n){++this._runningTasks.value;return(new Promise((e,c)=>this._tasks.unshift(new h(e,c,g,p,n)))).finally(()=>--this._runningTasks.value)}_process(g){if(0===this._tasks.length)return!1;const p=this._tasks.shift();try{const n=a.isAborted(p.signal);if(n&&!p.abortCallback)p.reject(a.createAbortError());else{const e=n?p.abortCallback?.(a.createAbortError()):
p.callback(g);a.isPromiseLike(e)?e.then(p.resolve,p.reject):p.resolve(e)}}catch(n){p.reject(n)}return!0}cancelAll(){const g=a.createAbortError();for(const p of this._tasks)if(p.abortCallback){const n=p.abortCallback(g);p.resolve(n)}else p.reject(g);this._tasks.length=0}}class h{constructor(g,p,n,e,c){this.resolve=g;this.reject=p;this.callback=n;this.signal=e;this.abortCallback=c}}b.PromiseQueue=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],
function(b){const a=Symbol("Yield");b.Yield=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,f,d,r,h,g){a=class extends a{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=
!1}};b.__decorate([f.property()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([f.property()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);a=b.__decorate([g.subclass("esri.views.support.debugFlags")],a);return new a})},"esri/views/2d/GoToManager":function(){define("exports ../../chunks/tslib.es6 ../../core/a11yUtils ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./viewpointUtils".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x){b.GoToManager=class extends d{constructor(q){super(q);this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(q,k){if(q){var u=new l;this.view.animation=u;await p.whenOnce(()=>this.view.ready,k);var v={...k,animate:k?.animate??!f.prefersReducedMotion(),animationMode:k?.animationMode??"auto"},{extent:z,spatialReference:y,size:t,viewpoint:w,constraints:B,padding:A,allLayerViews:D}=this.view;q=x.create(q,{extent:z,spatialReference:y,size:t,viewpoint:w,constraints:B,
padding:A,allLayerViews:D,pickClosestTarget:k?.pickClosestTarget??!0});u?.update(q);this._gotoTask={};return v.animate?this._gotoAnimated(q,v):this._gotoImmediate(q,v)}h.getLogger(this).error("#goTo()","target cannot be null or undefined")}_gotoImmediate(q,k){const u=this._gotoTask,v=this.view.animation;q=q.then(z=>{g.throwIfAborted(k);if(u!==this._gotoTask)throw new r("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=v.target=z;v.finish()});return this._cancellableGoTo(u,v,q,k)}_gotoAnimated(q,
k){const u=this._gotoTask,v=this.view.animation;if(!v)return Promise.resolve();q=q.then(z=>{g.throwIfAborted(k);if(u!==this._gotoTask)throw new r("view:goto-interrupted","Goto was interrupted");v.update(z);this.view.animationManager.animate(v,this.view.viewpoint,k);return v.when().then(()=>{},()=>{})});return this._cancellableGoTo(u,v,q,k)}_cancellableGoTo(q,k,u,v){const z=()=>q===this._gotoTask;return g.whenOrAbort(u,v).finally(()=>{z()&&(k.done||k.stop())})}};a.__decorate([n.property({constructOnly:!0})],
b.GoToManager.prototype,"view",void 0);b.GoToManager=a.__decorate([m.subclass("esri.views.2d.GoToManager")],b.GoToManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error"],function(b,a,f){function d(){return Promise.all([new Promise((n,e)=>b(["./webglDeps"],n,e)),new Promise((n,e)=>b(["./mapViewDeps"],n,e))])}const r=n=>Object.freeze(Object.defineProperty({__proto__:null,default:n},
Symbol.toStringTag,{value:"Module"})),h=()=>d().then(()=>new Promise((n,e)=>b(["./layers/TileLayerView2D"],c=>n(r(c)),e))),g=()=>d().then(()=>new Promise((n,e)=>b(["./layers/FeatureLayerView2D"],c=>n(r(c)),e))),p={"base-dynamic":()=>d().then(()=>new Promise((n,e)=>b(["./layers/BaseDynamicLayerView2D"],c=>n(r(c)),e))),"base-tile":h,"bing-maps":h,catalog:()=>d().then(()=>new Promise((n,e)=>b(["./layers/CatalogLayerView2D"],c=>n(r(c)),e))),"catalog-dynamic-group":()=>d().then(()=>new Promise((n,e)=>
b(["./layers/CatalogDynamicGroupLayerView2D"],c=>n(r(c)),e))),"catalog-footprint":()=>d().then(()=>new Promise((n,e)=>b(["./layers/CatalogFootprintLayerView2D"],c=>n(r(c)),e))),csv:g,"geo-rss":()=>d().then(()=>new Promise((n,e)=>b(["./layers/GeoRSSLayerView2D"],c=>n(r(c)),e))),feature:g,geojson:g,parquet:g,graphics:()=>d().then(()=>new Promise((n,e)=>b(["./layers/GraphicsLayerView2D"],c=>n(r(c)),e))),group:()=>d().then(()=>new Promise((n,e)=>b(["./layers/GroupLayerView2D"],c=>n(r(c)),e))),imagery:()=>
d().then(()=>new Promise((n,e)=>b(["./layers/ImageryLayerView2D"],c=>n(r(c)),e))),"imagery-tile":()=>d().then(()=>new Promise((n,e)=>b(["./layers/ImageryTileLayerView2D"],c=>n(r(c)),e))),kml:()=>d().then(()=>new Promise((n,e)=>b(["./layers/KMLLayerView2D"],c=>n(r(c)),e))),"knowledge-graph":()=>d().then(()=>new Promise((n,e)=>b(["./layers/KnowledgeGraphLayerView2D"],c=>n(r(c)),e))),"link-chart":()=>d().then(()=>new Promise((n,e)=>b(["./layers/KnowledgeGraphLayerView2D"],c=>n(r(c)),e))),"knowledge-graph-sublayer":g,
"map-image":()=>d().then(()=>new Promise((n,e)=>b(["./layers/MapImageLayerView2D"],c=>n(r(c)),e))),"map-notes":()=>d().then(()=>new Promise((n,e)=>b(["./layers/MapNotesLayerView2D"],c=>n(r(c)),e))),media:()=>d().then(()=>new Promise((n,e)=>b(["./layers/MediaLayerView2D"],c=>n(r(c)),e))),"ogc-feature":()=>d().then(()=>new Promise((n,e)=>b(["./layers/OGCFeatureLayerView2D"],c=>n(r(c)),e))),"open-street-map":h,"oriented-imagery":g,route:()=>d().then(()=>new Promise((n,e)=>b(["./layers/RouteLayerView2D"],
c=>n(r(c)),e))),stream:()=>d().then(()=>new Promise((n,e)=>b(["./layers/StreamLayerView2D"],c=>n(r(c)),e))),"subtype-group":()=>d().then(()=>new Promise((n,e)=>b(["./layers/SubtypeGroupLayerView2D"],c=>n(r(c)),e))),tile:h,"vector-tile":()=>d().then(()=>new Promise((n,e)=>b(["./layers/VectorTileLayerView2D"],c=>n(r(c)),e))),video:()=>d().then(()=>new Promise((n,e)=>b(["./layers/VideoLayerView2D"],c=>n(r(c)),e))),wcs:()=>d().then(()=>new Promise((n,e)=>b(["./layers/ImageryTileLayerView2D"],c=>n(r(c)),
e))),"web-tile":h,wfs:g,wms:()=>d().then(()=>new Promise((n,e)=>b(["./layers/WMSLayerView2D"],c=>n(r(c)),e))),wmts:()=>d().then(()=>new Promise((n,e)=>b(["./layers/WMTSLayerView2D"],c=>n(r(c)),e))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};a.layerView2DImporter={hasLayerViewModule:n=>null!=p[n.type],
importLayerView:n=>{var e=p[n.type];if(null==e)throw n=n.declaredClass?n.declaredClass.slice(n.declaredClass.lastIndexOf(".")+1):"Unknown",e=n.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new f(`${e}:view-not-supported`,`${n} is not supported in 2D`);return e(n)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q){a={base:null,key:"type",typeMap:{extent:x,polygon:q}};f=class extends f{constructor(k){super(k);this.lods=null;this.maxScale=this.minScale=0;this.maxZoom=this.minZoom=-1;this.snapToZoom=this.rotationEnabled=!0;this.customConstraints=new d}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(k){k?
this._set("geometry",k):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const k=this._get("_geometry");return k&&this.geometry===k.geometry&&this.view?.constraintsInfo.spatialReference===k.spatialReference?k:new c.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new m({rotationEnabled:this.rotationEnabled})}get _zoom(){const k=this._get("_zoom"),
u=this.lods||this.view?.constraintsInfo.lods,v=this.minZoom,z=this.maxZoom,y=this.minScale,t=this.maxScale,w=this.snapToZoom;return k&&k.lods===u&&k.minZoom===v&&k.maxZoom===z&&k.minScale===y&&k.maxScale===t&&k.snapToZoom===w?k:new l({lods:u,minZoom:v,maxZoom:z,minScale:y,maxScale:t,snapToZoom:w})}canZoomInTo(k){const u=this.effectiveMaxScale;return 0===u||k>=u}canZoomOutTo(k){const u=this.effectiveMinScale;return 0===u||k<=u}constrain(k,u){this._zoom.constrain(k,u);this._rotation.constrain(k,u);
this._geometry.constrain(k,u);this.customConstraints.forEach(v=>v.constrain(k,u));return k}constrainByGeometry(k){this._geometry.constrain(k);this.customConstraints.forEach(u=>u.applyPanConstraint?.(k));return k}fit(k){return this._zoom.fit(k)}zoomToScale(k){return this._zoom.zoomToScale(k)}scaleToZoom(k){return this._zoom.scaleToZoom(k)}snapScale(k){return this._zoom.snapToClosestScale(k)}snapToNextScale(k){return this._zoom.snapToNextScale(k)}snapToPreviousScale(k){return this._zoom.snapToPreviousScale(k)}};
b.__decorate([r.property({readOnly:!0})],f.prototype,"effectiveLODs",null);b.__decorate([r.property({readOnly:!0})],f.prototype,"effectiveMinScale",null);b.__decorate([r.property({readOnly:!0})],f.prototype,"effectiveMaxScale",null);b.__decorate([r.property({readOnly:!0})],f.prototype,"effectiveMinZoom",null);b.__decorate([r.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",null);b.__decorate([r.property({types:a,value:null})],f.prototype,"geometry",null);b.__decorate([r.property({type:[e]})],
f.prototype,"lods",void 0);b.__decorate([r.property()],f.prototype,"minScale",void 0);b.__decorate([r.property()],f.prototype,"maxScale",void 0);b.__decorate([r.property()],f.prototype,"minZoom",void 0);b.__decorate([r.property()],f.prototype,"maxZoom",void 0);b.__decorate([r.property()],f.prototype,"rotationEnabled",void 0);b.__decorate([r.property()],f.prototype,"snapToZoom",void 0);b.__decorate([r.property({type:d})],f.prototype,"customConstraints",void 0);b.__decorate([r.property()],f.prototype,
"view",void 0);b.__decorate([r.property({readOnly:!0})],f.prototype,"version",null);b.__decorate([r.property({type:c.GeometryConstraint,readOnly:!0})],f.prototype,"_geometry",null);b.__decorate([r.property({type:m})],f.prototype,"_rotation",null);b.__decorate([r.property({readOnly:!0,type:l})],f.prototype,"_zoom",null);return f=b.__decorate([n.subclass("esri.views.2d.MapViewConstraints")],f)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m){var l;b.GeometryConstraint=l=class extends d.NumericIdentifiableMixin(f){constructor(x){super(x);this.spatialReference=this.geometry=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return e.project(this.geometry,this.spatialReference)}catch(x){return r.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:x}),null}return this.geometry}constrain(x,q){if(null==this.normalizedGeometry)return x;q=x.targetGeometry;if("extent"===this.normalizedGeometry.type?c.extentContainsPoint(this.normalizedGeometry,q):c.polygonContainsPoint(this.normalizedGeometry,q))return x;({coordinate:q}=m.nearestCoordinate(this.normalizedGeometry,q));if(!q)return x;x.targetGeometry=q;return x}clone(){return new l({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};
a.__decorate([h.property({constructOnly:!0})],b.GeometryConstraint.prototype,"geometry",void 0);a.__decorate([h.property({readOnly:!0})],b.GeometryConstraint.prototype,"normalizedGeometry",null);a.__decorate([h.property({constructOnly:!0})],b.GeometryConstraint.prototype,"spatialReference",void 0);b.GeometryConstraint=l=a.__decorate([n.subclass("esri.views.2d.constraints.GeometryConstraint")],b.GeometryConstraint);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports",
"../../geometry","../../core/libs/gl-matrix-2/math/vec2","./coordsUtils","../Point"],function(b,a,f,d,r){b.nearestCoordinate=function(h,g){const {spatialReference:p}=g;g=[g.x,g.y];let n=Number.POSITIVE_INFINITY,e=0,c=0;const m=[0,0];h="extent"===h.type?[[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]]]:h.rings;for(const l of h)for(h=0;h<l.length-1;h++){d.projectPointOnLine(m,g,l,h);const x=f.distance(g,m);x<n&&(n=x,e=m[0],c=m[1])}return{coordinate:new r({x:e,y:c,spatialReference:p}),
distance:n}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,f,d,r,h,g,p){var n;a=n=class extends f.NumericIdentifiableMixin(a){constructor(){super(...arguments);
this.rotationEnabled=this.enabled=!0}constrain(e,c){if(!this.enabled||!c)return e;this.rotationEnabled||(e.rotation=c.rotation);return e}clone(){return new n({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};b.__decorate([d.property()],a.prototype,"enabled",void 0);b.__decorate([d.property()],a.prototype,"rotationEnabled",void 0);return a=n=b.__decorate([p.subclass("esri.views.2d.constraints.RotationConstraint")],a)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,f,d,r,h,g,p){var n;a=n=class extends f.NumericIdentifiableMixin(a){constructor(e){super(e);this._lodByScale={};this._scales=[];this.effectiveLODs=null;this.effectiveMaxZoom=this.effectiveMinZoom=-1;this.effectiveMaxScale=this.effectiveMinScale=0;this.lods=null;this.maxZoom=this.minZoom=-1;this.maxScale=this.minScale=0;this.snapToZoom=!0}initialize(){let {lods:e,minScale:c,maxScale:m,minZoom:l,maxZoom:x}=this,q=-1,k=-1,u=!1,v=!1;0!==c&&0!==m&&c<m&&([c,m]=[m,c]);if(e?.length){e=e.map(y=>
y.clone());e.sort((y,t)=>t.scale-y.scale);e.forEach((y,t)=>y.level=t);for(const y of e){!u&&0<c&&c>=y.scale&&(q=y.level,u=!0);!v&&0<m&&m>=y.scale&&(k=z?z.level:-1,v=!0);var z=y}-1===l&&(l=0===c?0:q);-1===x&&(x=0===m?e.length-1:k);l=Math.max(l,0);l=Math.min(l,e.length-1);x=Math.max(x,0);x=Math.min(x,e.length-1);l>x&&([l,x]=[x,l]);c=e[l].scale;m=e[x].scale;e.splice(0,l);e.splice(x-l+1,e.length);e.forEach((y,t)=>{this._lodByScale[y.scale]=y;this._scales[t]=y.scale});this._set("effectiveLODs",e);this._set("effectiveMinZoom",
l);this._set("effectiveMaxZoom",x)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",m)}constrain(e,c){if(c&&e.scale===c.scale)return e;var m=this.effectiveMinScale;const l=this.effectiveMaxScale,x=e.targetGeometry,q=c&&c.targetGeometry,k=0!==m&&e.scale>m;if(0!==l&&e.scale<l||k)m=k?m:l,c&&q&&(c=(m-c.scale)/(e.scale-c.scale),x.x=q.x+(x.x-q.x)*c,x.y=q.y+(x.y-q.y)*c),e.scale=m;this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale));return e}fit(e){if(!this.effectiveLODs||
!this.snapToZoom)return this.constrain(e,null);const c=this.scaleToZoom(e.scale);e.scale=this.zoomToScale(.99<Math.abs(c-Math.floor(c))?Math.round(c):Math.floor(c));return e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom;e=Math.max(0,e);const c=this._scales;if(0>=e)return c[0];if(e>=c.length)return c[c.length-1];const m=Math.floor(e);return c[m]+(e-m)*(c[Math.ceil(e)]-c[m])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const c=this._scales;let m,l;if(e>=c[0])return this.effectiveMinZoom;
if(e<=c[c.length-1])return this.effectiveMaxZoom;for(let x=0;x<c.length-1;x++){m=c[x];l=c[x+1];if(l===e)return x+this.effectiveMinZoom+1;if(m>e&&l<e)return x+this.effectiveMinZoom+1-(e-l)/(m-l)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;e=this.scaleToZoom(e);return this.zoomToScale(Math.round(e))}snapToNextScale(e,c=.5){if(!this.effectiveLODs)return e*c;e=Math.round(this.scaleToZoom(e));return this.zoomToScale(e+1)}snapToPreviousScale(e,c=2){if(!this.effectiveLODs)return e*c;e=
Math.round(this.scaleToZoom(e));return this.zoomToScale(e-1)}clone(){return new n({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){if(this._lodByScale[e])return this._lodByScale[e].scale;e=this._scales.reduce((c,m)=>Math.abs(m-e)<=Math.abs(c-e)?m:c,this._scales[0]);return this._lodByScale[e].scale}};b.__decorate([d.property({readOnly:!0})],a.prototype,"effectiveLODs",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,
"effectiveMinZoom",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,"effectiveMaxZoom",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,"effectiveMinScale",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,"effectiveMaxScale",void 0);b.__decorate([d.property()],a.prototype,"lods",void 0);b.__decorate([d.property()],a.prototype,"minZoom",void 0);b.__decorate([d.property()],a.prototype,"maxZoom",void 0);b.__decorate([d.property()],a.prototype,"minScale",void 0);b.__decorate([d.property()],
a.prototype,"maxScale",void 0);b.__decorate([d.property()],a.prototype,"snapToZoom",void 0);return a=n=b.__decorate([p.subclass("esri.views.2d.constraints.ZoomConstraint")],a)})},"esri/views/2d/tiling/TileInfoView":function(){define(["../../../geometry/support/spatialReferenceUtils","./LODInfo","./TileCoverage","./TileKey","./TileSpan"],function(b,a,f,d,r){const h=new d("0/0/0/0");class g{static create(e,c){e[1]>c[1]&&([e,c]=[c,e]);const [m,l]=e,[x,q]=c;e=x-m;c=q-l;c=0!==c?e/c:0;const k=(Math.ceil(l)-
l)*c,u=(Math.floor(l)-l)*c;return new g(m,Math.floor(l),Math.ceil(q),c,0>e?k:u,0>e?u:k,0>e?x:m,0>e?m:x)}constructor(e,c,m,l,x,q,k,u){this.x=e;this.ymin=c;this.ymax=m;this.invM=l;this.leftAdjust=x;this.rightAdjust=q;this.leftBound=k;this.rightBound=u}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const p=[[0,0],[0,0],[0,0],[0,0]];class n{constructor(e,c=null,m=e.lods[0].level,l=
e.lods[e.lods.length-1].level){this.tileInfo=e;this.fullExtent=c;this.scales=[];this._infoByScale={};this._infoByLevel={};const x=e.lods.filter(k=>k.level>=m&&k.level<=l);this.minScale=x[0].scale;this.maxScale=x[x.length-1].scale;const q=this._lodInfos=x.map(k=>a.create(e,k,c));x.forEach((k,u)=>{this._infoByLevel[k.level]=q[u];this._infoByScale[k.scale]=q[u];this.scales[u]=k.scale},this);this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"===
typeof e?e:e.level]}getTileBounds(e,c,m=!1){h.set(c);return(c=this._infoByLevel[h.level])?c.getTileBounds(e,h,m):e}getTileCoords(e,c,m=!1){h.set(c);return(c=this._infoByLevel[h.level])?c.getTileCoords(e,h,m):e}getTileCoverage(e,c=192,m=!0,l="closest"){if(!m&&(e.scale>this.minScale||e.scale<this.maxScale))return null;m="closest"===l?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale);l=f.pool.acquire(m);const x=this._wrap;var q=Infinity;let k=-Infinity;const u=l.spans;p[0][0]=
p[0][1]=p[1][1]=p[3][0]=-c;p[1][0]=p[2][0]=e.size[0]+c;p[2][1]=p[3][1]=e.size[1]+c;for(v of p)e.toMap(v,v),v[0]=m.getColumnForX(v[0]),v[1]=m.getRowForY(v[1]);e=[];var v=3;for(c=0;4>c;c++)p[c][1]===p[v][1]?v=c:(v=g.create(p[c],p[v]),q=Math.min(v.ymin,q),k=Math.max(v.ymax,k),void 0===e[v.ymin]&&(e[v.ymin]=[]),e[v.ymin].push(v),v=c);if(null==q||null==k||100<k-q)return null;for(c=[];q<k;){null!=e[q]&&(c=c.concat(e[q]));v=Infinity;var z=-Infinity;for(var y=c.length-1;0<=y;y--){var t=c[y];v=Math.min(v,
t.getLeftCol());z=Math.max(z,t.getRightCol())}v=Math.floor(v);z=Math.floor(z);if(q>=m.first[1]&&q<=m.last[1])if(x)if(m.size[0]<m.worldSize[0])for(y=Math.floor(z/m.worldSize[0]),t=Math.floor(v/m.worldSize[0]);t<=y;t++)u.push(new r(q,Math.max(m.getFirstColumnForWorld(t),v),Math.min(m.getLastColumnForWorld(t),z)));else u.push(new r(q,v,z));else v>m.last[0]||z<m.first[0]||(v=Math.max(v,m.first[0]),z=Math.min(z,m.last[0]),u.push(new r(q,v,z)));q+=1;for(v=c.length-1;0<=v;v--)z=c[v],z.ymax>=q?z.incrRow():
c.splice(v,1)}return l}getTileParentId(e){h.set(e);e=this._lodInfos.indexOf(this._infoByLevel[h.level])-1;if(0>e)return null;this._getTileIdAtLOD(h,this._lodInfos[e],h);return h.id}getTileResolution(e){return(e=this._infoByLevel["object"===typeof e?e.level:e])?e.resolution:-1}getTileScale(e){return(e=this._infoByLevel[e.level])?e.scale:-1}intersects(e,c){h.set(c);c=this._infoByLevel[h.level];const m=e.lodInfo;if(m.resolution>c.resolution){this._getTileIdAtLOD(h,m,h);var l=m.denormalizeCol(h.col,h.world);
for(var x of e.spans)if(x.row===h.row&&x.colFrom<=l&&x.colTo>=l)return!0}if(m.resolution<c.resolution){const [k,u,v,z]=e.spans.reduce((y,t)=>{y[0]=Math.min(y[0],t.row);y[1]=Math.max(y[1],t.row);y[2]=Math.min(y[2],t.colFrom);y[3]=Math.max(y[3],t.colTo);return y},[Infinity,-Infinity,Infinity,-Infinity]);l=c.denormalizeCol(h.col,h.world);e=m.getColumnForX(c.getXForColumn(l));x=m.getRowForY(c.getYForRow(h.row));l=m.getColumnForX(c.getXForColumn(l+1))-1;c=m.getRowForY(c.getYForRow(h.row+1))-1;return!(e>
z||l<v||x>u||c<k)}const q=m.denormalizeCol(h.col,h.world);return e.spans.some(k=>k.row===h.row&&k.colFrom<=q&&k.colTo>=q)}normalizeBounds(e,c,m){e[0]=c[0];e[1]=c[1];e[2]=c[2];e[3]=c[3];this._wrap&&(c=b.getInfo(this.tileInfo.spatialReference),m=-m*(c.valid[1]-c.valid[0]),e[0]+=m,e[2]+=m);return e}getSmallestInfoForScale(e){const c=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>c[0])return this._infoByScale[c[0]];for(let m=1;m<c.length-1;m++)if(e>c[m]+1E-6)return this._infoByScale[c[m-
1]];return this._infoByScale[c[c.length-1]]}getClosestInfoForScale(e){const c=this.scales;if(this._infoByScale[e])return this._infoByScale[e];e=c.reduce((m,l)=>Math.abs(l-e)<Math.abs(m-e)?l:m,c[0]);return this._infoByScale[e]}scaleToLevel(e){const c=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let m=c.length-1;0<=m;m--)if(e<c[m])return m===c.length-1?this._infoByScale[c[c.length-1]].level:this._infoByScale[c[m]].level+(c[m]-e)/(c[m]-c[m+1]);return this._infoByScale[c[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,
c,m){const l=this._infoByLevel[m.level];e.set(m);if(c.resolution<l.resolution)return null;if(c.resolution===l.resolution)return e;e.level=c.level;e.col=Math.floor(m.col*l.resolution/c.resolution+.01);e.row=Math.floor(m.row*l.resolution/c.resolution+.01);return e}}return n})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(b,a){function f(h,g,p){h[0]=g;h[1]=p;return h}const d=new a("0/0/0/0");class r{static create(h,g,p=null){const n=
b.getInfo(h.spatialReference),e=g.origin||[h.origin.x,h.origin.y],c=[h.size[0]*g.resolution,h.size[1]*g.resolution],m=[-Infinity,-Infinity],l=[Infinity,Infinity],x=[Infinity,Infinity];null!=p&&(f(m,Math.max(0,Math.floor((p.xmin-e[0])/c[0])),Math.max(0,Math.floor((e[1]-p.ymax)/c[1]))),f(l,Math.max(0,Math.floor((p.xmax-e[0])/c[0])),Math.max(0,Math.floor((e[1]-p.ymin)/c[1]))),f(x,l[0]-m[0]+1,l[1]-m[1]+1));const {cols:q,rows:k}=g;!p&&q&&k&&(f(m,q[0],k[0]),f(l,q[1],k[1]),f(x,q[1]-q[0]+1,k[1]-k[0]+1));
let u,v;h.isWrappable?(h=[Math.ceil(Math.round((n.valid[1]-n.valid[0])/g.resolution)/h.size[0]),x[1]],p=!0,u=n.origin,v=n.valid):(h=x,p=!1);return new r(g.level,g.resolution,g.scale,e,m,l,x,c,h,p,u,v)}constructor(h,g,p,n,e,c,m,l,x,q,k,u){this.level=h;this.resolution=g;this.scale=p;this.origin=n;this.first=e;this.last=c;this.size=m;this.norm=l;this.worldSize=x;this.wrap=q;this._spatialReferenceOrigin=k;this._spatialReferenceValid=u}normalizeCol(h){if(!this.wrap)return h;const g=this.worldSize[0];return 0>
h?g-1-Math.abs((h+1)%g):h%g}normalizeKey(h){if(this.wrap){var g=this.worldSize[0],p=h.col;0>p?(h.col=p+g,--h.world):p>=g&&(h.col=p-g,h.world+=1)}}denormalizeCol(h,g){return this.wrap?this.worldSize[0]*g+h:h}getWorldForColumn(h){return this.wrap?Math.floor(h/this.worldSize[0]):0}getFirstColumnForWorld(h){return h*this.worldSize[0]+this.first[0]}getLastColumnForWorld(h){return h*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(h){return(h-this.origin[0])/this.norm[0]}getXForColumn(h){const g=
this.origin[0]+h*this.norm[0],p=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&p&&n?g===p[0]?n[0]:this.origin[0]===p[0]&&h===this.worldSize[0]?n[1]:g:g}getRowForY(h){return(this.origin[1]-h)/this.norm[1]}getYForRow(h){return this.origin[1]-h*this.norm[1]}getTileBounds(h,g,p=!1){d.set(g);var n=p?d.col:this.denormalizeCol(d.col,d.world),e=d.row;g=this.getXForColumn(n);p=this.getYForRow(e+1);n=this.getXForColumn(n+1);e=this.getYForRow(e);h[0]=g;h[1]=p;h[2]=n;h[3]=e;return h}getTileCoords(h,
g,p=!1){d.set(g);g=p?d.col:this.denormalizeCol(d.col,d.world);Array.isArray(h)?f(h,this.getXForColumn(g),this.getYForRow(d.row)):(h.x=this.getXForColumn(g),h.y=this.getYForRow(d.row));return h}}return r})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],function(b){class a{static getId(f,d,r,h){return"object"===typeof f?`${f.level}/${f.row}/${f.col}/${f.world}`:`${f}/${d}/${r}/${h}`}constructor(f,d,r,h){this.set(f,d,r,h)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(f){this.set(f)}get hash(){return(this.world&
3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}acquire(f,d,r,h){this.set(f,d,r,h)}contains(f){const d=f.level-this.level;return 0<=d&&this.row===f.row>>d&&this.col===f.col>>d&&this.world===f.world}containsChild(f){const d=f.level-this.level;return 0<d&&this.row===f.row>>d&&this.col===f.col>>d&&this.world===f.world}equals(f){return this.level===f.level&&this.row===f.row&&this.col===f.col&&this.world===f.world}clone(){return new a(this)}release(){this.world=this.col=this.row=this.level=
0}set(f,d,r,h){if(null==f)this.world=this.col=this.row=this.level=0;else if("object"===typeof f)this.level=f.level||0,this.row=f.row||0,this.col=f.col||0,this.world=f.world||0;else if("string"===typeof f){const [g,p,n,e]=f.split("/");this.level=parseFloat(g);this.row=parseFloat(p);this.col=parseFloat(n);this.world=parseFloat(e)}else this.level=+f,this.row=+d,this.col=+r,this.world=+h||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?
null:new a(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(f,d,r){const h=this.clone();h.col+=f;h.row+=d;r.normalizeKey(h);return h}getChildKeys(){const f=this.level+1,d=this.row<<1,r=this.col<<1,h=this.world;return[new a(f,d,r,h),new a(f,d,r+1,h),new a(f,d+1,r,h),new a(f,d+1,r+1,h)]}compareRowMajor(f){return this.row<f.row?-1:this.row>f.row?1:this.col<f.col?-1:this.col>f.col?1:0}}a.pool=new b(a,null,null,25,50);return a})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool",
"./TileKey"],function(b,a){class f{constructor(){this.spans=[]}acquire(d){this.lodInfo=d}release(){this.lodInfo=null;this.spans.length=0}*keys(){const d=this.lodInfo;for(const {row:r,colFrom:h,colTo:g}of this.spans)for(let p=h;p<=g;p++){const n=d.getWorldForColumn(p);yield new a(d.level,r,d.normalizeCol(p),n)}}forEach(d,r){const {spans:h,lodInfo:g}=this,{level:p}=g;if(0!==h.length)for(const {row:n,colFrom:e,colTo:c}of h)for(let m=e;m<=c;m++)d.call(r,p,n,g.normalizeCol(m),g.getWorldForColumn(m))}}
f.pool=new b(f);return f})},"esri/views/2d/tiling/TileSpan":function(){define(function(){class b{constructor(a,f,d){this.row=a;this.colFrom=f;this.colTo=d}}return b})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/MapUtils ../../../core/maybe ../../../core/SetUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/math/vec2 ../../support/QueueProcessor".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m){const l=[0,0];a=class extends a{constructor(x){super(x);this._keyToItem=new Map;this._tilesByScale=new Map;this.concurrency=6}initialize(){const {concurrency:x,process:q,scheduler:k,priority:u}=this;this._queue=new m.QueueProcessor({concurrency:x,scheduler:k,priority:u,process:(v,z)=>{v=this._keyToItem.get(v);return q(v,{signal:z})},peeker:v=>this._peek(v)})}destroy(){this.clear();this._queue=d.destroyMaybe(this._queue)}get length(){return this._queue?this._queue.length:
0}abort(x){this._queue.abort("string"===typeof x?x:x.id)}clear(){this._queue.clear();this._keyToItem.clear();this._tilesByScale.clear()}has(x){return"string"===typeof x?this._keyToItem.has(x):this._keyToItem.has(x.id)}pause(){this._queue.pause()}push(x){const q=x.key.id;if(this._queue.has(q))return this._queue.get(q);const k=this._queue.push(q),u=this.tileInfoView.getTileScale(x.key),v=f.getOrCreateMapValue(this._tilesByScale,u,()=>new Set),z=()=>{v.delete(x.key);0===v.size&&this._tilesByScale.delete(u);
this._keyToItem.delete(q)};v.add(x.key);this._keyToItem.set(q,x);k.then(z,z);return k}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(x){if(!this.state)return x.values().next().value;const q=new Set;for(var k of x)q.add(this._keyToItem.get(k).key);k=this.state.scale;let u=Number.POSITIVE_INFINITY,v;for(const [z,y]of this._tilesByScale)if(r.someSet(y,t=>q.has(t))){const t=Math.abs(z-k);t<u&&(v=y,u=t)}return this._getClosestTileKey(v,x).id}_getClosestTileKey(x,q){const k=this.tileInfoView,
u=this.state.center;let v=Number.POSITIVE_INFINITY,z;for(const y of x)q.has(y.id)&&(k.getTileCoords(l,y),x=c.distance(l,u),x<v&&(v=x,z=y));return z}};b.__decorate([h.property({constructOnly:!0})],a.prototype,"concurrency",void 0);b.__decorate([h.property({constructOnly:!0})],a.prototype,"priority",void 0);b.__decorate([h.property({constructOnly:!0})],a.prototype,"process",void 0);b.__decorate([h.property({constructOnly:!0})],a.prototype,"scheduler",void 0);b.__decorate([h.property()],a.prototype,
"state",void 0);b.__decorate([h.property({constructOnly:!0})],a.prototype,"tileInfoView",void 0);return a=b.__decorate([e.subclass("esri.views.2d.tiling.TileQueue")],a)})},"esri/views/support/QueueProcessor":function(){define("exports ../../core/has ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/ReactiveMap ../../core/scheduling ../../core/signal".split(" "),function(b,a,f,d,r,h,g,p){class n{constructor(c,m){this.item=c;this.controller=m;this.promise=null}}class e{constructor(c){this._task=
this._schedule=null;this._deferreds=new h;this._controllers=new h;this._processingItems=new h;this._pausedSignal=p.signal(!1);this.concurrency=1;c.concurrency&&(this.concurrency=c.concurrency);this._queue=new r(c.peeker);this.process=c.process;const m=c.scheduler;c.priority&&m&&(this._task=m.registerTask(c.priority,this))}destroy(){this.clear();this._schedule=f.removeMaybe(this._schedule);this._task=f.removeMaybe(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+
this._queue.length}abort(c){(c=this._controllers.get(c))&&c.abort()}clear(){this._queue.clear();const c=[];this._controllers.forEach(m=>c.push(m));this._controllers.clear();c.forEach(m=>m.abort());this._processingItems.clear();this._cancelNext()}forEach(c){this._deferreds.forEach((m,l)=>c(l))}get(c){return(c=this._deferreds.get(c))?c.promise:void 0}isOngoing(c){return this._processingItems.has(c)}has(c){return this._deferreds.has(c)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(c,
m){const l=this.get(c);if(l)return l;const x=new AbortController;let q=null;m&&(q=d.onAbort(m,()=>x.abort()));const k=()=>{u.remove();null!=q&&q.remove();this._removeItem(c);this._queue.remove(c);this._scheduleNext()},u=d.onAbortOrThrow(x.signal,()=>{const z=this._processingItems.get(c);z&&z.controller.abort();k();v.reject(d.createAbortError())}),v=d.createResolver();this._deferreds.set(c,v);this._controllers.set(c,x);v.promise.then(k,k);this._queue.push(c);this._scheduleNext();return v.promise}last(){return this._queue.last()}lastPromise(){const c=
this.last();return c?this.get(c):null}peek(){return this._queue.peek()}popLast(){const c=this._queue.popLast();c&&(this._deferreds.get(c)?.reject(d.createAbortError()),this._removeItem(c));return c}reset(){const c=Array.from(this._processingItems.values());this._processingItems.clear();for(const m of c)this._queue.push(m.item),m.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const c=[];for(;this._queue.length;)c.push(this._queue.pop());
this.clear();return c}get running(){return!this._pausedSignal.value&&0<this._queue.length&&this._processingItems.size<this.concurrency}runTask(c){for(;!c.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),c.madeProgress()}_removeItem(c){this._deferreds.delete(c);this._controllers.delete(c);this._processingItems.delete(c)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=g.schedule(()=>{this._schedule=null;this._next()}))}_next(){for(;0<
this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(c,m){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).resolve(m))}_processError(c,m){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).reject(m))}_canProcessFulfillment(c){return this._deferreds.get(c.item)&&this._processingItems.get(c.item)===c?!0:
!1}_process(c){if(null!=c){var m=new AbortController,l=new n(c,m);this._processingItems.set(c,l);try{var x=this.process(c,m.signal)}catch(q){this._processError(l,q)}d.isPromiseLike(x)?(l.promise=x,x.then(q=>this._processResult(l,q),q=>this._processError(l,q))):this._processResult(l,x)}}get test(){}}b.QueueProcessor=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage",
"./TileKey"],function(b,a,f,d){const r=new d(0,0,0,0),h=new Map,g=[],p=[];class n{constructor(e){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=e.acquireTile;this.releaseTile=e.releaseTile;this.tileInfoView=e.tileInfoView;null!=e.resampling&&(this.resampling=e.resampling);e.cachePolicy&&(this.cachePolicy=e.cachePolicy);e.coveragePolicy&&(this.coveragePolicy=
e.coveragePolicy);null!=e.buffer&&(this.buffer=e.buffer);e.cacheSize&&(this._tileCache=new a(e.cacheSize,this.tileInfoView,c=>{this.releaseTile(c)}))}destroy(){this.tileIndex.clear()}update(e){const {resampling:c,tileIndex:m}=this,{scale:l,center:x,resolution:q}=e.state,{minScale:k,maxScale:u}=this.tileInfoView,v=!e.stationary&&l>this._previousScale;this._previousScale=l;if(!c&&(l>k||l<u))this.tiles.length=0,this.clear();else if(e=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,
this.coveragePolicy)){var {spans:z,lodInfo:y}=e,{level:t}=y;this.tiles.length=0;m.forEach(D=>D.visible=!0);var w=0,B=0;if(0<z.length)for(const {row:D,colFrom:E,colTo:I}of z)for(var A=E;A<=I;A++){w++;const O=r.set(t,D,y.normalizeCol(A),y.getWorldForColumn(A)).id;let U=m.get(O);if(U)U.isReady?(h.set(O,U),B++):v||this._addParentTile(O,h);else{if(this._tileCache?.has(O)){if(U=this._tileCache.pop(O),this.tileIndex.set(O,U),U.isReady){h.set(O,U);B++;continue}}else U=this.acquireTile(r),this.tileIndex.set(O,
U);v||this._addParentTile(O,h)}}w=B===w;for(const [D,E]of m)h.has(D)||(r.set(D),B=this.tileInfoView.intersects(e,r),A="purge"===this.cachePolicy?r.level!==t:r.level>t,!B||!v&&w?!A&&B||g.push(E):E.isReady?A&&"purge"===this.cachePolicy&&this._hasReadyAncestor(r,t)?g.push(E):p.push(E):A&&g.push(E));for(const D of p)D.isReady&&h.set(D.key.id,D);for(const D of g)this._tileCache?this._tileCache.add(D):this.releaseTile(D),m.delete(D.key.id);for(const D of h.values())this.tiles.push(D);for(const D of m.values())h.has(D.key.id)||
(D.visible=!1);this._tileCache?.prune(t,x,q);f.pool.release(e);p.length=0;g.length=0;h.clear()}else this.tiles.length=0,this.clear()}clear(){const {tileIndex:e}=this;for(const c of e.values())this.releaseTile(c);e.clear()}refresh(e){for(const c of this.tileIndex.values())e(c);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,c){let m=null;for(;;){e=this.tileInfoView.getTileParentId(e);if(!e)break;if(this.tileIndex.has(e)){if(m=this.tileIndex.get(e),
m?.isReady){c.has(m.key.id)||c.set(m.key.id,m);break}}else if(this._tileCache?.has(e)&&(m=this._tileCache.pop(e),this.tileIndex.set(e,m),m?.isReady)){c.has(m.key.id)||c.set(m.key.id,m);break}}}_hasReadyAncestor(e,c){const m=b.create();this.tileInfoView.getTileBounds(m,e,!0);for(const l of this.tileIndex.values())if(l.isReady&&l.key.level>=c&&l.key.level<e.level){const x=b.create();this.tileInfoView.getTileBounds(x,l.key,!0);if(b.contains(x,m))return!0}return!1}}return n})},"esri/views/2d/tiling/TileCache":function(){define(["../../../core/libs/gl-matrix-2/math/vec2"],
function(b){class a{constructor(f,d,r){this.maxSize=f;this._tileInfoView=d;this._removedFunc=r;this._tilePerId=new Map;this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear();this._tileKeysPerLevel=[]}has(f){return this._tilePerId.has(f)}get(f){return this._tilePerId.get(f)}pop(f){const d=this._tilePerId.get(f);if(d){var r=this._tileKeysPerLevel[d.key.level];this._tilePerId["delete"](f);for(let h=0;h<r.length;h++)if(r[h].id===f){r.splice(h,1);break}d.visible=!0;return d}}add(f){f.visible=!1;const d=
f.key,r=d.id;this._tilePerId.has(r)||(this._tilePerId.set(r,f),f=d.level,this._tileKeysPerLevel[f]||(this._tileKeysPerLevel[f]=[]),this._tileKeysPerLevel[f].push(d))}prune(f,d,r){let h=this._tilePerId.size;if(!(h<=this.maxSize)){for(var g=this._tileKeysPerLevel.length-1;h>this.maxSize&&0<=g;)g!==f&&(h=this._pruneAroundCenterTile(h,d,r,g)),g--;h>this.maxSize&&(h=this._pruneAroundCenterTile(h,d,r,f))}}_pruneAroundCenterTile(f,d,r,h){h=this._tileKeysPerLevel[h];if(!h||0===h.length)return f;const {size:g,
origin:p}=this._tileInfoView.tileInfo,n=r*g[0],e=r*g[1],c=[0,0],m=[0,0];for(h.sort((l,x)=>{c[0]=p.x+n*(l.col+.5);c[1]=p.y-e*(l.row+.5);m[0]=p.x+n*(x.col+.5);m[1]=p.y-e*(x.row+.5);return b.squaredDistance(c,d)-b.squaredDistance(m,d)});0<h.length&&(r=h.pop(),this._removeTile(r.id),f--,f!==this.maxSize););return f}_removeTile(f){const d=this._tilePerId.get(f);this._removedFunc&&d&&this._removedFunc(d);this._tilePerId["delete"](f)}}return a})},"esri/views/2d/ViewStateManager":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/screenUtils ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../chunks/pe ../../geometry/Point ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./PaddedViewState ./viewpointUtils ../../geometry/Extent".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q,k,u,v,z,y,t){b.ViewStateManager=class extends r{constructor(w){super(w);this.constraints=null;this.ready=!1;this.resizeAlign="center";this.addHandles([n.watch(()=>this.constraints?.version,B=>{this.constraints&&B&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},n.sync)])}get center(){if(!this.ready)return this._get("center");const {center:w,spatialReference:B}=this.state.paddedViewState;this.state.commitProperty("id");
return new k({x:w[0],y:w[1],spatialReference:B})}set center(w){if(null!=w)if(this.ready){try{var B=this._project(w,this.state.spatialReference)}catch(A){p.getLogger(this).error(new h("mapview:invalid-center","could not project the value in the view's spatial reference",{input:w,error:A}));return}w=this.viewpoint;y.centerAt(w,w,B);this.viewpoint=w}else this._set("center",w)}get extent(){if(!this.ready)return this._get("extent");this.state.commitProperty("id");return this.state.paddedViewState.extent.clone()}set extent(w){if(null!=
w)if(w.width&&w.height)if(this.ready){try{var B=this._project(w,this.state.spatialReference)}catch(A){p.getLogger(this).error(new h("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:A}));return}w=this.viewpoint;y.setExtent(w,w,B,this.state.size,{constraints:this.constraints});this.viewpoint=w}else this._set("extent",w),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),this._set("zoom",void 0);else p.getLogger(this).error(new h("mapview:invalid-extent",
"invalid extent size"))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(w){this.ready?(this.state.padding=w,this._set("padding",this.state.padding)):this._set("padding",w)}get resolution(){if(!this.ready)return 0;this.state.commitProperty("id");return this.state.resolution}get rotation(){if(!this.ready)return this._get("rotation");this.state.commitProperty("id");return this.state.rotation}set rotation(w){if(!isNaN(w))if(this.ready){var B=this.viewpoint;y.rotateTo(B,
B,w);this.viewpoint=B}else this._set("rotation",w)}get scale(){if(!this.ready)return this._get("scale");this.state.commitProperty("id");return this.state.scale}set scale(w){if(w&&!isNaN(w))if(this.ready){var B=this.viewpoint;y.scaleTo(B,B,w);this.viewpoint=B}else if(this._set("scale",w),this._set("zoom",void 0),w=this._get("extent"))this._set("extent",void 0),this._set("center",w.center)}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(w){if(null!=
w)if(this.ready){var B;try{var A=this._project(w,this.state.spatialReference);!w.scale||isNaN(w.scale)?B=new h("mapview:invalid-viewpoint",`invalid scale value of ${w.scale}`):null==w.targetGeometry&&(B=new h("mapview:invalid-viewpoint","geometry not defined"))}catch(D){B=new h("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:D})}B?p.getLogger(this).error(B):(this._scaleBeforeChangingSpatialReference=null,w=new d({targetGeometry:new k,scale:0,rotation:0}),
y.copy(w,A),this.constraints?.constrain(w,this.state.paddedViewState.viewpoint),this.state.viewpoint=w,this._set("viewpoint",w))}else this._set("viewpoint",w),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),this._set("scale",void 0)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(w){if(0<=w)if(this.ready)if(w=this.constraints?.zoomToScale(w)??0){var B=
this.viewpoint;y.scaleTo(B,B,w);this.viewpoint=B;this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}else this._set("zoom",-1);else if(this._set("zoom",w),this._set("scale",void 0),w=this._get("extent"))this._set("extent",void 0),this._set("center",w.center)}getUserStartupOptions(w){if(!w[0]&&!w[1])return{center:void 0,rotation:void 0,scale:void 0};const {padding:B,constraints:A}=this;var D=this._get("center"),E=this._get("extent");const I=this._get("scale");var O=this._get("rotation");
const U=this._get("viewpoint");var W=this._get("zoom");W=null!=W&&null!=A?A.zoomToScale(W)||void 0:void 0;let K=void 0,P=void 0,T=void 0;const C=U?.targetGeometry;"extent"===C?.type?K=C:"point"===C?.type&&(P=C,T=U?.scale);E=E??K;D=D??P??E?.center;O=O??U?.rotation;w=(I??W??T??(E&&y.extentToScale(E,[w[0]-B.left-B.right,w[1]-B.top-B.bottom])))||void 0;return{center:D,rotation:O,scale:w}}startup(w,B,A,D){const E=w.targetGeometry;try{this._project(w,A)}catch(I){p.getLogger(this).warn(new c("mapview:startup-projection-error",
"projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:E.toJSON(),spatialReference:A,error:I})),w.targetGeometry=D||new k({x:0,y:0,spatialReference:A})}this.constraints?.fit(w);this._set("state",new z({padding:this.padding,size:B,viewpoint:w}));this._set("ready",!0)}teardown(){this._set("ready",!1);const {center:[w,B],spatialReference:A,rotation:D,scale:E}=this.state.paddedViewState,I=new k({x:w,y:B,spatialReference:A});this._set("viewpoint",
null);this._set("extent",null);this._set("center",I);this._set("zoom",-1);this._set("rotation",D);this._set("scale",E);this._set("state",null)}changeSpatialReference(w){const B=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=B.scale;else{var A=B.viewpoint.clone();A.scale=this._scaleBeforeChangingSpatialReference;B.viewpoint=A}A=B.clone();const [D,E]=B.center;var I=null;try{I=this._project(new k({x:D,y:E,spatialReference:B.spatialReference}),
w)}catch(O){q.isLoaded()||p.getLogger(this).warn(new c("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:I?.toJSON(),spatialReference:w,error:O}))}I||=new k({x:0,y:0,spatialReference:w});I=y.centerAt(new d({targetGeometry:new k,scale:0,rotation:0}),B.viewpoint,I);A.viewpoint=I;try{const O=[B.size[0]/2,B.size[1]/2],U=[O[0]+20,O[1]],W=B.toMap([0,0],U),{x:K,y:P}=this._project(new k({x:W[0],y:W[1],spatialReference:B.spatialReference}),w);W[0]=
K;W[1]=P;A.toScreen(W,W);const T=y.angleBetween(O,W,U),C=Math.hypot(W[0]-O[0],W[1]-O[1])/20;!Number.isFinite(C)||4<Math.abs(C)?(I.rotation=0,I.targetGeometry=new k({x:0,y:0,spatialReference:w})):(I.scale*=C,I.scale>g("mapview-srswitch-adjust-rotation-scale-threshold")?I.rotation=0:I.rotation+=Number.isFinite(T)?T:0)}catch{}this._get("constraints")?.constrain(I,void 0);this._get("state").viewpoint=I}resize(w,B){if(this.ready){var A=this.state,D=this.state.paddedViewState.viewpoint,E=this.state.paddedViewState.size.slice();
A.size=[w,B];y.resize(D,D,E,this.state.paddedViewState.size,this.resizeAlign);D=this.constraints?.constrain(D,void 0)??D;this.state.viewpoint=D}}toMap(w){if(!this.ready)return null;const [B,A]=this.state.toMap([0,0],[w.x,w.y]);return new k({x:B,y:A,spatialReference:this.state.spatialReference})}toScreen(w,B){if(!this.ready)return null;w=this._project(w,this.state.spatialReference);w=[w.x,w.y];!1!==B?.pickClosestTarget&&this.state.paddedViewState.wrapMapCoordinate(w,w);this.state.toScreen(w,w);return e.createScreenPoint(w[0],
w[1])}_project(w,B){const A=w?.targetGeometry||w;if(!B)return w;if(!A)return null;if(B.imageCoordinateSystem||A.spatialReference?.imageCoordinateSystem||v.equals(B,A.spatialReference))return w;const D=u.project(A,B);if(!D)throw new h("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:A,spatialReference:B});return"esri.Viewpoint"===w?.declaredClass?(w.targetGeometry=D,w):D}};a.__decorate([m.property({type:k})],b.ViewStateManager.prototype,
"center",null);a.__decorate([m.property()],b.ViewStateManager.prototype,"constraints",void 0);a.__decorate([m.property({type:t})],b.ViewStateManager.prototype,"extent",null);a.__decorate([m.property({value:{top:0,right:0,bottom:0,left:0},cast:w=>({top:0,right:0,bottom:0,left:0,...w})})],b.ViewStateManager.prototype,"padding",null);a.__decorate([m.property()],b.ViewStateManager.prototype,"ready",void 0);a.__decorate([m.property()],b.ViewStateManager.prototype,"resizeAlign",void 0);a.__decorate([m.property({readOnly:!0})],
b.ViewStateManager.prototype,"resolution",null);a.__decorate([m.property({type:Number})],b.ViewStateManager.prototype,"rotation",null);a.__decorate([m.property({type:Number})],b.ViewStateManager.prototype,"scale",null);a.__decorate([m.property({readOnly:!0})],b.ViewStateManager.prototype,"state",void 0);a.__decorate([m.property({type:d})],b.ViewStateManager.prototype,"viewpoint",null);a.__decorate([m.property({readOnly:!0})],b.ViewStateManager.prototype,"visibleArea",null);a.__decorate([m.property()],
b.ViewStateManager.prototype,"zoom",null);b.ViewStateManager=a.__decorate([x.subclass("esri.views.2d.ViewStateManager")],b.ViewStateManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/has ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q,k,u,v,z,y,t,w,B,A,D,E,I){var O={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},U={zoomIn:["\x3d","+"],zoomOut:["-","_"]},W={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};a=class extends a{initialize(){const K=()=>this.view?.ready;this.addHandles([r.when(()=>!K(),()=>this._disconnect()),r.when(K,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??
!1}isModifierKeyDown(K){return this._inputManager?.isModifierKeyDown(K)??!1}_disconnect(){this.view.viewEvents.disconnect();this._inputManager=d.destroyMaybe(this._inputManager)}_connect(){const K=new y.BrowserEventSource(this.view.surface,this.view.input);var P=[new D.ImmediateDoubleClick,new E.PointerClickHoldAndDrag,new I.SingleAndDoubleClick,new A.Drag(this.view.navigation),new B.DoubleTapDrag];P=new t.InputManager({eventSource:K,recognizers:P});P.installHandlers("prevent-context-menu",[new w.PreventContextMenu],
t.ViewEventPriorities.INTERNAL);P.installHandlers("navigation",[new z.PinchRotateAndZoom(this.view),new x.GamepadNavigation(this.view),new v.MouseWheelZoom(this.view),new e.DoubleClickZoom(this.view),new e.DoubleClickZoom(this.view,["Control"]),new m.DragPan(this.view,"primary"),new q.KeyPan(this.view,O),new u.KeyZoom(this.view,U),new k.KeyRotate(this.view,W),new l.DragRotate(this.view,"secondary"),new c.DoubleTapDragZoom(this.view,"touch")],t.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(P);
this._source=K;this._inputManager=P;r.watch(()=>this.view?.navigation?.browserTouchPanEnabled,T=>{this._source&&(this._source.browserTouchPanningEnabled=!T)},r.initial)}get test(){}};b.__decorate([h.property()],a.prototype,"view",void 0);b.__decorate([h.property()],a.prototype,"latestPointerType",null);b.__decorate([h.property()],a.prototype,"latestPointerLocation",null);b.__decorate([h.property()],a.prototype,"multiTouchActive",null);return a=b.__decorate([n.subclass("esri.views.2d.input.MapViewInputManager")],
a)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../input/InputHandler","../../../input/handlers/support"],function(b,a,f){class d extends a.InputHandler{constructor(r,h){super(!0);this._view=r;this.registerIncoming("double-click",h,g=>this._handleDoubleClick(g,h))}_handleDoubleClick(r,h){f.eventMatchesPointerAction(r.data,"primary")&&(r.stopPropagation(),h?this._view.mapViewNavigation.zoomOut([r.data.x,r.data.y]):this._view.mapViewNavigation.zoomIn([r.data.x,
r.data.y]))}}b.DoubleClickZoom=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/support":function(){define(["exports"],function(b){b.eventMatchesMousePointerAction=function(a,f){if("touch"===a.pointerType)return!1;switch(f){case "primary":return 0===a.button;case "secondary":return 2===a.button;case "tertiary":return 1===a.button}};b.eventMatchesPointerAction=function(a,f){switch(f){case "primary":return"touch"===a.pointerType||0===a.button;case "secondary":return"touch"!==
a.pointerType&&2===a.button;case "tertiary":return"touch"!==a.pointerType&&1===a.button}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(b,a,f){class d extends f.InputHandler{constructor(r,h,g){super(!0);this.view=r;this.pointerType=h;this.registerIncoming("double-tap-drag",g,p=>this._handleDoubleTapDrag(p))}_handleDoubleTapDrag(r){var {data:h}=
r;const {pointerType:g}=h;if(g===this.pointerType){r.stopPropagation();var {action:p,delta:n}=h;({view:r}=this);var {mapViewNavigation:e}=r;switch(p){case "begin":({scale:r}=r);this._currentScale=this._startScale=r;this._previousDelta=n;e.begin();break;case "update":if(this._previousDelta.y===n.y)break;this._previousDelta=n;r=this._startScale*1.015**n.y;e.setViewpointImmediate(r/this._currentScale);this._currentScale=r;break;case "end":({constraints:h}=r);const {effectiveLODs:c,snapToZoom:m}=h;m&&
c?(r=h.snapScale(this._currentScale),r=(0<n.y?Math.max(r,h.snapToPreviousScale(this._startScale)):Math.min(r,h.snapToNextScale(this._startScale)))/this._currentScale,e.zoom(r).then(()=>{e.end()})):e.end()}}}}b.DoubleTapDragZoom=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(b,a,f,d){class r extends f.InputHandler{constructor(h,
g,p){super(!0);this.view=h;this.pointerAction=g;this.registerIncoming("drag",p,n=>this._handleDrag(n));this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(h){super.onInstall(h);this._dragEventSeparator=new a.DragEventSeparator({start:(g,p)=>{this.view.mapViewNavigation.pan.begin(this.view,p.data);p.stopPropagation()},update:(g,p)=>{this.view.mapViewNavigation.pan.update(this.view,p.data);p.stopPropagation()},end:(g,p)=>{this.view.mapViewNavigation.pan.end(this.view,p.data);
p.stopPropagation()},condition:(g,p)=>1===g&&d.eventMatchesPointerAction(p.data,this.pointerAction)})}_handleDrag(h){const g=this.view.mapViewNavigation;g.pinch.zoomMomentum||g.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(h)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}b.DragPan=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(b){class a{constructor(f){this._callbacks=
f;this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(f){const d=f.data,r=d.pointers.size;switch(d.action){case "start":this._currentCount=r;this._emitStart(f);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=r;this._emitStart(f);break;case "update":this._emitUpdate(f);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=r;this._emitStart(f);break;case "end":this._emitEnd(f),this._currentCount=0}this._previousEvent=
f}_emitStart(f){this._startEvent=f;this._callbacks.condition?.(this._currentCount,f)&&this._callbacks.start(this._currentCount,f,this._startEvent)}_emitUpdate(f){this._callbacks.condition?.(this._currentCount,f)&&this._callbacks.update(this._currentCount,f,this._startEvent)}_emitEnd(f){this._callbacks.condition?.(this._currentCount,f)&&this._callbacks.end(this._currentCount,f,this._startEvent);this._startEvent=null}}b.DragEventSeparator=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(b,a,f,d){class r extends f.InputHandler{constructor(h,g,p){super(!0);this._view=h;this.pointerAction=g;const n=this._view.mapViewNavigation;this._dragEventSeparator=new a.DragEventSeparator({start:(e,c)=>{n.rotate.begin(this._view,c.data);c.stopPropagation()},update:(e,c)=>{n.rotate.update(this._view,c.data);c.stopPropagation()},
end:(e,c)=>{n.rotate.end();c.stopPropagation()},condition:(e,c)=>1===e&&d.eventMatchesPointerAction(c.data,this.pointerAction)});this.registerIncoming("drag",p,e=>this._dragEventSeparator.handle(e))}}b.DragRotate=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(b,a,f,d,r,h,g){class p extends h.InputHandler{constructor(n){super(!0);this._view=n;this._frameTask=null;this._watchHandles=new a;this._currentDevice=null;this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};this._handle=this.registerIncoming("gamepad",e=>this._handleGamePadEvent(e));this._handle.pause()}onInstall(n){super.onInstall(n);this._watchHandles.add([f.watch(()=>this._view.navigation.gamepad?.enabled,e=>{e?(this._handle.resume(),this._frameTask||(this._frameTask=d.addFrameTask({update:c=>
this._frameUpdate(c.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},f.initial)])}onUninstall(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);super.onUninstall()}_handleGamePadEvent(n){const e=this._view.navigation.gamepad.device;e&&n.data.device!==e||this._currentDevice&&this._currentDevice!==n.data.device||("end"===n.data.action?(this._currentDevice=null,g.resetTransformation(this._transformation)):
(this._currentDevice=n.data.device,g.extractTransformation(n.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(n){const e=this._transformation;if(!g.isZeroTransformation(e)){var c=this._view.viewpoint.clone(),m=.7*this._view.navigation.gamepad.velocityFactor*n;r.translateBy(c,c,[e.translation[0]*m,-e.translation[1]*m]);m=this._view.size;r.scaleAndRotateBy(c,c,1+6E-4*e.translation[2]*n,this._view.constraints.rotationEnabled?.06*-e.heading*n:0,[m[0]/2,m[1]],m);n=this._view.constraints.constrain(c,
this._view.viewpoint);this._view.viewpoint=n}}}b.GamepadNavigation=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec32"],function(b,a){function f(d){let r=d*d;0>d&&(r*=-1);return r}b.extractTransformation=function(d,r,h){const g=d.state;d=d.device;r="forward-down"===r.tiltDirection?1:-1;"standard"===d.deviceType?(h.translation[0]=f(g.axes[0]),h.translation[1]=f(g.axes[1]),h.translation[2]=
f(g.buttons[7])-f(g.buttons[6]),h.heading=f(g.axes[2]),h.tilt=f(g.axes[3])):"spacemouse"===d.deviceType&&(h.translation[0]=1.2*f(g.axes[0]),h.translation[1]=1.2*f(g.axes[1]),h.translation[2]=2*-f(g.axes[2]),h.heading=1.2*f(g.axes[5]),h.tilt=1.2*f(g.axes[3]));h.tilt*=r;a.scale(h.translation,h.translation,1);return h};b.extractTransformationKeyboard=function(d,r){r.translation[0]=d[1]-d[0];r.translation[1]=d[3]-d[2];r.translation[2]=d[4]-d[5];r.heading=d[7]-d[6];r.tilt=d[8]-d[9];r.zoom=d[10]-d[11];
return r};b.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt&&0===d.zoom};b.resetTransformation=function(d){d.translation[0]=0;d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(b,a,f){class d extends a.InputHandler{constructor(r,
h,g){super(!0);this.view=r;this.keys=h;this._isSticky=!1;this._pressedKeys=new Set;this._currentDirection=this._timeout=void 0;this._stickyKeyDuration=200;this._handleKey=p=>{var n=this._keyMap[p.data.key];p.modifiers.has("Meta")||p.modifiers.has("Control")?this._stopMovement():null!=n&&(p.stopPropagation(),p.preventDefault(),p="key-down"===p.type,this._pressedKeys[p?"add":"delete"](n),p?this._direction!==n&&(this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})):
(n=0<this._pressedKeys.size,void 0===this._timeout||n?this._handlePopKey():this._isSticky=!0))};this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop();null==this._direction&&this._stopMovement()};this._stopMovement=()=>{this._isSticky=!1;this._direction=void 0;this._pressedKeys.clear();this._setTimeout(void 0)};this._keyMap={[h.left]:"left",[h.right]:"right",[h.up]:"up",[h.down]:"down"};this.registerIncoming("key-down",g,this._handleKey);this.registerIncoming("key-up",g,this._handleKey);
this.registerIncoming("blur",g,this._stopMovement);this._visibilityHandle=f.onVisibilityChange(p=>p?null:this._stopMovement())}onUninstall(){this._stopMovement();this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(r){const h=null!=this._currentDirection;if(null!=r){if(h||this.view.mapViewNavigation.begin(),this._currentDirection!==r)switch(r){case "left":this.view.mapViewNavigation.continuousPanLeft();break;case "right":this.view.mapViewNavigation.continuousPanRight();
break;case "up":this.view.mapViewNavigation.continuousPanUp();break;case "down":this.view.mapViewNavigation.continuousPanDown()}}else h&&this.view.mapViewNavigation.stop();this._currentDirection=r}_setTimeout(r){clearTimeout(this._timeout);this._timeout=void 0===r?void 0:setTimeout(()=>{this._timeout=void 0;r()},this._stickyKeyDuration)}}b.KeyPan=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/VisibilityChange":function(){define(["exports","../../core/handleUtils"],
function(b,a){b.onVisibilityChange=function(f){const d=()=>f("visible"===document.visibilityState);document.addEventListener("visibilitychange",d);return a.makeHandle(()=>document.removeEventListener("visibilitychange",d))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(b,a,f){class d extends a.InputHandler{constructor(r,h,g){super(!0);this.view=
r;this.keys=h;this._pressed=!1;this._keyToDirection={[h.clockwiseOption1]:"clockwise",[h.clockwiseOption2]:"clockwise",[h.counterClockwiseOption1]:"counterClockwise",[h.counterClockwiseOption2]:"counterClockwise",[h.resetOption1]:"reset",[h.resetOption2]:"reset"};this.registerIncoming("key-down",g,p=>this._handleKeyDown(p));this.registerIncoming("key-up",g,p=>this._handleKeyUp(p));this.registerIncoming("blur",g,()=>this._handleStop());this._visibilityHandle=f.onVisibilityChange(p=>p?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove();
this._handleStop()}_handleKeyDown(r){r.data.repeat||this._handleKey(r,!0)}_handleKeyUp(r){this._handleKey(r,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(r,h){var g=r.modifiers;if(!(0<g.size&&!g.has("Shift")||!this.view.constraints.rotationEnabled)&&(g=this._keyToDirection[r.data.key],this._pressed=null!=g)){r.preventDefault();if(h)switch(this.view.mapViewNavigation.begin(),g){case "clockwise":this.view.mapViewNavigation.continuousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();r.stopPropagation()}}}b.KeyRotate=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(b,a,f){var d;(function(h){h[h.IN=0]="IN";h[h.OUT=1]="OUT"})(d||=
{});class r extends f.InputHandler{constructor(h,g,p){super(!0);this.view=h;this.keys=g;this._keysToZoomAction={};this.registerIncoming("key-down",p,n=>this._handleKeyDown(n));g.zoomIn.forEach(n=>this._keysToZoomAction[n]=d.IN);g.zoomOut.forEach(n=>this._keysToZoomAction[n]=d.OUT)}_handleKeyDown(h){this._handleKey(h)}_handleKey(h){var g=h.modifiers;if(!(0<g.size)||g.has("Shift"))if({key:g}=h.data,g in this._keysToZoomAction){g=this._keysToZoomAction[g];var {mapViewNavigation:p}=this.view,n=null;switch(g){case d.IN:n=
p.zoomIn();break;case d.OUT:n=p.zoomOut();break;default:return}p.begin();n.then(()=>p.end());h.stopPropagation()}}}b.KeyZoom=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../input/InputHandler"],function(b,a){class f extends a.InputHandler{constructor(d,r){super(!0);this._view=d;this._canZoom=!0;this.registerIncoming("mouse-wheel",r,h=>this._handleMouseWheel(h))}_handleMouseWheel(d){if(this._view.navigation.mouseWheelZoomEnabled&&
(d.preventDefault(),d.stopPropagation(),this._canZoom)){var r=this._view.mapViewNavigation,{x:h,y:g,deltaY:p}=d.data;if(d=r.zoom(1/.6**(1/60*p),[h,g]))this._canZoom=!1,d.catch(()=>{}).then(()=>{this._canZoom=!0;r.end()})}}}b.MouseWheelZoom=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler"],function(b,a,f){class d extends f.InputHandler{constructor(r){super(!0);
this.view=r;this.registerIncoming("drag",g=>this._handleDrag(g));this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const h=this.view.mapViewNavigation;this._dragEventSeparator=new a.DragEventSeparator({start:(g,p)=>{h.pinch.begin(this.view,p.data);p.stopPropagation()},update:(g,p)=>{h.pinch.update(this.view,p.data);p.stopPropagation()},end:(g,p)=>{h.pinch.end(this.view);p.stopPropagation()},condition:g=>2<=g})}_handleDrag(r){this._dragEventSeparator.handle(r)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}
b.PinchRotateAndZoom=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define(["exports","../../core/has","../../core/maybe","./gamepad/GamepadSource","../support/screenUtils"],function(b,a,f,d,r){const h=a("edge"),g=a("chrome"),p=a("ff"),n=a("safari");class e{constructor(m,l){this._input=l;this._active={};this._callback=()=>{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=m;m.getAttribute("tabindex")||m.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new d.GamepadSource(m,this._input);this._gamepadSource.onEvent=x=>this._callback("gamepad",x)}destroy(){this._callback=()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(m=>{this._releasePointerCaptureSafe(m)});this._gamepadSource=f.destroyMaybe(this._gamepadSource);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(m){this._browserTouchPanningEnabled=
m;this._updateTouchAction();this._updateTouchEventHandling()}set onEventReceived(m){this._callback=m}set activeEvents(m){for(const l in this._active)m&&m.has(l)||(this._element.removeEventListener(c[l],this._active[l]),delete this._active[l]);m&&m.forEach(l=>{if(!this._active[l]&&c[l]){const x=(this._eventHandlers[l]||this._handleDefault).bind(this,l);this._element.addEventListener(c[l],x);this._active[l]=x}});this._gamepadSource.hasEventListeners=m?.has("gamepad")??!1}setPointerCapture(m,l){l?this._setPointerCatpureSafe(m.pointerId):
(this._releasePointerCaptureSafe(m.pointerId),this._activePointerCaptures.delete(m.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(m){try{this._element.setPointerCapture(m),this._activePointerCaptures.add(m)}catch{}}_releasePointerCaptureSafe(m){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(m)||
this._element.releasePointerCapture(m)}catch(l){}}_updateNormalizedPointerLikeEvent(m,l){m=r.createScreenPointFromNativeEvent(this._element,m);e.test.disableSubpixelCoordinates&&(m.x=Math.round(m.x),m.y=Math.round(m.y));l.x=m.x;l.y=m.y;return l}_handleKey(m,l){const {key:x}=l;x&&"key-up"===m&&this._keyDownState.delete(x);l={native:l,key:x,repeat:!!x&&this._keyDownState.has(x)};x&&"key-down"===m&&this._keyDownState.add(l.key);this._callback(m,l)}_handlePointer(m,l){l=this._updateNormalizedPointerLikeEvent(l,
{native:l,x:0,y:0,pointerType:l.pointerType,button:l.button,buttons:l.buttons,eventId:this._eventId++});this._callback(m,l)}_handlePointerPreventDefault(m,l){const x=this._updateNormalizedPointerLikeEvent(l,{native:l,x:0,y:0,pointerType:l.pointerType,button:l.button,buttons:l.buttons,eventId:this._eventId++});l.preventDefault();this._callback(m,x)}_getDeltaFromTrackpadOrMouseWheel(m){return m.shiftKey&&a("mac")&&0===m.deltaY?m.deltaX:m.deltaY}_handleMouseWheel(m,l){let x=this._getDeltaFromTrackpadOrMouseWheel(l);
switch(l.deltaMode){case 0:h&&(x=x/document.documentElement.clientHeight*600);break;case 1:x*=30;break;case 2:x*=900}h?x*=.7:g||n?x*=.6:p&&(x*=1.375);const q=Math.abs(x);100<q&&(x=x/q*200/(1+Math.exp(-.02*(q-100))));l=this._updateNormalizedPointerLikeEvent(l,{native:l,x:0,y:0,deltaY:x});this._callback(m,l)}_handlePointerCaptureLost(m,l){this._activePointerCaptures.delete(l.pointerId);this._handleDefault(m,l)}_handleDefault(m,l){const x={native:l};l.preventDefault();this._callback(m,x)}_preventAltKeyDefault(m){"Alt"===
m.key&&m.preventDefault()}_preventMultiTouchPanning(m){1<m.touches.length&&m.preventDefault()}}e.test={disableSubpixelCoordinates:!1};const c={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",
blur:"blur"};b.BrowserEventSource=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(b,a,f,d){function r(g){for(const n of navigator.getGamepads()){var p;a:if((p=n)&&p.connected){for(let e=0;e<p.axes.length;e++)if(isNaN(p.axes[e])){p=!1;break a}p=!0}else p=!1;p&&g(n)}}class h{constructor(g,p){this._element=g;this._input=p;this._hasEventListeners=
!1;this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)};this._onDisconnectGamepad=n=>{n=n.gamepad;const e=n.index,c=this._inputDevices[e];c&&(this._emitGamepadEvent(n,d.extractState(c),!1),this._inputDevices.splice(e,1),this._latestUpdate.splice(e,1),this._input.gamepad.devices.remove(c),this.ensurePollingState())};this._frameTask=null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;g=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&g)r(n=>this._connectGamepad(n)),
window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}destroy(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(g){this._hasEventListeners!==g&&(this._hasEventListeners=g,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&
0<this._inputDevices.length&&this._hasEventListeners}set onEvent(g){this._callback=g}_connectGamepad(g){const p=new f(g);"unknown"!==p.deviceType&&(this._inputDevices[g.index]=p,this._input.gamepad.devices.add(p));this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=a.addFrameTask({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=
null,this._latestUpdate=[])}_readGamepadState(){const g=document.hasFocus(),p=this._element.contains(document.activeElement),n="document"===this._input.gamepad.enabledFocusMode&&!g||"view"===this._input.gamepad.enabledFocusMode&&!p;r(e=>{var c=this._inputDevices[e.index];if(c){var m=this._latestUpdate[e.index];c=d.extractState(c);var l=n||d.stateIdle(c);m&&(m.timestamp===e.timestamp||!m.active&&l||d.stateEqual(m.state,c))||this._emitGamepadEvent(e,c,!l)}})}_emitGamepadEvent(g,p,n){var e=this._latestUpdate[g.index];
if((e=e&&e.active)||n)this._latestUpdate[g.index]={timestamp:g.timestamp,state:p,active:n},this._callback&&this._callback({device:this._inputDevices[g.index],state:p,action:!e&&n?"start":e&&n?"update":"end"})}}b.GamepadSource=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(b){b.extractState=function(a){const f=a.native;return f?{buttons:f.buttons.map(d=>d.pressed?d.value||1:0),axes:f.axes.map(d=>{{var r=
a.axisThreshold;const h=Math.abs(d);d=h<r?0:Math.sign(d)*(h-r)/(1-r)}return d})}:{buttons:[],axes:[]}};b.stateEqual=function(a,f){if(a.axes.length!==f.axes.length||a.buttons.length!==f.buttons.length)return!1;for(var d=0;d<a.axes.length;d++)if(a.axes[d]!==f.axes[d])return!1;for(d=0;d<a.buttons.length;d++)if(a.buttons[d]!==f.buttons[d])return!1;return!0};b.stateIdle=function(a){for(var f=0;f<a.axes.length;f++)if(0!==a.axes[f])return!1;for(f=0;f<a.buttons.length;f++)if(0!==a.buttons[f])return!1;return!0};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../InputHandler"],function(b,a){class f extends a.InputHandler{constructor(){super(!0);this.registerIncoming("context-menu",d=>d.data.native.preventDefault())}}b.PreventContextMenu=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../core/clock ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./support".split(" "),
function(b,a,f,d,r,h,g){function p(e,c,m){const {button:l,buttons:x,pointer:q,pointers:k,pointerType:u,timestamp:v}=m;return{action:e,delta:c,button:l,buttons:x,pointer:q,pointers:k,pointerType:u,timestamp:v}}class n extends h.InputHandler{constructor(e=g.DefaultParameters.maximumDoubleClickDelay,c=g.DefaultParameters.maximumDoubleClickDistance,m=g.DefaultParameters.maximumDoubleTouchDelay,l=g.DefaultParameters.maximumDoubleTouchDistance,x=a.clock){super(!1);this._maximumDoubleClickDelay=e;this._maximumDoubleClickDistance=
c;this._maximumDoubleTouchDelay=m;this._maximumDoubleTouchDistance=l;this._clock=x;this._doubleTapDragActive=this._doubleTapDragReady=!1;this._dragStartCenter=d.createScreenPoint(0,0);this._pointerState=new Map;this._doubleTapDrag=this.registerOutgoing("double-tap-drag");this._dragEventSeparator=new r.DragEventSeparator({start:(q,k)=>this._dragStart(q,k),update:(q,k)=>this._dragUpdate(k),end:(q,k)=>this._dragEnd(k)});this.registerIncoming("drag",q=>this._dragEventSeparator.handle(q));this.registerIncoming("pointer-down",
q=>this._handlePointerDown(q));this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=f.removeMaybe(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(null!=e.doubleTapTimeout)return!0;return!1}_clearPointerDown(e){const c=this._pointerState.get(e);c&&(c.doubleTapTimeout=f.removeMaybe(c.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,c){if(this._doubleTapDragReady&&
1===e){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:m,modifiers:l}=c;({center:e}=m);this._dragStartCenter=e;e=p("begin",d.createScreenPoint(0,0),m);this._doubleTapDrag.emit(e,void 0,l);c.stopPropagation()}}_dragUpdate(e){if(this._doubleTapDragActive){var {data:c,modifiers:m}=e,{center:l}=c;l=d.createScreenPoint(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y);l=p("update",l,c);this._doubleTapDrag.emit(l,void 0,m);e.stopPropagation()}}_dragEnd(e){if(this._doubleTapDragActive){var {data:c,
modifiers:m}=e,{center:l}=c;l=d.createScreenPoint(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y);l=p("end",l,c);this._doubleTapDrag.emit(l,void 0,m);this._doubleTapDragActive=!1;e.stopPropagation()}}_handlePointerDown(e){const {data:c}=e,m=g.getPointerId(c),l=this._pointerState.get(m);var {pointerType:x}=c.native;l?(x="touch"===x?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance,this._clearPointerDown(m),g.manhattanDistance(l.event.data,c)>x?this._storePointerDown(e):this._doubleTapDragReady=
!0):this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){var {data:c}=e;const {pointerType:m}=c.native,l=g.getPointerId(c);c=this._clock.setTimeout(()=>this._clearPointerDown(l),"touch"===m?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(l,{event:e,doubleTapTimeout:c});this.refreshHasPendingInputs()}}b.DoubleTapDrag=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports",
"../../../core/screenUtils"],function(b,a){b.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};b.euclideanDistance=function(f,d){const r=d.x-f.x;f=d.y-f.y;return Math.sqrt(r*r+f*f)};b.fitCircleLSQ=function(f,d){d?(d.radius=0,d.center.x=0,d.center.y=0):d={radius:0,center:a.createScreenPoint()};if(0===f.length)return d;
if(1===f.length)return d.center.x=f[0].x,d.center.y=f[0].y,d;if(2===f.length){const [k,u]=f,[v,z]=[u.x-k.x,u.y-k.y];d.radius=Math.sqrt(v*v+z*z)/2;d.center.x=(k.x+u.x)/2;d.center.y=(k.y+u.y)/2;return d}let r=0,h=0;for(d=0;d<f.length;d++)r+=f[d].x,h+=f[d].y;r/=f.length;h/=f.length;var g=f.map(k=>k.x-r),p=f.map(k=>k.y-h);let n=d=0;var e=0,c=0,m=0,l=0,x=0;for(var q=0;q<g.length;q++){const k=g[q],u=p[q],v=k*k,z=u*u;d+=v;n+=z;e+=k*u;c+=v*k;m+=z*u;l+=k*z;x+=u*v}g=d;p=e;q=n;c=.5*(c+l);m=.5*(m+x);x=g*q-e*
p;l=(c*q-m*p)/x;m=(g*m-e*c)/x;x=a.createScreenPoint(l+r,m+h);return{radius:Math.sqrt(l*l+m*m+(d+n)/f.length),center:x}};b.getPointerId=function(f){({native:f}=f);const {pointerId:d,button:r,pointerType:h}=f;return"mouse"===h?`${d}:${r}`:`${h}`};b.manhattanDistance=function(f,d){return Math.abs(d.x-f.x)+Math.abs(d.y-f.y)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define(["exports","../../../core/screenUtils","../../../core/time",
"../InputHandler","./support"],function(b,a,f,d,r){function h(c){const m=[];c.forEach(l=>{m.push(a.createScreenPoint(l.event.x,l.event.y))});return r.fitCircleLSQ(m)}function g(c){const m=h(c);let l=0;c.forEach(x=>{var q=n(x,m);for(q-=x.lastAngle;q>Math.PI;)q-=2*Math.PI;for(;q<-Math.PI;)q+=2*Math.PI;q=x.lastAngle+q;x.lastAngle=q;l+=q-x.initialAngle});l/=c.size||1;return{angle:l,radius:m.radius,center:m.center}}function p(c){const m=new Map;c.forEach((l,x)=>m.set(x,l.event));return m}function n(c,
m){c=c.event;return Math.atan2(c.y-m.center.y,c.x-m.center.x)}class e extends d.InputHandler{constructor(c){super(!1);this._navigationTouch=c;this._startStateModifiers=new Set;this._activePointerMap=new Map;this._isCurrentDragSuppressed=this._isDragging=!1;this._drag=this.registerOutgoing("drag");this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this));this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this));
this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(c,m,l,x){return{action:c,pointerType:this._pointerType,button:this._mouseButton,buttons:m.buttons,timestamp:x,pointers:p(this._activePointerMap),pointer:m,angle:l.angle,radius:l.radius,center:l.center}}_addPointer(c){var m=c.native.pointerId;const l=g(this._activePointerMap).angle;c={event:c,initialAngle:0,lastAngle:0};this._activePointerMap.set(m,c);m=n(c,h(this._activePointerMap));c.initialAngle=
m;c.lastAngle=m;this._updatePointerAngles(l)}_updatePointer(c){if(!c||null!=c.x||null!=c.y){var m=this._activePointerMap.get(c.native.pointerId);m?m.event=c:this._addPointer(c)}}_removePointer(c){const m=g(this._activePointerMap).angle;this._activePointerMap.delete(c);this._updatePointerAngles(m)}_updatePointerAngles(c){const m=g(this._activePointerMap);this._activePointerMap.forEach(l=>{l.initialAngle=n(l,m)-c;l.lastAngle=n(l,m)-c})}_emitEvent(c,m,l){const x=g(this._activePointerMap);this._drag.emit(this._createPayload(c,
m,x,l),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(c){const m=c.data.native.pointerId,l=f.Milliseconds(c.timestamp);this._activePointerMap.get(m)&&(1===this._activePointerMap.size?(this._updatePointer(c.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",c.data,l),this._isCurrentDragSuppressed=this._isDragging=!1,this._removePointer(m)):(this._removePointer(m),this._emitEvent("removed",c.data,f.Milliseconds(c.timestamp))))}_handlePointerDrag(c){const m=c.data,l=m.currentEvent,
x=f.Milliseconds(c.timestamp);switch(m.action){case "start":case "update":this._isDragging?this._activePointerMap.has(l.native.pointerId)?(this._updatePointer(l),!this._isCurrentDragSuppressed&&this._emitEvent("update",l,x)):(this._addPointer(l),this._emitEvent("added",l,x),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(l),this._pointerType=c.data.startEvent.pointerType,this._mouseButton=c.data.startEvent.button,this._startStateModifiers=c.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=
this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",l,x))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}b.Button=void 0;(function(c){c[c.Left=0]="Left";c[c.Middle=1]="Middle";c[c.Right=2]="Right";c[c.Back=3]="Back";c[c.Forward=4]="Forward";c[c.Undefined=-1]="Undefined"})(b.Button||(b.Button={}));b.Drag=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/input/recognizers/ImmediateDoubleClick":function(){define(["exports","../../../core/clock","../InputHandler","./support"],function(b,a,f,d){class r extends f.InputHandler{constructor(h=d.DefaultParameters.maximumDoubleClickDelay,g=d.DefaultParameters.maximumDoubleClickDistance,p=d.DefaultParameters.maximumDoubleTouchDelay,n=d.DefaultParameters.maximumDoubleTouchDistance,e=a.clock){super(!1);this._maximumDoubleClickDelay=h;this._maximumDoubleClickDistance=g;this._maximumDoubleTouchDelay=
p;this._maximumDoubleTouchDistance=n;this._clock=e;this._pointerState=new Map;this._immediateDoubleClick=this.registerOutgoing("immediate-double-click");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(h=>{h.immediateDoubleClick&&h.immediateDoubleClick.timeoutHandle.remove()});super.onUninstall()}_handlePointerDown(h){h=h.data;const g=d.getPointerId(h);this._pointerState.has(g)||
(this._pointerState.set(g,{downButton:h.native.button,x:h.x,y:h.y,immediateDoubleClick:null}),this.startCapturingPointer(h.native))}_handlePointerUp(h){const g=h.data;var p=d.getPointerId(g);if((p=this._pointerState.get(p))&&p.downButton===g.native.button){const n=p.immediateDoubleClick,e="touch"===h.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),d.manhattanDistance(n,h.data)>e?this._startImmediateDoubleClick(h,p):(this._immediateDoubleClick.emit(h.data,
void 0,n.modifiers),this._removeState(g))):d.manhattanDistance(p,h.data)>e?this._removeState(g):this._startImmediateDoubleClick(h,p)}}_startImmediateDoubleClick(h,g){g.immediateDoubleClick={x:h.data.x,y:h.data.y,modifiers:h.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(h.data),"touch"===h.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}}_removeState(h){const g=d.getPointerId(h);this._pointerState.delete(g);this.stopCapturingPointer(h.native);
this.refreshHasPendingInputs()}}b.ImmediateDoubleClick=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../core/clock","../../../core/maybe","../InputHandler","./support"],function(b,a,f,d,r){function h(p,n,e){return{action:p,startEvent:n.startEvent,previousEvent:n.previousEvent,currentEvent:e}}class g extends d.InputHandler{constructor(p=r.DefaultParameters.maximumClickDelay,n=r.DefaultParameters.movementUntilMouseDrag,
e=r.DefaultParameters.movementUntilPenDrag,c=r.DefaultParameters.movementUntilTouchDrag,m=r.DefaultParameters.holdDelay,l=a.clock){super(!1);this._maximumClickDelay=p;this._movementUntilMouseDrag=n;this._movementUntilPenDrag=e;this._movementUntilTouchDrag=c;this._holdDelay=m;this._clock=l;this._pointerState=new Map;this._pointerDrag=this.registerOutgoing("pointer-drag");this._immediateClick=this.registerOutgoing("immediate-click");this._pointerHold=this.registerOutgoing("hold");this.registerIncoming("pointer-down",
x=>this._handlePointerDown(x));this.registerIncoming("pointer-up",x=>this._handlePointerLoss(x,"pointer-up"));this.registerIncoming("pointer-capture-lost",x=>this._handlePointerLoss(x,"pointer-capture-lost"));this.registerIncoming("pointer-cancel",x=>this._handlePointerLoss(x,"pointer-cancel"));this._moveHandle=this.registerIncoming("pointer-move",x=>this._handlePointerMove(x));this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(p=>{p.holdTimeout=f.removeMaybe(p.holdTimeout)});super.onUninstall()}_handlePointerDown(p){const n=
p.data,e=n.native.pointerId;var c=null;0===this._pointerState.size&&(c=this._clock.setTimeout(()=>{const m=this._pointerState.get(e);m&&(m.isDragging||(this._pointerHold.emit(m.previousEvent,void 0,p.modifiers),m.holdEmitted=!0),m.holdTimeout=null)},this._holdDelay));c={startEvent:n,previousEvent:n,startTimestamp:p.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:c,modifiers:new Set};this._pointerState.set(e,c);this.startCapturingPointer(n.native);this._moveHandle.resume();1<this._pointerState.size&&
this._startDragging(p)}_handlePointerMove(p){const n=p.data,e=this._pointerState.get(n.native.pointerId);if(e){if(e.isDragging)this._pointerDrag.emit(h("update",e,n),void 0,e.modifiers);else{const c=r.euclideanDistance(n,e.startEvent),m=this._getDragThreshold(n.native.pointerType);c>m&&this._startDragging(p)}e.previousEvent=n}}_getDragThreshold(p){switch(p){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(p){const n=
p.data,e=n.native.pointerId;this._pointerState.forEach(c=>{null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null);c.isDragging||(c.modifiers=p.modifiers,c.isDragging=!0,e===c.startEvent.native.pointerId?this._pointerDrag.emit(h("start",c,n)):this._pointerDrag.emit(h("start",c,c.previousEvent),p.timestamp))})}_handlePointerLoss(p,n){const e=p.data,c=e.native.pointerId,m=this._pointerState.get(c);m&&(null!=m.holdTimeout&&(m.holdTimeout.remove(),m.holdTimeout=null),m.isDragging?this._pointerDrag.emit(h("end",
m,"pointer-up"===n?e:m.previousEvent),void 0,m.modifiers):"pointer-up"===n&&m.downButton===e.native.button&&p.timestamp-m.startTimestamp<=this._maximumClickDelay&&!m.holdEmitted&&this._immediateClick.emit(e),this._pointerState.delete(c),this.stopCapturingPointer(e.native),0===this._pointerState.size&&this._moveHandle.pause())}}b.PointerClickHoldAndDrag=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["exports",
"../../../core/clock","../../../core/maybe","../InputHandler","./support"],function(b,a,f,d,r){class h extends d.InputHandler{constructor(g=r.DefaultParameters.maximumDoubleClickDelay,p=r.DefaultParameters.maximumDoubleClickDistance,n=r.DefaultParameters.maximumDoubleTouchDelay,e=r.DefaultParameters.maximumDoubleTouchDistance,c=a.clock){super(!1);this._maximumDoubleClickDelay=g;this._maximumDoubleClickDistance=p;this._maximumDoubleTouchDelay=n;this._maximumDoubleTouchDistance=e;this._clock=c;this._pointerState=
new Map;this._click=this.registerOutgoing("click");this._doubleClick=this.registerOutgoing("double-click");this.registerIncoming("immediate-click",m=>this._handleImmediateClick(m));this.registerIncoming("pointer-down",m=>this._handlePointerDown(m))}onUninstall(){this._pointerState.forEach(g=>g.doubleClickTimer=f.removeMaybe(g.doubleClickTimer))}get hasPendingInputs(){for(const g of this._pointerState.values())if(null!=g.doubleClickTimer)return!0;return!1}_clearDoubleClickTimer(g,p){const n=this._pointerState.get(g);
n&&(n.doubleClickTimer=f.removeMaybe(n.doubleClickTimer),p&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(g),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(g){const p=this._pointerState.get(g);1===p.pointerDownCount&&this._click.emit(p.event.data,void 0,p.event.modifiers);p.doubleClickTimer=null;this._pointerState.delete(g);this.refreshHasPendingInputs()}_handleImmediateClick(g){const p=g.data;var {pointerType:n}=p.native;const {pointerId:e,pointerType:c,
button:m}=p.native;var l="mouse"===c?`${e}:${m}`:`${c}`;if(this._pointerState.has(l)){var x=this._pointerState.get(l),{data:q,modifiers:k}=x.event;n="touch"===n?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;r.manhattanDistance(q,p)>n?(this._clearDoubleClickTimer(l,!0),this._startClick(g)):(this._clearDoubleClickTimer(l,!1),2===x.pointerDownCount&&this._doubleClick.emit(q,void 0,k))}else this._startClick(g)}_handlePointerDown(g){g=r.getPointerId(g.data);if(g=this._pointerState.get(g))g.pointerDownCount+=
1}_startClick(g){var {data:p}=g;const {native:{pointerType:n}}=p,e=r.getPointerId(p);p=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(e),"touch"===n?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(e,{event:g,doubleClickTimer:p,pointerDownCount:1});this.refreshHasPendingInputs()}}b.SingleAndDoubleClick=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ../../../../../geometry/support/aaBoundingRect ../../../../../geometry/support/spatialReferenceUtils ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(b,a,f,d,r,h,g,p){const n={added:[],removed:[]},e=new Set,c=new p(0,0,0,0);class m extends b{constructor(l){super();this._tiles=new Map;this._index=f.rbush(9,a("esri-csp-restrictions")?x=>({minX:x.bounds[0],minY:x.bounds[1],maxX:x.bounds[2],maxY:x.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this.tiles=[];this.tileScheme=l}destroy(){this.clear()}clear(){this.tiles.length=0;this._tiles.clear();this._index.clear()}has(l){return this._tiles.has(l)}get(l){return this._tiles.get(l)}getIntersectingTiles(l){if(!l||
0===d.width(l)||0===d.height(l))return[];var x;if(x=r.getInfo(this.tileScheme.spatialReference)){var [q,k]=x.valid;x=l[2]>k?[d.create([l[0],l[1],k,l[3]]),d.create([q,l[1],q+l[2]-k,l[3]])]:l[0]<q?[d.create([q,l[1],l[2],l[3]]),d.create([k-(q-l[0]),l[1],k,l[3]])]:null}else x=null;return null!=x?[...(new Set([...this.boundsIntersections(x[0]),...this.boundsIntersections(x[1])]))]:this.boundsIntersections(l)}boundsIntersections(l){return this._index.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]})}updateTiles(l){const x=
{added:[],removed:[]};for(const q of l.added)if(!this.has(q)){const k=new h.Tile(this.tileScheme,q);this._tiles.set(q,k);this._index.insert(k);x.added.push(k)}for(const q of l.removed)this.has(q)&&(l=this.get(q),this._tiles.delete(q),this._index.remove(l),x.removed.push(l));this.tiles.length=0;this._tiles.forEach(q=>this.tiles.push(q));(x.added.length||x.removed.length)&&this.emit("update",x)}setViewState(l){if(l=this.tileScheme.getTileCoverage(l,0)){var {spans:x,lodInfo:q}=l,{level:k}=q;if(0<x.length)for(const {row:v,
colFrom:z,colTo:y}of x)for(var u=z;u<=y;u++){const t=c.set(k,v,q.normalizeCol(u),q.getWorldForColumn(u)).id;e.add(t);if(!this.has(t)){const w=new h.Tile(this.tileScheme,t);this._tiles.set(t,w);this._index.insert(w);this.tiles.push(w);n.added.push(w)}}for(k=this.tiles.length-1;0<=k;k--)u=this.tiles[k],e.has(u.id)||(this._tiles.delete(u.id),this.tiles.splice(k,1),this._index.remove(u),n.removed.push(u));(n.added.length||n.removed.length)&&this.emit("update",n);g.pool.release(l);e.clear();n.added.length=
0;n.removed.length=0}}}return m})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(b,a){function f(q,k){if(!(this instanceof f))return new f(q,k);this._maxEntries=Math.max(4,q||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));k&&("function"===typeof k?this.toBBox=k:this._initFormat(k));this.clear()}function d(q,k){r(q,0,q.children.length,k,q)}function r(q,k,u,v,z){z||=l(null);z.minX=Infinity;z.minY=Infinity;z.maxX=-Infinity;z.maxY=-Infinity;for(var y;k<u;k++)y=
q.children[k],h(z,q.leaf?v(y):y);return z}function h(q,k){q.minX=Math.min(q.minX,k.minX);q.minY=Math.min(q.minY,k.minY);q.maxX=Math.max(q.maxX,k.maxX);q.maxY=Math.max(q.maxY,k.maxY);return q}function g(q,k){return q.minX-k.minX}function p(q,k){return q.minY-k.minY}function n(q){return(q.maxX-q.minX)*(q.maxY-q.minY)}function e(q){return q.maxX-q.minX+(q.maxY-q.minY)}function c(q,k){return q.minX<=k.minX&&q.minY<=k.minY&&k.maxX<=q.maxX&&k.maxY<=q.maxY}function m(q,k){return k.minX<=q.maxX&&k.minY<=
q.maxY&&k.maxX>=q.minX&&k.maxY>=q.minY}function l(q){return{children:q,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function x(q,k,u,v,z){for(var y=[k,u],t;y.length;)u=y.pop(),k=y.pop(),u-k<=v||(t=k+Math.ceil((u-k)/v/2)*v,a.quickselect(q,t,k,u,z),y.push(k,t,t,u))}f.prototype={all:function(){return this._all(this.data,[])},search:function(q){var k=this.data,u=[],v=this.toBBox;if(!m(q,k))return u;for(var z=[],y,t,w,B;k;){y=0;for(t=k.children.length;y<t;y++)w=k.children[y],
B=k.leaf?v(w):w,m(q,B)&&(k.leaf?u.push(w):c(q,B)?this._all(w,u):z.push(w));k=z.pop()}return u},collides:function(q){var k=this.data,u=this.toBBox;if(!m(q,k))return!1;for(var v=[],z,y,t,w;k;){z=0;for(y=k.children.length;z<y;z++)if(t=k.children[z],w=k.leaf?u(t):t,m(q,w)){if(k.leaf||c(q,w))return!0;v.push(t)}k=v.pop()}return!1},load:function(q){if(!q||!q.length)return this;if(q.length<this._minEntries){for(var k=0,u=q.length;k<u;k++)this.insert(q[k]);return this}q=this._build(q.slice(),0,q.length-1,
0);this.data.children.length?this.data.height===q.height?this._splitRoot(this.data,q):(this.data.height<q.height&&(k=this.data,this.data=q,q=k),this._insert(q,this.data.height-q.height-1,!0)):this.data=q;return this},insert:function(q){null!=q&&this._insert(q,this.data.height-1);return this},clear:function(){this.data=l([]);return this},remove:function(q,k){if(null==q)return this;for(var u=this.data,v=this.toBBox(q),z=[],y=[],t,w,B,A;u||z.length;){u||(u=z.pop(),w=z[z.length-1],t=y.pop(),A=!0);if(u.leaf){a:{B=
q;var D=u.children,E=k;if(E){for(var I=0;I<D.length;I++)if(E(B,D[I])){B=I;break a}B=-1}else B=D.indexOf(B)}if(-1!==B){u.children.splice(B,1);z.push(u);this._condense(z);break}}A||u.leaf||!c(u,v)?w?(t++,u=w.children[t],A=!1):u=null:(z.push(u),y.push(t),t=0,w=u,u=u.children[0])}return this},toBBox:function(q){return q},compareMinX:g,compareMinY:p,toJSON:function(){return this.data},fromJSON:function(q){this.data=q;return this},_all:function(q,k){for(var u=[];q;)q.leaf?k.push.apply(k,q.children):u.push.apply(u,
q.children),q=u.pop();return k},_build:function(q,k,u,v){var z=u-k+1,y=this._maxEntries;if(z<=y){var t=l(q.slice(k,u+1));d(t,this.toBBox);return t}v||(v=Math.ceil(Math.log(z)/Math.log(y)),y=Math.ceil(z/Math.pow(y,v-1)));t=l([]);t.leaf=!1;t.height=v;z=Math.ceil(z/y);y=z*Math.ceil(Math.sqrt(y));var w;for(x(q,k,u,y,this.compareMinX);k<=u;k+=y){var B=Math.min(k+y-1,u);x(q,k,B,z,this.compareMinY);for(w=k;w<=B;w+=z){var A=Math.min(w+z-1,B);t.children.push(this._build(q,w,A,v-1))}}d(t,this.toBBox);return t},
_chooseSubtree:function(q,k,u,v){for(var z,y,t,w,B,A,D,E;;){v.push(k);if(k.leaf||v.length-1===u)break;D=E=Infinity;z=0;for(y=k.children.length;z<y;z++)t=k.children[z],B=n(t),A=(Math.max(t.maxX,q.maxX)-Math.min(t.minX,q.minX))*(Math.max(t.maxY,q.maxY)-Math.min(t.minY,q.minY))-B,A<E?(E=A,D=B<D?B:D,w=t):A===E&&B<D&&(D=B,w=t);k=w||k.children[0]}return k},_insert:function(q,k,u){var v=this.toBBox;u=u?q:v(q);v=[];var z=this._chooseSubtree(u,this.data,k,v);z.children.push(q);for(h(z,u);0<=k;)if(v[k].children.length>
this._maxEntries)this._split(v,k),k--;else break;this._adjustParentBBoxes(u,v,k)},_split:function(q,k){var u=q[k],v=u.children.length,z=this._minEntries;this._chooseSplitAxis(u,z,v);v=this._chooseSplitIndex(u,z,v);v=l(u.children.splice(v,u.children.length-v));v.height=u.height;v.leaf=u.leaf;d(u,this.toBBox);d(v,this.toBBox);k?q[k-1].children.push(v):this._splitRoot(u,v)},_splitRoot:function(q,k){this.data=l([q,k]);this.data.height=q.height+1;this.data.leaf=!1;d(this.data,this.toBBox)},_chooseSplitIndex:function(q,
k,u){var v,z;var y=z=Infinity;for(v=k;v<=u-k;v++){var t=r(q,0,v,this.toBBox);var w=r(q,v,u,this.toBBox);var B=Math.max(0,Math.min(t.maxX,w.maxX)-Math.max(t.minX,w.minX))*Math.max(0,Math.min(t.maxY,w.maxY)-Math.max(t.minY,w.minY));t=n(t)+n(w);if(B<y){y=B;var A=v;z=t<z?t:z}else B===y&&t<z&&(z=t,A=v)}return A},_chooseSplitAxis:function(q,k,u){var v=q.leaf?this.compareMinX:g,z=q.leaf?this.compareMinY:p,y=this._allDistMargin(q,k,u,v);k=this._allDistMargin(q,k,u,z);y<k&&q.children.sort(v)},_allDistMargin:function(q,
k,u,v){q.children.sort(v);v=this.toBBox;var z=r(q,0,k,v),y=r(q,u-k,u,v),t=e(z)+e(y),w;for(w=k;w<u-k;w++){var B=q.children[w];h(z,q.leaf?v(B):B);t+=e(z)}for(w=u-k-1;w>=k;w--)B=q.children[w],h(y,q.leaf?v(B):B),t+=e(y);return t},_adjustParentBBoxes:function(q,k,u){for(;0<=u;u--)h(k[u],q)},_condense:function(q){for(var k=q.length-1,u;0<=k;k--)0===q[k].children.length?0<k?(u=q[k-1].children,u.splice(u.indexOf(q[k]),1)):this.clear():d(q[k],this.toBBox)},_initFormat:function(q){var k=["return a"," - b",
";"];this.compareMinX=new Function("a","b",k.join(q[0]));this.compareMinY=new Function("a","b",k.join(q[1]));this.toBBox=new Function("a","return {minX: a"+q[0]+", minY: a"+q[1]+", maxX: a"+q[2]+", maxY: a"+q[3]+"};")}};b.rbush=f})},"esri/chunks/quickselect":function(){define(["exports"],function(b){function a(r,h,g,p,n){for(;p>g;){if(600<p-g){var e=p-g+1,c=h-g+1,m=Math.log(e),l=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*l*(e-l)/e)*(0>c-e/2?-1:1);a(r,h,Math.max(g,Math.floor(h-c*l/e+m)),Math.min(p,Math.floor(h+
(e-c)*l/e+m)),n)}e=r[h];c=g;l=p;f(r,g,h);for(0<n(r[p],e)&&f(r,g,p);c<l;){f(r,c,l);c++;for(l--;0>n(r[c],e);)c++;for(;0<n(r[l],e);)l--}0===n(r[g],e)?f(r,g,l):(l++,f(r,l,p));l<=h&&(g=l+1);h<=l&&(p=l-1)}}function f(r,h,g){var p=r[h];r[h]=r[g];r[g]=p}function d(r,h){return r<h?-1:r>h?1:0}b.quickselect=function(r,h,g,p,n){a(r,h,g||0,p||r.length-1,n||d)}})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(b,a,f,d,r,h){class g{constructor(p,n){this.key=new h(0,0,0,0);this.bounds=d.create();this.objectIds=new Set;this.key.set(n);n=p.getLODInfoAt(this.key);this.tileInfoView=p;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=n.resolution;this.level=n.level;this.scale=n.scale;this.minScale=p.zoomToScale(n.level-1);this.maxScale=p.zoomToScale(n.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return f.fromBounds(this.bounds,
this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(p){return{$view:{scale:this.scale,timeZone:p}}}createChildTiles(){const p=this.key.getChildKeys(),n=a.acquire();for(let e=0;e<p.length;e++)n[e]=new g(this.tileInfoView,p[e]);return n}getQuantizationParameters(){return r.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,
extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}b.Tile=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/support/util":function(){define(["exports","../../../../core/jsonMap","../../engine/webgl/effects/highlight/HighlightGradient","../../engine/webgl/effects/highlight/MultiHighlightGradient","../../engine/webgl/shaderGraph/techniques/featureTechniqueUtils"],
function(b,a,f,d,r){const h=new a.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});b.analyzeRings=function(g,p,n){const e=[],c=[];let m=0,l=0;for(const x of g){g=l;let q=x[0][0],k=x[0][1];e[l++]=q;e[l++]=k;let u=0;for(let v=1;v<x.length;++v){const z=q,y=k;q=x[v][0];k=x[v][1];u+=k*z-q*y;e[l++]=q;e[l++]=k}p(u/2);0<u?(0<g-m&&(n(m,g,e,c),m=g),c.length=0):0>u?0<g-m?c.push(.5*
(g-m)):l=g:l=g}0<l-m&&n(m,l,e,c)};b.canUseMajorityInterpolationOnDataSource=function(g){const {bandCount:p,attributeTable:n,colormap:e,pixelType:c}=g.raster.rasterInfo;return 1===p&&(null!=n||null!=e||"u8"===c||"s8"===c)};b.createOrReuseHighlightGradient=function(g,p){if(null==p)return g?.destroy(),null;"single"===g?.type&&Array.isArray(p)&&(g.destroy(),g=null);"multi"!==g?.type||Array.isArray(p)||(g.destroy(),g=null);g||=Array.isArray(p)?new d.MultiHighlightGradient:new f;Array.isArray(p)?"multi"===
g.type&&g.setHighlightOptions(p):"single"===g.type&&g.setHighlightOptions(p);return g};b.renderHighlight=function(g,p,n,e){const {painter:c,highlightGradient:m}=g,{highlight:l}=c.effects;if(m){var x=g.passOptions,q=m.getReasonsWithGradients();for(let u=0;u<q.length;u++){var k={...g,passOptions:{type:"highlight",activeGradient:null!=e?q[e].activeGradient:q[u].activeGradient,activeReasons:q[u].activeReasons,stepType:"burn",highlightAll:p}};l.bind(k);n(k);if(u<q.length-1){k=0;for(let v=u+1;v<q.length;v++)k|=
q[v].activeReasons;n({...g,passOptions:{type:"highlight",activeGradient:null!=e?q[e].activeGradient:q[u].activeGradient,activeReasons:k,stepType:"clear",highlightAll:p}})}k={...g,passOptions:{type:"highlight",activeGradient:null!=e?q[e].activeGradient:q[u].activeGradient,activeReasons:q[u].activeReasons,stepType:"draw",highlightAll:p}};c.setPipelineState(r.getFeaturePipelineState(g));c.updatePipelineState(g.context);l.draw(k);l.unbind()}g.passOptions=x}};b.toJSONGeometryType=function(g){return h.toJSON(g)};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/effects/highlight/HighlightGradient":function(){define("../../../../../../core/Logger ../../definitions ./parameters ../../../../support/HighlightOptions ../../../../../webgl/enums ../../../../../webgl/Texture ../../../../../webgl/TextureDescriptor".split(" "),function(b,a,f,d,r,h,g){function p(m,l){l.fillColor[0]=m.color.r/255;l.fillColor[1]=m.color.g/255;l.fillColor[2]=m.color.b/255;l.fillColor[3]=m.color.a;
m.haloColor?(l.outlineColor[0]=m.haloColor.r/255,l.outlineColor[1]=m.haloColor.g/255,l.outlineColor[2]=m.haloColor.b/255,l.outlineColor[3]=m.haloColor.a):(l.outlineColor[0]=l.fillColor[0],l.outlineColor[1]=l.fillColor[1],l.outlineColor[2]=l.fillColor[2],l.outlineColor[3]=l.fillColor[3]);l.fillColor[3]*=m.fillOpacity;l.outlineColor[3]*=m.haloOpacity;l.fillColor[0]*=l.fillColor[3];l.fillColor[1]*=l.fillColor[3];l.fillColor[2]*=l.fillColor[3];l.outlineColor[0]*=l.outlineColor[3];l.outlineColor[1]*=l.outlineColor[3];
l.outlineColor[2]*=l.outlineColor[3];l.outlineWidth=(1-m.haloBlur)*m.haloWidth;l.outerHaloWidth=m.haloBlur*m.haloWidth/2;l.innerHaloWidth=m.haloBlur*m.haloWidth/2;l.outlinePosition=0}const n=()=>b.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),e=[0,0,0,0];class c{constructor(){this.type="single";this._highlightOptions=new d;this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0};this._optionsShadeTexKey=
"";this._texelData=new Uint8Array(4*f.shadeTextureSize);this._minMaxDistance=[0,0]}setHighlightOptions(m){this._highlightOptions=m}applyHighlightOptions(m,l){this._updateGradientTexture(m);m.bindTexture(this._shadeTex,a.textureBindingHighlight1);l.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose();this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<a.maxHighlightReasons)-1,activeGradient:this}]}_updateGradientTexture(m){function l(w,B,A){t[0]=
(1-A)*w[0]+A*B[0];t[1]=(1-A)*w[1]+A*B[1];t[2]=(1-A)*w[2]+A*B[2];t[3]=(1-A)*w[3]+A*B[3]}var {optionsKey:x}=this._highlightOptions;if(x!==this._optionsShadeTexKey){this._optionsShadeTexKey=x;p(this._highlightOptions,this._convertedHighlightOptions);x=this._convertedHighlightOptions;var q=x.outlinePosition-x.outlineWidth/2-x.outerHaloWidth,k=x.outlinePosition-x.outlineWidth/2,u=x.outlinePosition+x.outlineWidth/2,v=x.outlinePosition+x.outlineWidth/2+x.innerHaloWidth,z=Math.sqrt(Math.PI/2)*f.sigma,y=Math.abs(q)>
z?Math.round(10*(Math.abs(q)-z))/10:0;z=Math.abs(v)>z?Math.round(10*(Math.abs(v)-z))/10:0;y&&!z?n().error("The outer rim of the highlight is "+y+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!y&&z?n().error("The inner rim of the highlight is "+z+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):y&&z&&n().error("The highlight is "+
Math.max(y,z)+"px away from the edge of the feature; consider reducing some width values.");var t=[void 0,void 0,void 0,void 0];({_texelData:z}=this);for(let w=0;w<f.shadeTextureSize;++w)y=q+w/(f.shadeTextureSize-1)*(v-q),y<q?(t[0]=0,t[1]=0,t[2]=0,t[3]=0):y<k?l(e,x.outlineColor,(y-q)/(k-q)):y<u?[t[0],t[1],t[2],t[3]]=x.outlineColor:y<v?l(x.outlineColor,x.fillColor,(y-u)/(v-u)):[t[0],t[1],t[2],t[3]]=x.fillColor,z[4*w]=255*t[0],z[4*w+1]=255*t[1],z[4*w+2]=255*t[2],z[4*w+3]=255*t[3];this._minMaxDistance[0]=
q;this._minMaxDistance[1]=v;this._shadeTex||(x=new g.TextureDescriptor,x.wrapMode=r.TextureWrapMode.CLAMP_TO_EDGE,x.width=f.shadeTextureSize,x.height=1,this._shadeTex=new h.Texture(m,x));this._shadeTex.updateData(0,0,0,f.shadeTextureSize,1,this._texelData)}}}return c})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(b){b.AttributeDataType=void 0;var a=b.AttributeDataType||(b.AttributeDataType={});a[a.FilterFlags=0]="FilterFlags";a[a.Animation=1]="Animation";a[a.GPGPU=
2]="GPGPU";a[a.VV=3]="VV";a[a.DD0=4]="DD0";a[a.DD1=5]="DD1";a[a.DD2=6]="DD2";a[a.LocalTimeOrigin=7]="LocalTimeOrigin";b.MAX_TILE_RESHUFFLES_PER_FRAME=1;b.RESHUFFLING_EXEMPT_DRAW_CALLS=10;b.RESHUFFLING_EXEMPT_MEMORY_BYTES=1048576;b.RESHUFFLING_TARGET_DRAW_EFFICIENCY=.75;b.RESHUFFLING_TARGET_MEMORY_EFFICIENCY=.75;b.angleFactor256=256/360;b.animationUnit=2;b.attributeStoreInitialSize=256;b.attributeStoreTextureSize=1024;b.averageGlyphMosaicItem={metrics:{width:15,height:17,left:0,top:-7,advance:14}};
b.backbufferStencilClipped=1;b.backbufferStencilVisible=0;b.bitsetFillHasPatternHeightPrecisionFactor=32;b.bitsetFillHasPatternWidthPrecisionFactor=64;b.bitsetFillHasUnresolvedReplacementColor=8;b.bitsetFillRandomPatternOffset=4;b.bitsetGenericConsiderAlphaOnly=16;b.bitsetGenericLockColor=2;b.bitsetLineScaleDash=4;b.bitsetMarkerAlignmentMap=1;b.bitsetMarkerAlignmentScreen=0;b.bitsetMarkerOutlineAllowColorOverride=4;b.bitsetMarkerScaleSymbolsProportionally=8;b.bitsetTypeFillOutline=1;b.bufferDataMinimumSize=
128;b.bufferDataPoolSize=4;b.chartMaxFields=10;b.collisionBoxPadding=16;b.collisionBucketSize=128;b.collisionEarlyRejectBucketSize=16;b.collisionMaxZoomDelta=1;b.collisionPlacementPadding=8;b.collisionTileBoxSize=4;b.compressionFactorForU16=128;b.dataDrivenUnit0=4;b.dataDrivenUnit1=5;b.dataDrivenUnit2=6;b.debugLabels=!1;b.defaultSdfTextureSize=128;b.displayRecordIntPerElement=8;b.dotDensityMaxFields=8;b.effectFlag0=128;b.enableEarlyLabelDiscard=!1;b.extrudeScale=64;b.filterFlag0=64;b.filterFlagsUnit=
1;b.glyphSize=24;b.gpgpuUnit=12;b.heuristicGlyphsPerFeature=10;b.heuristicGlyphsPerLine=50;b.hittestSmallSymbolThreshold=3;b.hittestToleranceDesktop=1;b.hittestToleranceMobile=3;b.hittestToleranceSmallSymbol=3;b.labelPlacementOffsetPadding=4;b.localTimeOriginUnit=13;b.magicLabelLineHeight=29;b.maxGeohashLevel=12;b.maxGpuUploadsPerFrame=2;b.maxHighlightReasons=6;b.maxRepresentableInt=16777216;b.maxTextLineWidth=512;b.minMaxZoomPrecisionFactor=10;b.minTextLineWidth=32;b.nanMagicNumber=1E-30;b.patchPixelBufferAllocSize=
500;b.patternFillRasterizationScale=2;b.pictureFillColor=4294967295;b.randomInsidePolygonTextureSize=1024;b.rasterTileSize=256;b.rasterizedVectorMarkerMinSize=128;b.spritePadding=2;b.svgSdfTextureInnerSize=252;b.svgSdfTextureSize=256;b.textureBindingBitmap=0;b.textureBindingGlyphAtlas=0;b.textureBindingHighlight0=5;b.textureBindingHighlight1=6;b.textureBindingRenderer0=5;b.textureBindingRenderer1=6;b.textureBindingSpriteAtlas=0;b.textureUploadManagerBudget=4;b.textureUploadManagerChunkSize=128;b.thinLineHalfWidthThreshold=
1.05;b.tileSize=512;b.visualVariableUnit=3;b.vtlHighResCutoff=1.15;b.vtlTextureBindingUnitGlyphs=6;b.vtlTextureBindingUnitSprites=5;b.webglMaxInnerStops=6;b.webglMaxStops=8;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/effects/highlight/parameters":function(){define(["exports"],function(b){b.alphaToRgbaChannelSelectorMatrix=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1];b.rgbaToRgbaChannelSelectorMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.shadeTextureSize=256;b.sigma=
1;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../support/HighlightOptions".split(" "),function(b,a,f,d,r,h,g){var p;f=p=class extends g{constructor(n){super(n);this.haloWidth=2.1;this.haloBlur=.8/this.haloWidth}equals(n){return super.equals(n)&&
this.haloWidth===n.haloWidth&&this.haloBlur===n.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){return new p({color:this.color.clone(),haloColor:this.haloColor?.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};b.__decorate([a.property()],f.prototype,"haloWidth",void 0);b.__decorate([a.property()],f.prototype,"haloBlur",void 0);return f=
p=b.__decorate([h.subclass("esri.views.2d.support.HighlightOptions")],f)})},"esri/views/support/HighlightOptions":function(){define("../../chunks/tslib.es6 ../../Color ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./HighlightDefaults".split(" "),function(b,a,f,d,r,h,g,p,n){f=class extends f{constructor(e){super(e);this.color=n.defaultColor.clone();this.haloOpacity=n.defaultHaloOpacity;
this.fillOpacity=n.defaultFillOpacity}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};b.__decorate([d.property({type:a})],f.prototype,"color",void 0);b.__decorate([d.property({type:a})],f.prototype,"haloColor",void 0);b.__decorate([d.property()],f.prototype,"haloOpacity",void 0);b.__decorate([d.property()],f.prototype,"fillOpacity",void 0);return f=b.__decorate([p.subclass("esri.views.support.HighlightOptions")],
f)})},"esri/views/support/HighlightDefaults":function(){define(["exports","../../Color"],function(b,a){const f=new a("cyan"),d=new a("black");a=new a("yellow");b.defaultColor=f;b.defaultFillOpacity=.25;b.defaultHaloOpacity=1;b.defaultHighlightName="default";b.defaultOccludedFactor=.25;b.defaultShadowColor=d;b.defaultShadowDifference=.2;b.defaultShadowOpacity=.4;b.maximumHighlights=8;b.temporaryHighlightColor=a;b.temporaryHighlightName="temporary";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/enums":function(){define(["exports"],function(b){b.FramebufferBit=void 0;(function(a){a[a.DEPTH=256]="DEPTH";a[a.STENCIL=1024]="STENCIL";a[a.COLOR=16384]="COLOR"})(b.FramebufferBit||(b.FramebufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType=
{}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=
32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]="MIN";a[a.MAX=32776]="MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]=
"ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER";a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(b.BufferType||(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));
b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT";a[a.HALF_FLOAT=5131]="HALF_FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]=
"EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;
(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||
(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";
a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=
36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";
a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";
a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";
a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=
5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]=
"STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]=
"DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||
(b.FramebufferTarget={}));b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";a[a.TransformFeedback=7]="TransformFeedback";a[a.Sync=8]="Sync";a[a.UNCOUNTED=9]="UNCOUNTED";a[a.LinesOfCode=9]="LinesOfCode";a[a.Uniform=10]="Uniform";a[a.COUNT=11]="COUNT"})(b.ResourceType||(b.ResourceType=
{}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=
36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]="NONE";a[a.BACK=1029]="BACK"})(b.SpecialDrawBuffers||(b.SpecialDrawBuffers=
{}));b.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";
a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||
(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=
35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";
a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=
36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";
a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=
void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.DepthStencilAttachment=33306;b.baseTextureUnit=33984;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Texture":function(){define("exports ../../core/Error ../../core/has ./checkWebGLError ./enums ./GLObjectType ./TextureDescriptor ./ValidatedTextureDescriptor".split(" "),function(b,a,f,d,r,h,g,p){function n(u){(null!=u.width&&0>u.width||null!=u.height&&0>u.height||
null!=u.depth&&0>u.depth)&&console.error("Negative dimension parameters are not allowed!")}function e(u,v){let z=v.samplingMode,y=v.samplingMode;if(z===r.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||z===r.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)z=r.TextureSamplingMode.LINEAR,v.hasMipmap||(y=r.TextureSamplingMode.LINEAR);else if(z===r.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||z===r.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)z=r.TextureSamplingMode.NEAREST,v.hasMipmap||(y=r.TextureSamplingMode.NEAREST);
u.texParameteri(v.target,u.TEXTURE_MAG_FILTER,z);u.texParameteri(v.target,u.TEXTURE_MIN_FILTER,y)}function c(u,v){"number"===typeof v.wrapMode?(u.texParameteri(v.target,u.TEXTURE_WRAP_S,v.wrapMode),u.texParameteri(v.target,u.TEXTURE_WRAP_T,v.wrapMode)):(u.texParameteri(v.target,u.TEXTURE_WRAP_S,v.wrapMode.s),u.texParameteri(v.target,u.TEXTURE_WRAP_T,v.wrapMode.t))}function m(u,v){const z=u.capabilities.textureFilterAnisotropic;z&&u.gl.texParameterf(v.target,z.TEXTURE_MAX_ANISOTROPY,v.maxAnisotropy??
1)}function l(u){return null!=u&&"type"in u&&"compressed"===u.type}function x(u){return null!=u&&!l(u)&&!(null!=u&&"byteLength"in u)}function q(u){return u===r.TextureType.TEXTURE_3D||u===r.TextureType.TEXTURE_2D_ARRAY}function k(u,v,z,y=1){v=Math.max(v,z);u===r.TextureType.TEXTURE_3D&&(v=Math.max(v,y));return Math.round(Math.log(v)/Math.LN2)+1}f=class u{constructor(v,z=null,y=null){this.type=h.GLObjectType.Texture;this._glName=null;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=
!1;if("context"in v)this._descriptor=v,y=z;else{v=p.ValidatedTextureDescriptor.validate(v,z);if(!v)throw new a("Texture descriptor invalid");this._descriptor=v}this._descriptor.target===r.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(y):this.setData(y)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return g.estimateMemory(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(r.ResourceType.Texture,
this);this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(v,z){const y=this._descriptor;if(y.width!==v||y.height!==z){if(this._wasImmutablyAllocated)throw new a("Immutable textures can't be resized!");y.width=v;y.height=z;this._descriptor.target===r.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(v=null){for(let z=
r.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;z<=r.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;z++)this._setData(v,z)}setData(v){this._setData(v)}_setData(v,z){const y=this._descriptor.context?.gl;if(y){d.checkWebGLError(y);this._glName||(this._glName=y.createTexture())&&this._descriptor.context.instanceCounter.increment(r.ResourceType.Texture,this);var t=this._descriptor,w=z??t.target,B=q(w);z=this._descriptor.context.bindTexture(this,u.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(u.TEXTURE_UNIT_FOR_UPDATES);
n(t);this._configurePixelStorage();d.checkWebGLError(y);var A=this._deriveInternalFormat();if(x(v)){let D="width"in v?v.width:v.codedWidth,E="height"in v?v.height:v.codedHeight;v instanceof HTMLVideoElement&&(D=v.videoWidth,E=v.videoHeight);t.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(w,A,t.hasMipmap,D,E,1);this._texImage(w,0,A,D,E,1,v);d.checkWebGLError(y);t.hasMipmap&&(this.generateMipmap(),d.checkWebGLError(y));t.width||(t.width=D);t.height||(t.height=E);B&&!t.depth&&(t.depth=
1)}else{const {width:D,height:E,depth:I}=t;if(null==D||null==E)throw new a("Width and height must be specified!");if(B&&null==I)throw new a("Depth must be specified!");t.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(w,A,t.hasMipmap,D,E,I);if(l(v)){const O=v.levels;v=k(w,D,E,I);v=Math.min(v-1,O.length-1);y.texParameteri(t.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,v);if(!(A in r.CompressedTextureFormat))throw new a("Attempting to use compressed data with an uncompressed format!");
this._forEachMipmapLevel((U,W,K,P)=>{this._compressedTexImage(w,U,A,W,K,P,O[Math.min(U,O.length-1)])},v)}else this._texImage(w,0,A,D,E,I,v),d.checkWebGLError(y),t.hasMipmap&&this.generateMipmap()}e(y,this._descriptor);c(y,this._descriptor);m(this._descriptor.context,this._descriptor);d.checkWebGLError(y);this._descriptor.context.bindTexture(z,u.TEXTURE_UNIT_FOR_UPDATES)}}updateData(v,z,y,t,w,B,A=0){B||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
var D=this._descriptor;const E=this._deriveInternalFormat(),{context:I,pixelFormat:O,dataType:U,target:W,isImmutable:K}=D;if(K&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");const P=I.bindTexture(this,u.TEXTURE_UNIT_FOR_UPDATES,!0);(0>z||0>y||z+t>D.width||y+w>D.height)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();({gl:D}=I);A&&D.pixelStorei(D.UNPACK_SKIP_ROWS,A);x(B)?D.texSubImage2D(W,v,z,y,t,w,
O,U,B):l(B)?D.compressedTexSubImage2D(W,v,z,y,t,w,E,B.levels[v]):D.texSubImage2D(W,v,z,y,t,w,O,U,B);A&&D.pixelStorei(D.UNPACK_SKIP_ROWS,0);I.bindTexture(P,u.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(v,z,y,t,w,B,A,D){D||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var E=this._descriptor;const I=this._deriveInternalFormat(),{context:O,pixelFormat:U,dataType:W,isImmutable:K,target:P}=E;if(K&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");
q(P)||console.warn("Attempting to set 3D texture data on a non-3D texture");const T=O.bindTexture(this,u.TEXTURE_UNIT_FOR_UPDATES);O.setActiveTexture(u.TEXTURE_UNIT_FOR_UPDATES);(0>z||0>y||0>t||z+w>E.width||y+B>E.height||t+A>E.depth)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();({gl:E}=O);l(D)?(D=D.levels[v],E.compressedTexSubImage3D(P,v,z,y,t,w,B,A,I,D)):E.texSubImage3D(P,v,z,y,t,w,B,A,U,W,D);O.bindTexture(T,u.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const v=
this._descriptor;if(!v.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot add mipmaps to immutable texture after allocation");this._samplingModeDirty=v.hasMipmap=!0;n(v)}v.samplingMode===r.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,v.samplingMode=r.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):v.samplingMode===r.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,v.samplingMode=r.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);const z=this._descriptor.context.bindTexture(this,
u.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(u.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(v.target);this._descriptor.context.bindTexture(z,u.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const v=this._descriptor;if(v.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot delete mipmaps to immutable texture after allocation");v.hasMipmap=!1;this._samplingModeDirty=!0;n(v)}v.samplingMode===r.TextureSamplingMode.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=
!0,v.samplingMode=r.TextureSamplingMode.LINEAR):v.samplingMode===r.TextureSamplingMode.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,v.samplingMode=r.TextureSamplingMode.NEAREST)}setSamplingMode(v){v!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=v,this._samplingModeDirty=!0)}setWrapMode(v){v!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=v,n(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const v=this._descriptor,z=v.context.gl;this._samplingModeDirty&&(e(z,
v),this._samplingModeDirty=!1);this._wrapModeDirty&&(c(z,v),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===r.PixelFormat.DEPTH_STENCIL&&(this._descriptor.internalFormat=r.PixelFormat.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case r.PixelType.FLOAT:switch(this._descriptor.pixelFormat){case r.PixelFormat.RGBA:return this._descriptor.internalFormat=r.SizedPixelFormat.RGBA32F;case r.PixelFormat.RGB:return this._descriptor.internalFormat=
r.SizedPixelFormat.RGB32F;default:throw new a("Unable to derive format");}case r.PixelType.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case r.PixelFormat.RGBA:return this._descriptor.internalFormat=r.SizedPixelFormat.RGBA8;case r.PixelFormat.RGB:return this._descriptor.internalFormat=r.SizedPixelFormat.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===r.PixelFormat.DEPTH_STENCIL?r.PixelFormat.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const v=
this._descriptor.context.gl,{unpackAlignment:z,flipped:y,preMultiplyAlpha:t}=this._descriptor;v.pixelStorei(v.UNPACK_ALIGNMENT,z);v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,y?1:0);v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t?1:0)}_texStorage(v,z,y,t,w,B){const {gl:A}=this._descriptor.context;if(!(z in r.SizedPixelFormat))throw new a("Immutable textures must have a sized internal format");if(this._descriptor.isImmutable){y=y?k(v,t,w,B):1;if(q(v)){if(null==B)throw new a("Missing depth dimension for 3D texture upload");
A.texStorage3D(v,y,z,t,w,B)}else A.texStorage2D(v,y,z,t,w);this._wasImmutablyAllocated=!0}}_texImage(v,z,y,t,w,B,A){const D=this._descriptor.context.gl,E=q(v),{isImmutable:I,pixelFormat:O,dataType:U}=this._descriptor;if(I){if(null!=A)if(E){if(null==B)throw new a("Missing depth dimension for 3D texture upload");D.texSubImage3D(v,z,0,0,0,t,w,B,O,U,A)}else D.texSubImage2D(v,z,0,0,t,w,O,U,A)}else if(E){if(null==B)throw new a("Missing depth dimension for 3D texture upload");D.texImage3D(v,z,y,t,w,B,0,
O,U,A)}else D.texImage2D(v,z,y,t,w,0,O,U,A)}_compressedTexImage(v,z,y,t,w,B,A){const D=this._descriptor.context.gl,E=q(v);if(this._descriptor.isImmutable){if(null!=A)if(E){if(null==B)throw new a("Missing depth dimension for 3D texture upload");D.compressedTexSubImage3D(v,z,0,0,0,t,w,B,y,A)}else D.compressedTexSubImage2D(v,z,0,0,t,w,y,A)}else if(E){if(null==B)throw new a("Missing depth dimension for 3D texture upload");D.compressedTexImage3D(v,z,y,t,w,B,0,A)}else D.compressedTexImage2D(v,z,y,t,w,0,
A)}_forEachMipmapLevel(v,z=Infinity){let {width:y,height:t,depth:w,hasMipmap:B,target:A}=this._descriptor;const D=A===r.TextureType.TEXTURE_3D;if(null==y||null==t||D&&null==w)throw new a("Missing texture dimensions for mipmap calculation");for(let E=0;;++E){v(E,y,t,w);if(!B||1===y&&1===t&&(!D||1===w)||E>=z)break;y=Math.max(1,y>>1);t=Math.max(1,t>>1);D&&(w=Math.max(1,w>>1))}}};f.TEXTURE_UNIT_FOR_UPDATES=0;b.Texture=f;b.tracer=null;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/checkWebGLError":function(){define(["exports",
"../../core/Error","../../core/has","../../core/Logger"],function(b,a,f,d){function r(g,p){switch(p){case g.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case g.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case g.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case g.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";
case g.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case g.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const h=!!f("enable-feature:webgl-debug");b.checkWebGLError=function(g){if(h){var p=g.getError();p&&(g=r(g,p),p=Error().stack,d.getLogger("esri.views.webgl.checkWebGLError").error(new a("webgl-error","WebGL error occurred",{message:g,stack:p})))}};b.hasFeatureFlagWebGLDebug=h;b.webglDebugEnabled=function(){return h};
b.webglValidateShadersEnabled=function(){return h};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/GLObjectType":function(){define(["exports"],function(b){b.GLObjectType=void 0;var a=b.GLObjectType||(b.GLObjectType={});a[a.Texture=0]="Texture";a[a.RenderBuffer=1]="RenderBuffer";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/TextureDescriptor":function(){define(["exports","./enums","./Util"],function(b,a,f){class d{constructor(r=
0,h=r){this.width=r;this.height=h;this.target=a.TextureType.TEXTURE_2D;this.pixelFormat=a.PixelFormat.RGBA;this.dataType=a.PixelType.UNSIGNED_BYTE;this.samplingMode=a.TextureSamplingMode.LINEAR;this.wrapMode=a.TextureWrapMode.REPEAT;this.maxAnisotropy=1;this.isOpaque=this.hasMipmap=this.flipped=!1;this.unpackAlignment=4;this.preMultiplyAlpha=!1;this.depth=1;this.isImmutable=!1}}b.TextureDescriptor=d;b.estimateMemory=function(r){return 0>=r.width||0>=r.height?0:Math.round(r.width*r.height*(r.hasMipmap?
4/3:1)*(null==r.internalFormat?4:f.getBytesPerElementFormat(r.internalFormat))*(r.target===a.TextureType.TEXTURE_CUBE_MAP?6:1))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","./checkWebGLError","./enums","./getDataTypeBytes"],function(b,a,f,d,r){function h(p){p=p.gl;switch(p.getError()){case p.NO_ERROR:return null;case p.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";
case p.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case p.INVALID_OPERATION:return"The specified command is not allowed for the current state";case p.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case p.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case p.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function g(p){return p[0].stride}b.bindVertexBufferLayout=function(p,
n,e,c,m=0){const l=p.gl;p.bindBuffer(e);for(const q of c)if(c=n.get(q.name),null==c)console.warn(`There is no location for vertex attribute '${q.name}' defined.`);else{e=m*q.stride;if(4>=q.count)l.vertexAttribPointer(c,q.count,q.type,q.normalized,q.stride,q.offset+e),l.enableVertexAttribArray(c),0<q.divisor&&p.gl.vertexAttribDivisor(c,q.divisor);else if(9===q.count)for(var x=0;3>x;x++)l.vertexAttribPointer(c+x,3,q.type,q.normalized,q.stride,q.offset+12*x+e),l.enableVertexAttribArray(c+x),0<q.divisor&&
p.gl.vertexAttribDivisor(c+x,q.divisor);else if(16===q.count)for(x=0;4>x;x++)l.vertexAttribPointer(c+x,4,q.type,q.normalized,q.stride,q.offset+16*x+e),l.enableVertexAttribArray(c+x),0<q.divisor&&p.gl?.vertexAttribDivisor(c+x,q.divisor);else console.error("Unsupported vertex attribute element count: "+q.count);if(f.webglDebugEnabled()){c=h(p);x=r.getDataTypeBytes(q.type);const k=q.offset;x=Math.round(x/k)!==x/k?`. Offset not a multiple of stride. DataType requires ${x} bytes, but descriptor has an offset of ${k}`:
"";c&&console.error(`Unable to bind vertex attribute "${q.name}" with baseInstanceOffset ${e}${x}:`,c,q)}}};b.getBytesPerElementFormat=function(p){switch(p){case d.PixelFormat.ALPHA:case d.PixelFormat.LUMINANCE:case d.PixelFormat.RED:case d.PixelFormat.RED_INTEGER:case d.SizedPixelFormat.R8:case d.SizedPixelFormat.R8I:case d.SizedPixelFormat.R8UI:case d.SizedPixelFormat.R8_SNORM:case d.RenderbufferFormat.STENCIL_INDEX8:return 1;case d.PixelFormat.LUMINANCE_ALPHA:case d.PixelFormat.RG:case d.PixelFormat.RG_INTEGER:case d.SizedPixelFormat.RGBA4:case d.SizedPixelFormat.R16F:case d.SizedPixelFormat.R16I:case d.SizedPixelFormat.R16UI:case d.SizedPixelFormat.RG8:case d.SizedPixelFormat.RG8I:case d.SizedPixelFormat.RG8UI:case d.SizedPixelFormat.RG8_SNORM:case d.SizedPixelFormat.RGB565:case d.SizedPixelFormat.RGB5_A1:case d.RenderbufferFormat.DEPTH_COMPONENT16:return 2;
case d.PixelFormat.DEPTH_COMPONENT:case d.PixelFormat.RGB:case d.PixelFormat.RGB_INTEGER:case d.SizedPixelFormat.RGB8:case d.SizedPixelFormat.RGB8I:case d.SizedPixelFormat.RGB8UI:case d.SizedPixelFormat.RGB8_SNORM:case d.SizedPixelFormat.SRGB8:case d.RenderbufferFormat.DEPTH_COMPONENT24:return 3;case d.PixelFormat.DEPTH_STENCIL:case d.PixelFormat.DEPTH24_STENCIL8:case d.PixelFormat.RGBA:case d.PixelFormat.RGBA_INTEGER:case d.SizedPixelFormat.RGBA8:case d.SizedPixelFormat.R32F:case d.SizedPixelFormat.R11F_G11F_B10F:case d.SizedPixelFormat.RG16F:case d.SizedPixelFormat.R32I:case d.SizedPixelFormat.R32UI:case d.SizedPixelFormat.RG16I:case d.SizedPixelFormat.RG16UI:case d.SizedPixelFormat.RGBA8I:case d.SizedPixelFormat.RGBA8UI:case d.SizedPixelFormat.RGBA8_SNORM:case d.SizedPixelFormat.SRGB8_ALPHA8:case d.SizedPixelFormat.RGB9_E5:case d.SizedPixelFormat.RGB10_A2UI:case d.SizedPixelFormat.RGB10_A2:case d.RenderbufferFormat.DEPTH_STENCIL:case d.RenderbufferFormat.DEPTH_COMPONENT32F:case d.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case d.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case d.SizedPixelFormat.RGB16F:case d.SizedPixelFormat.RGB16I:case d.SizedPixelFormat.RGB16UI:return 6;case d.SizedPixelFormat.RG32F:case d.SizedPixelFormat.RG32I:case d.SizedPixelFormat.RG32UI:case d.SizedPixelFormat.RGBA16F:case d.SizedPixelFormat.RGBA16I:case d.SizedPixelFormat.RGBA16UI:return 8;case d.SizedPixelFormat.RGB32F:case d.SizedPixelFormat.RGB32I:case d.SizedPixelFormat.RGB32UI:return 12;case d.SizedPixelFormat.RGBA32F:case d.SizedPixelFormat.RGBA32I:case d.SizedPixelFormat.RGBA32UI:return 16;
case d.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case d.CompressedTextureFormat.COMPRESSED_R11_EAC:case d.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case d.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case d.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case d.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case d.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case d.CompressedTextureFormat.COMPRESSED_RG11_EAC:case d.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case d.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case d.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0};b.getErrorString=h;b.getStride=g;b.unbindVertexBufferLayout=function(p,n,e,c){const m=p.gl;p.bindBuffer(e);for(const l of c)if(e=n.get(l.name),4>=l.count)m.disableVertexAttribArray(e),l.divisor&&0<l.divisor&&p.gl?.vertexAttribDivisor(e,0);else if(9===l.count)for(c=
0;3>c;c++)m.disableVertexAttribArray(e+c),l.divisor&&0<l.divisor&&p.gl?.vertexAttribDivisor(e+c,0);else if(16===l.count)for(c=0;4>c;c++)m.disableVertexAttribArray(e+c),l.divisor&&0<l.divisor&&p.gl?.vertexAttribDivisor(e+c,0);else console.error("Unsupported vertex attribute element count: "+l.count);p.unbindBuffer(d.BufferType.ARRAY_BUFFER)};b.vertexCount=function(p,n){return(p.vertexBuffers.get(n)?.usedMemory??0)/g(p.layout.get(n))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/getDataTypeBytes":function(){define(["exports","./enums"],function(b,a){b.getDataTypeBytes=function(f){switch(f){case a.DataType.BYTE:case a.DataType.UNSIGNED_BYTE:return 1;case a.DataType.SHORT:case a.DataType.UNSIGNED_SHORT:case a.DataType.HALF_FLOAT:return 2;case a.DataType.FLOAT:case a.DataType.INT:case a.DataType.UNSIGNED_INT:return 4}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ValidatedTextureDescriptor":function(){define(["exports",
"./enums","./TextureDescriptor"],function(b,a,f){class d extends f.TextureDescriptor{constructor(r,h){super();this.context=r;Object.assign(this,h);switch(this.internalFormat){case a.SizedPixelFormat.R16F:case a.SizedPixelFormat.R16I:case a.SizedPixelFormat.R16UI:case a.SizedPixelFormat.R32F:case a.SizedPixelFormat.R32I:case a.SizedPixelFormat.R32UI:case a.SizedPixelFormat.R8_SNORM:case a.SizedPixelFormat.R8:case a.SizedPixelFormat.R8I:case a.SizedPixelFormat.R8UI:this.pixelFormat=a.PixelFormat.RED}}static validate(r,
h){return new d(r,h)}}b.ValidatedTextureDescriptor=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/effects/highlight/MultiHighlightGradient":function(){define(["exports","./HighlightGradient"],function(b,a){class f{constructor(){this.type="multi";this.gradients=[]}setHighlightOptions(d){for(var r=0;r<d.length;r++)this.gradients[r]||(this.gradients[r]=new a),this.gradients[r].setHighlightOptions(d[r].options);for(r=d.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();
this.gradients.length=d.length}destroy(){for(const d of this.gradients)d.destroy()}getReasonsWithGradients(){let d=1;const r=[];for(let h=0;h<this.gradients.length;h++)r.push({activeReasons:d,activeGradient:this.gradients[h]}),d<<=1;return r}}b.MultiHighlightGradient=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils":function(){define(["exports","../../../../../../core/unitUtils","../../definitions","../../enums",
"../../../../../webgl/enums"],function(b,a,f,d,r){function h({pixelRatio:m,state:l,displayLevel:x,requiredLevel:q},k){return{displayMat3:l.displayMat3,displayViewMat3:l.displayViewMat3,displayViewScreenMat3:k.transforms.displayViewScreenMat3,viewMat3:l.viewMat3,tileMat3:k.transforms.tileMat3,displayZoomFactor:1/2**(x-k.key.level),requiredZoomFactor:1/2**(q-k.key.level),tileOffset:[k.x,k.y],currentScale:l.scale,currentZoom:x,metersPerSRUnit:a.getMetersPerUnitForSR(l.spatialReference),rotation:l.rotation,
pixelRatio:m}}function g(m){return"highlight"===m.passOptions?.type}function p(m){return"hittest"===m.passOptions?.type}const n={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:m=>m.stencilRef,compare:r.CompareFunction.EQUAL,mask:255,op:{fail:r.StencilOperation.KEEP,zFail:r.StencilOperation.KEEP,zPass:r.StencilOperation.REPLACE}}}},e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},c={...n,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};
b.getFeaturePipelineState=function(m){return p(m)?e:g(m)&&"clear"===m.passOptions.stepType?c:n};b.getFeatureUniforms=function(m,l){const {attributeView:x,context:q}=m;var k=x.getUniforms(q);l=h(m,l);if(p(m)){var {position:u,distance:v,smallSymbolDistance:z,smallSymbolSizeThreshold:y}=m.passOptions;var t={position:u,distance:v,smallSymbolDistance:z,smallSymbolSizeThreshold:y}}else t=null;if(g(m)){var {activeReasons:w,highlightAll:B}=m.passOptions;m={activeReasons:w,highlightAll:B?1:0}}else m=null;
return{storage:k,view:l,hittestRequest:t,highlight:m}};b.getLocalTileOffset=function(m){const {row:l,col:x}=m.key;m=x*f.tileSize;const q=l*f.tileSize;return{tileOffsetFromLocalOrigin:[m%f.maxRepresentableInt,q%f.maxRepresentableInt],maxIntsToLocalOrigin:[Math.floor(m/f.maxRepresentableInt),Math.floor(q/f.maxRepresentableInt)]}};b.getSelectionDefines=function(m){return{inside:m.selection===d.FeatureSelection.InsideEffect,outside:m.selection===d.FeatureSelection.OutsideEffect}};b.getViewUniforms=h;
b.isHighlight=g;b.isHittest=p;b.resolveDynamicUniforms=function(m,l,x){const q={};for(const k in x)q[k]=x[k]instanceof Function?x[k](m,l):x[k];return q};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(b){b.WGLGeometryType=void 0;(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL"})(b.WGLGeometryType||(b.WGLGeometryType={}));b.WGLDrawPhase=void 0;(function(a){a[a.NONE=
0]="NONE";a[a.MAP=1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(b.WGLDrawPhase||(b.WGLDrawPhase={}));b.VVBinding=void 0;(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(b.VVBinding||(b.VVBinding={}));b.WGLVVTarget=void 0;(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";
a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(b.WGLVVTarget||(b.WGLVVTarget={}));b.MosaicType=void 0;(function(a){a[a.SPRITE=0]="SPRITE";a[a.GLYPH=1]="GLYPH"})(b.MosaicType||(b.MosaicType={}));b.WGLSymbologyType=void 0;(function(a){a[a.DEFAULT=0]="DEFAULT";a[a.SIMPLE=1]="SIMPLE";a[a.DOT_DENSITY=2]="DOT_DENSITY";a[a.OUTLINE_FILL=3]="OUTLINE_FILL";a[a.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";
a[a.HEATMAP=5]="HEATMAP";a[a.PIE_CHART=6]="PIE_CHART"})(b.WGLSymbologyType||(b.WGLSymbologyType={}));b.FeatureSelection=void 0;(function(a){a[a.All=0]="All";a[a.Highlight=1]="Highlight";a[a.InsideEffect=2]="InsideEffect";a[a.OutsideEffect=3]="OutsideEffect"})(b.FeatureSelection||(b.FeatureSelection={}));b.FeatureBatchingStrategy=void 0;(function(a){a[a.BATCHING=0]="BATCHING";a[a.STRICT_ORDER=1]="STRICT_ORDER";a[a.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(b.FeatureBatchingStrategy||(b.FeatureBatchingStrategy=
{}));b.FeatureSymbologyDrawOrder=void 0;(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT"})(b.FeatureSymbologyDrawOrder||(b.FeatureSymbologyDrawOrder={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/clippingUtils":function(){define(["exports","../../../geometry/support/contains"],function(b,a){function f(d,r,h){const g="string"===typeof d.left?parseFloat(d.left)/100*r:d.left,p="string"===typeof d.right?parseFloat(d.right)/
100*r:d.right,n="string"===typeof d.top?parseFloat(d.top)/100*h:d.top;d="string"===typeof d.bottom?parseFloat(d.bottom)/100*h:d.bottom;return{xmin:g,xmax:Math.max(r-p,g),ymin:n,ymax:Math.max(h-d,n)}}b.clipContainsPoint=function(d,r,h,g){switch(r.type){case "rect":const {width:p,height:n}=d,{xmin:e,xmax:c,ymin:m,ymax:l}=f(r,p,n),{x,y:q}=h;return x>e&&x<c&&q>m&&q<l;case "path":return 0!==r.path.length&&Array.isArray(r.path[0][0])?a.ringsContainsCoords(r.path,[h.x,h.y]):!0;case "geometry":return null==
r.geometry?!0:"polygon"===r.geometry.type?a.polygonContainsPoint(r.geometry,g):a.extentContainsPoint(r.geometry,g)}};b.createScreenExtent=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/HighlightGroup":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./HighlightOptions".split(" "),
function(b,a,f,d,r,h,g,p,n){var e;b.HighlightGroup=e=class extends f{constructor(...c){super(...c);this.name="default";this.options=new n}clone(){return new e({name:this.name,options:this.options.clone()})}};a.__decorate([d.property({type:String})],b.HighlightGroup.prototype,"name",void 0);a.__decorate([d.property({type:n})],b.HighlightGroup.prototype,"options",void 0);b.HighlightGroup=e=a.__decorate([p.subclass("esri.views.2d.support.HighlightGroup")],b.HighlightGroup);Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/support/highlightGroupUtils":function(){define(["exports","../../../core/Collection","./HighlightGroup","./HighlightOptions","../../support/HighlightDefaults"],function(b,a,f,d,r){function h(){return new g([{name:r.defaultHighlightName,options:new d},{name:r.temporaryHighlightName,options:new d({color:r.temporaryHighlightColor})}])}const g=a.ofType(f.HighlightGroup);a=h().items.map(p=>p.name);b.admissibleHighlightGroupNames=a;b.createInitialHighlightGroups=h;b.getDefaultHighlightOptions=
function(p){if(!p.highlights)return null;const n=p.highlights.findIndex(e=>"default"===e.name);return-1===n?null:p.highlights.items[n].options};b.setDefaultHighlightOptions=function(p,n){if(!p.highlights){if(!n)return;p.highlights=new g([{name:"default",options:new d}])}const e=p.highlights.findIndex(c=>"default"===c.name);n?p.highlights.items[e].options=n:p.highlights.removeAt(e)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/hitTestUtils":function(){define("exports ../../../Graphic ../../../core/arrayUtils ../../../core/iteratorUtils ./clippingUtils ../../support/screenUtils".split(" "),
function(b,a,f,d,r,h){function g(c,m,l,x,q,k){return u=>{if(u instanceof a){if(u.layer===c)k?.();else{var v=c.allLayerViews.find(z=>z.layer===u.layer);v&&q?.(v)}x(n(u))}else"layer"in u&&"element"in u||("subtype-sublayer"===u.type?(v=c.allLayerViews.find(z=>z.layer===u.parent))&&l(u,v):(v=c.allLayerViews.find(z=>z.layer===u))&&m(v))}}function p(c,m){if(c)if(d.isIterable(c))for(const l of c)if(d.isIterable(l))for(const x of l)m(x);else m(l);else m(c)}function n(c){const m=c.getObjectId();return m?`${c.layer?.uid??
c.sourceLayer?.uid??"MapView"}/${m}`:`"MapView/${c.uid}`}function e({layer:c},m){"subtype-group"===c?.type&&c.sublayers.forEach(l=>{m(l)})}b.hitTest=async function(c,m,l){const x=h.isSupportedScreenPointEvent(m)?h.createScreenPointFromSupportedEvent(c,m):m;if(!c.ready||isNaN(x.x)||isNaN(x.y))return{screenPoint:x,results:[]};let q=new Set;const k=new Set;let u=!1,v=null,z=null;l?.include?p(l.include,g(c,t=>{q.add(t);e(t,w=>k.add(w))},(t,w)=>{k.add(t);q.add(w)},t=>{v||=new Set;v.add(t)},t=>q.add(t),
()=>u=!0)):(u=!0,q=new Set(c.allLayerViews),q.forEach(t=>{e(t,w=>k.add(w))}));l?.exclude&&p(l.exclude,g(c,t=>{q.delete(t);e(t,w=>k.delete(w))},t=>k.delete(t),t=>{z||=new Set;z.add(t)}));const y=c.toMap(x);l=c.allLayerViews.filter(t=>!t.suspended&&q.has(t)&&t.clips.every(w=>r.clipContainsPoint(c,w,x,y))).reverse();m=u?c.graphicsView.hitTest(y).map(t=>({type:"graphic",graphic:t,layer:null,mapPoint:y})):[];l=await Promise.all(l.map(t=>t.hitTest(y,x)).toArray());m=[...m,...l].filter(f.isSome).flat().filter(f.isSome);
m=m.filter(t=>"graphic"===t.type&&"subtype-group"===t.layer?.type?k.has(t.graphic.layer):!0);v&&(m=m.filter(t=>!("graphic"in t)||!t.graphic||v?.has(n(t.graphic))));z&&(m=m.filter(t=>!("graphic"in t)||!t.graphic||!z?.has(n(t.graphic))));return{screenPoint:x,results:m}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/screenshotUtils":function(){define(["exports","../../support/screenshotUtils"],function(b,a){function f(g,p){const n=r(p||{},Math.min(4,a.getMaximumResolutionScale(g.size,
Math.min(4096,g.stage.context.parameters.maxTextureSize))),g.size,g.padding),e=d(p,g.allLayerViews);return g.stage.takeScreenshot(n,e,g.backgroundColor,p?.rotation)}function d(g={},p){if(g.layers){var n=[];g.layers.forEach(e=>{const c=p.find(m=>m.layer.id===e.id);c?.container&&n.push(c.container)});return n}}function r(g,p,n,e){g.ignorePadding&&(e={left:0,right:0,top:0,bottom:0});var c=null;null!=g.width&&null!=g.height?c=[g.width,g.height]:null==g.width&&null!=g.height?c=[g.height,g.height]:null!=
g.width&&null==g.height?c=[g.width,g.width]:null==g.width&&null==g.height&&(c=null);var m=n[0]-(e.left+e.right);n=n[1]-(e.top+e.bottom);g=g.area||{x:0,y:0,width:m,height:n};if(c){const l=c[0]/c[1];l>m/n?(m=g.width/l,g={x:g.x,y:Math.round(g.y+(g.height-m)/2),width:g.width,height:Math.round(m)}):(m=g.height*l,g={x:Math.round(g.x+(g.width-m)/2),y:g.y,width:Math.round(m),height:g.height})}else c=[g.width,g.height];c[0]>g.width?(p=Math.min(c[0]/g.width,p),c=c[0]/g.width/p):(p=1,c=c[0]/g.width);return{cropArea:{x:Math.round((g.x+
e.left)*p),y:Math.round((g.y+e.top)*p),width:Math.round(g.width*p),height:Math.round(g.height*p)},outputScale:c,resolutionScale:p}}const h={flipY:!0,premultipliedAlpha:!0};b.createScreenshotRegion=r;b.takeRawScreenshot=async function(g,p){g=await f(g,p);return a.encodeData(g,h)};b.takeScreenshot=async function(g,p){g=await f(g,p);const {format:n,quality:e}=a.getFormatAndQuality(p?.format,p?.quality);return a.encode(g,{format:n,quality:e},h)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/imageUtils"],function(b,a,f,d){function r(k,u){const {format:v,quality:z,rotation:y,disableDecorations:t}=k||{};var w=e(k,u.padding);var B=u.width-w.left-w.right;u=u.height-w.top-w.bottom;w={x:0,y:0,width:B,height:u};if(k?.area){null!=k.area.x&&(w.x=Math.floor(k.area.x));null!=k.area.y&&(w.y=Math.floor(k.area.y));var A=null!=k.area.width?Math.floor(k.area.width):null,D=null!=k.area.height?
Math.floor(k.area.height):null;w.width=B-w.x;w.height=u-w.y;null!=A&&null!=D?(w.width=Math.min(w.width,A),w.height=Math.min(w.height,D)):null==A&&null!=D?(A=Math.min(w.width,A),w.height*=A/w.width,w.width=A):null!=A&&null==D&&(A=Math.min(w.height,D),w.width*=A/w.height,w.height=A)}w=n(w,k);A=Math.floor(Math.max(w.x,0));D=Math.floor(Math.max(w.y,0));B={x:A,y:D,width:Math.floor(Math.min(w.width,B-A)),height:Math.floor(Math.min(w.height,u-D))};u=B.width/B.height;w=w.width/w.height;w!==u&&(w>u?(u=Math.floor(B.width/
w),B={x:B.x,y:Math.floor(B.y+(B.height-u)/2),width:B.width,height:u}):(u=Math.floor(B.height*w),B={x:Math.floor(B.x+(B.width-u)/2),y:B.y,width:u,height:B.height}));const {width:E,height:I}=p(k,B);u=c(v);w=x[u];w=f.clamp(null!=z?z:w,0,100);return{format:u,quality:w,area:B,width:E,height:I,rotation:y,disableDecorations:!!t,ignoreBackground:!!k?.ignoreBackground,ignorePadding:!!k?.ignorePadding}}function h(k,u){null==m&&(m=document.createElement("canvas"));var v=m;if(u.premultipliedAlpha){var z=k.data;
const t=z.length;for(let w=0;w<t;w+=4){var y=z[w+3];255!==y&&0<y&&(y=255/y,z[w]*=y,z[w+1]*=y,z[w+2]*=y)}}v.width=k.width;v.height=k.height;z=v.getContext("2d",{willReadFrequently:!0});z.putImageData(k,0,0);u.flipY&&(z.save(),z.globalCompositeOperation="copy",z.scale(1,-1),z.translate(0,-z.canvas.height),z.drawImage(z.canvas,0,0),z.restore());return{ctx:z,canvas:v}}function g(k,u){return k.toDataURL(l[u.format],u.quality/100)}function p(k,u){if(!k)return u;const v=k.width;k=k.height;if(null!=v&&null!=
k)return{width:Math.floor(v),height:Math.floor(k)};if(null==v&&null==k)return u;u=u.width/u.height;return null==k?{width:Math.floor(v),height:Math.floor(v/u)}:{width:Math.floor(k*u),height:Math.floor(k)}}function n(k,u){if(null==u?.width||null==u.height)return k;u=u.width/u.height;const v=k.width/k.height;if(v===u)return k;if(v<u)return u=Math.floor(k.height*u),k.x-=(u-k.width)/2,k.width=u,k;u=Math.floor(k.width/u);k.y-=(u-k.height)/2;k.height=u;return k}function e(k,u){return!u||k?.ignorePadding?
q:u}function c(k){switch(k){case "png":case "jpg":case "jpeg":return k;case null:case void 0:return"png";default:return"png"}}let m=null;const l={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},x={png:100,jpg:98,jpeg:98},q={top:0,right:0,bottom:0,left:0};b.createEmptyImageData=d.createEmptyImageData;b.completeUserSettings=r;b.encode=function(k,u,v){const {ctx:z,canvas:y}=h(k,v);k=z.getImageData(0,0,k.width,k.height);u=g(y,u);y.width=0;y.height=0;return{dataUrl:u,data:k}};b.encodeData=function(k,
u){const {ctx:v,canvas:z}=h(k,u);k=v.getImageData(0,0,k.width,k.height);z.width=0;z.height=0;return k};b.getFormatAndQuality=function(k,u){k=c(k);const v=x[k];u=f.clamp(null!=u?u:v,0,100);return{format:k,quality:u}};b.getMaximumResolutionScale=function(k,u){return u/Math.max(k[0],k[1])};b.resampleHermite=function(k,u,v,z=0,y=0,t=k.width-z,w=k.height-y,B=!1){const {data:A}=k,{width:D,height:E,data:I}=u;t/=D;w/=E;const O=Math.ceil(t/2),U=Math.ceil(w/2);k=k.width;for(let P=0;P<E;P++)for(let T=0;T<D;T++){const C=
4*(T+(B?E-P-1:P)*D);let F=0,N=0,Y=0,G=0,J=0,M=0;const V=(P+.5)*w;for(let Z=Math.floor(P*w);Z<(P+1)*w;Z++){var W=Math.abs(V-(Z+.5))/U;const aa=(T+.5)*t;W*=W;for(let ia=Math.floor(T*t);ia<(T+1)*t;ia++){var K=Math.abs(aa-(ia+.5))/O;K=Math.sqrt(W+K*K);if(1<=K)continue;K=2*K*K*K-3*K*K+1;const da=4*(z+ia+(y+Z)*k);M+=K*A[da+3];N+=K;!v&&255>A[da+3]&&(K=K*A[da+3]/255);Y+=K*A[da];G+=K*A[da+1];J+=K*A[da+2];F+=K}}I[C]=Y/F;I[C+1]=G/F;I[C+2]=J/F;I[C+3]=M/N}return u};b.screenshotSuperSampleSettings=function(k,u,
v){if(!u)return k;const {framebufferWidth:z,framebufferHeight:y,pixelRatio:t,region:w}=k;u=e(k,v);v=u.left+u.right;const B=u.top+u.bottom,A=z-v,D=y-B,E=Math.min(8,Math.min((2048-v)/A,(2048-B)/D));return 1.5>E?k:{...k,framebufferWidth:Math.round(A*E)+v,framebufferHeight:Math.round(D*E)+B,pixelRatio:t*E,resample:{region:{x:Math.round((w.x-u.left)*E)+u.left,y:Math.round((w.y-u.top)*E)+u.top,width:Math.round(w.width*E),height:Math.round(w.height*E)},width:z,height:y}}};b.toDataUrl=g;b.toRenderSettings=
function(k,u){const v=r(k,u),z=v.area,y=v.width/z.width,t=e(v,u.padding),w=t.left+t.right,B=t.top+t.bottom;return{framebufferWidth:Math.floor((u.width-w)*y+w),framebufferHeight:Math.floor((u.height-B)*y+B),region:{x:Math.floor(z.x*y)+t.left,y:Math.floor(z.y*y)+t.top,width:v.width,height:v.height},format:v.format,quality:v.quality,rotation:v.rotation,pixelRatio:y,layers:k?.layers??[],disableDecorations:v.disableDecorations,ignoreBackground:v.ignoreBackground,ignorePadding:v.ignorePadding,objectAndLayerIdColor:!1}};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/imageUtils":function(){define("require exports ../request ./Error ./promiseUtils ./urlUtils ../support/base64Utils".split(" "),function(b,a,f,d,r,h,g){function p(l,x,q){q||(c||(c=document.createElement("canvas"),c.width=1,c.height=1),q=c);return q.getContext("2d").createImageData(l,x)}async function n(l,x){l=window.URL.createObjectURL(l);try{const {data:q}=await f(l,{...x,responseType:"image"});return q}catch(q){if(!r.isAbortError(q))throw new d("invalid-image",
`Could not fetch requested image at ${l}`);throw q;}finally{window.URL.revokeObjectURL(l)}}async function e(l,x){const q=h.dataComponents(l);if(q?.isBase64)return{arrayBuffer:g.base64ToArrayBuffer(q.data),mediaType:q.mediaType};x=await f(l,{responseType:"array-buffer",...x});l=x.data;x=x.getHeader?.("Content-Type")??"";return{arrayBuffer:l,mediaType:x}}let c=null,m=!0;a.createEmptyImageData=function(l,x,q){if(!l||!x)throw Error("Cannot construct image data without dimensions");if(m)try{return new ImageData(l,
x)}catch(k){m=!1}return p(l,x,q)};a.getImageData=async function(l,x){const {arrayBuffer:q,mediaType:k}=await e(l,x);l="image/png"===k;if("image/gif"===k){const {isAnimatedGIF:u,parseGif:v}=await new Promise((z,y)=>b(["./image/gif"],z,y));if(u(q))return v(q,x)}if(l){const {isAnimatedPNG:u,parseApng:v}=await new Promise((z,y)=>b(["./image/apng"],z,y));if(u(q))return v(q,x)}l=new Blob([q],{type:k});return n(l,x)};a.wrapImageData=function(l,x,q,k){if(!x||!q)throw Error("Cannot construct image data without dimensions");
if(m)try{return new ImageData(l,x,q)}catch(u){m=!1}x=p(x,q,k);x.data.set(l,0);return x};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/StationaryManager":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,f,d,r,h,g,p){b.StationaryManager=class extends f{constructor(){super(...arguments);
this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now();null==this._timer&&(this._timer=setInterval(()=>{160<=performance.now()-this._timestamp&&this.clear()},160))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};a.__decorate([d.property()],b.StationaryManager.prototype,"_timer",void 0);a.__decorate([d.property()],b.StationaryManager.prototype,"stationary",null);b.StationaryManager=a.__decorate([p.subclass("esri.views.2d.support.StationaryManager")],
b.StationaryManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(b){class a{constructor(){this._names=new Map}begin(f){this._names.has(f)||(this._names.set(f,!1),f.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${f}.Start`))}end(f){this._names.has(f)&&!this._names.get(f)&&(this._names.set(f,!0),performance.mark(`Esri.${f}.End`))}record(f){this._names.has(f)||(this._names.set(f,!0),
performance.mark(`Esri.${f}`))}}b.Timeline=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(b,a,f){b.check=function(d){const r=f.getWebGLCapabilities();return r.available?"3d"===d&&r.majorPerformanceCaveat?new a("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):
r.supportsHighPrecisionFragment?r.supportsVertexShaderSamplers?null:new a("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new a("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new a("webgl:required","WebGL2 is required but not supported.",Error().stack)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports"],
function(b){function a(r){if("undefined"===typeof WebGL2RenderingContext)return null;var h=document.createElement("canvas");if(!h)return null;let g=h.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});null==g&&(g=h.getContext("webgl2"),null!=g&&(r.majorPerformanceCaveat=!0));if(null==g)return g;r.available=!0;r.maxTextureSize=g.getParameter(g.MAX_TEXTURE_SIZE);r.supportsVertexShaderSamplers=0<g.getParameter(g.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(h=g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_FLOAT))r.supportsHighPrecisionFragment=
0<h.precision;return g}let f;class d{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}b.getWebGLCapabilities=function(){if(!f){{const r=new d,h=a(r);null!=h&&(r.supportsColorBufferFloat=null!==h.getExtension("EXT_color_buffer_float"),r.supportsColorBufferFloatBlend=null!==h.getExtension("EXT_float_blend"),
r.supportsColorBufferHalfFloat=r.supportsColorBufferFloat||null!==h.getExtension("EXT_color_buffer_half_float"));f=r}}return f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/DefaultUI":function(){define("../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l){a=class extends n{constructor(x){super(x);this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};this.components=[];this._updateViewAwareWidgets=q=>{this.components.forEach(k=>{k=this._find(k)?.widget;void 0!==k?.view&&(k.view=q)})};this._componentsWatcher=(q,k)=>{this._removeComponents(k);this._addComponents(q);this._adjustPadding(q)}}initialize(){this.addHandles([d.watch(()=>this.components,this._componentsWatcher,
d.initial),d.watch(()=>this.view,this._updateViewAwareWidgets,d.initial)])}_add(x,q,k,u,v){let z=x;if("string"===typeof x&&this._defaultPositionLookup[x]){if(this._find(x))return;z=this._createComponent(x)}super._add(z,q,k,u,v)}_removeComponents(x){x.forEach(q=>{if(q=this._find(q))this.remove(q),q.destroy()})}_adjustPadding(x){x.includes("attribution")||this._isOverridden("padding")||({top:x}=this.padding,this.padding=x)}_addComponents(x){this.constructed&&x.forEach(q=>this.add(this._createComponent(q),
this._defaultPositionLookup[q]))}_createComponent(x){const q=this._createWidget(x);return new p({id:x,node:q})}_createWidget(x){const q=this.view;switch(x){case "attribution":return new e({view:q});case "compass":return new c({view:q});case "navigation-toggle":return new m({view:q});case "zoom":return new l({view:q})}}};b.__decorate([r.property()],a.prototype,"components",void 0);return a=b.__decorate([g.subclass("esri.views.ui.DefaultUI")],a)})},"esri/views/ui/Component":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,f,d,r,h,g,p){a=class extends a{constructor(){super(...arguments);this.widget=null}destroy(){this.node=null;this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(n){this._set("id",n)}set node(n){const e=this._get("node");n!==e&&(n&&n.classList.add("esri-component"),e&&e.classList.remove("esri-component"),this._set("node",n))}castNode(n){this.widget?.destroy();if(!n)return this._set("widget",null),null;if("string"===typeof n||n&&"nodeType"in n)return this._set("widget",
null),f.byId(n);n&&"function"===typeof n.render&&!n.domNode&&(n.domNode=document.createElement("div"));this._set("widget",n);return n.domNode}};b.__decorate([d.property()],a.prototype,"id",null);b.__decorate([d.property()],a.prototype,"node",null);b.__decorate([r.cast("node")],a.prototype,"castNode",null);b.__decorate([d.property({readOnly:!0})],a.prototype,"widget",void 0);return a=b.__decorate([p.subclass("esri.views.ui.Component")],a)})},"esri/views/ui/UI":function(){define("../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/arrayUtils ../../core/Evented ../../core/handleUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q){function k(t){return 0===t?"0":`${t}px`}function u(t){const w="object"===typeof t&&null!==t&&Object.getPrototypeOf(t);return null!==w&&w!==Object.prototype||!("component"in t||"index"in t||"position"in t)?null:t}function v(t,{top:w,bottom:B,left:A,right:D}){t.style.top=w;t.style.bottom=B;t.style.left=A;t.style.right=D}const z={left:0,top:0,bottom:0,right:0},y={bottom:30,top:15,right:15,left:15};a=class extends r.EventedAccessor{constructor(t){super(t);this._cornerNameToContainerLookup=
{};this._positionNameToContainerLookup={};this._components=[];this._componentMap=new Map;this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol");this._locale=q.getLocale();this.view=null;this._applyViewPadding=()=>{const w=this.container;w&&v(w,this._toPixelPosition(this._getViewPadding()))};this._applyUIPadding=()=>{const w=this._innerContainer;w&&v(w,this._toPixelPosition(this.padding))};this._initContainers()}initialize(){this.addHandles([g.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,
g.initial),g.watch(()=>this.padding,this._applyUIPadding,g.initial),g.watch(()=>[this.container,this._locale],([t,w])=>{t&&t.setAttribute("lang",w)},g.initial),q.onLocaleChange(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0;this._componentMap.clear()}set container(t){const w=this._get("container");t!==w&&(t&&(t.classList.add("esri-ui"),m.setCalciteThemeClass(t),this._attachContainers(t)),w&&(w.classList.remove("esri-ui"),
v(w,{top:"",bottom:"",left:"",right:""}),w.textContent=""),this._set("container",t))}get height(){const t=this.view?.height??0;if(0===t)return t;const w=this._getViewPadding(),{top:B,bottom:A}=w;return Math.max(t-B-A,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return"number"===typeof t?{bottom:t,top:t,right:t,left:t}:{...y,...t}}get width(){const t=this.view?.width??0;if(0===t)return t;const w=this._getViewPadding(),{left:B,right:A}=
w;return Math.max(t-B-A,0)}add(t,w){let B,A,D;if(Array.isArray(t))t.forEach(I=>this.add(I,w));else{var E=u(t);E&&({index:B,position:w,component:t,key:A}=E);w&&"object"===typeof w&&({index:B,key:A,position:w,internal:D}=w);!t||w&&!this._isValidPosition(w)||this._add(t,w,B,A,D)}}remove(t,w){if(t){if(Array.isArray(t))return t.map(A=>this.remove(A,w));if((t=this._find(t))&&(!this._componentMap.has(t)||this._componentMap.get(t)?.key===w)){var B=this._components.indexOf(t);t.node.parentNode?.removeChild(t.node);
this._componentMap.delete(t);t.widget?.removeHandlesReference(this._removeWidgetHandleKey);return this._components.splice(B,1)[0]}}}empty(t,w={removeInternal:!1}){if(Array.isArray(t))for(const B of t)this.empty(B,w);else{t=Array.prototype.slice.call(this._positionNameToContainerLookup[t??"manual"].children).map(B=>this._findByNode(B)).filter(B=>null==B?!1:!(this._componentMap.get(B)?.internal??!1)||w.removeInternal);for(const B of t)this.remove(B)}}move(t,w){Array.isArray(t)&&t.forEach(D=>this.move(D,
w));if(t){var B=u(t)||u(w);if(B){var A=B.index;w=B.position;t=B.component||t}(!w||this._isValidPosition(w))&&(t=this.remove(t))&&this.add(t,{position:w,index:A})}}find(t){return t?(t=this._findById(t))&&(t.widget||t.node):null}getComponents(t,w={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(B=>this._getComponentsAtPosition(B,w)):this._getComponentsAtPosition(t,w):this._components.filter(B=>w.includeInternal||!(this._componentMap.get(B)?.internal??!1)).map(({widget:B,node:A})=>B??A)}getPosition(t){for(const w in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[w].contains(t))return w;
return null}_add(t,w,B,A,D){t instanceof l||(t=new l({node:t}));const {widget:E}=t;null!=E&&E instanceof f&&E.addHandles(h.makeHandle(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey);this._place({component:t,position:w,index:B});this._components.push(t);this._componentMap.set(t,{key:A,internal:D})}_find(t){return t?t instanceof l?this._findByComponent(t):"string"===typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.view?.padding??z}_attachContainers(t){t.appendChild(this._innerContainer);
t.appendChild(this._manualContainer)}_initContainers(){var t=document.createElement("div");t.classList.add("esri-ui-inner-container","esri-ui-corner-container");const w=document.createElement("div");w.classList.add("esri-ui-inner-container","esri-ui-manual-container");const B=document.createElement("div");B.classList.add("esri-ui-top-left","esri-ui-corner");t.appendChild(B);const A=document.createElement("div");A.classList.add("esri-ui-top-right","esri-ui-corner");t.appendChild(A);const D=document.createElement("div");
D.classList.add("esri-ui-bottom-left","esri-ui-corner");t.appendChild(D);const E=document.createElement("div");E.classList.add("esri-ui-bottom-right","esri-ui-corner");t.appendChild(E);this._innerContainer=t;this._manualContainer=w;t=x.isRTL();this._cornerNameToContainerLookup={"top-left":B,"top-right":A,"bottom-left":D,"bottom-right":E,"top-leading":t?A:B,"top-trailing":t?B:A,"bottom-leading":t?E:D,"bottom-trailing":t?D:E};this._positionNameToContainerLookup={manual:w,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var w=
t.position??"manual";const {component:B,index:A}=t;t=this._positionNameToContainerLookup[w];w=null!=A&&-1<A;var D=B.widget;D&&!D._started&&"function"===typeof D.postMixInProperties&&"function"===typeof D.buildRendering&&"function"===typeof D.postCreate&&"function"===typeof D.startup&&B.widget.startup();w?(w=Array.from(t.children),0===A?({firstChild:w}=t,w?w.parentNode?.insertBefore(B.node,w):t.appendChild(B.node)):A>=w.length?t.appendChild(B.node):(t=w[A],t.parentNode?.insertBefore(B.node,t))):t.appendChild(B.node)}_toPixelPosition(t){return{top:k(t.top),
left:k(t.left),right:k(t.right),bottom:k(t.bottom)}}_findByComponent(t){return this._components.find(w=>w===t)??null}_findById(t){return this._components.find(({id:w})=>w===t)??null}_findByNode(t){return this._components.find(({node:w})=>w===t)??null}_getComponentsAtPosition(t,w){return Array.prototype.slice.call(this._positionNameToContainerLookup[t].children).map(B=>this._findByNode(B)).filter(d.isSome).filter(B=>w.includeInternal||!(this._componentMap.get(B)?.internal??!1)).map(({widget:B,node:A})=>
B??A)}};b.__decorate([p.property()],a.prototype,"_locale",void 0);b.__decorate([p.property()],a.prototype,"container",null);b.__decorate([p.property()],a.prototype,"height",null);b.__decorate([p.property({value:y})],a.prototype,"padding",null);b.__decorate([n.cast("padding")],a.prototype,"castPadding",null);b.__decorate([p.property()],a.prototype,"view",void 0);b.__decorate([p.property()],a.prototype,"width",null);return a=b.__decorate([c.subclass("esri.views.ui.UI")],a)})},"esri/widgets/Attribution":function(){define("../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/globalCss ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x){d=class extends p{constructor(q,k){super(q,k);this._attributionTextOverflowed=this._isOpen=!1;this._prevSourceNodeHeight=0;this._resizeObserver=new ResizeObserver(u=>u.forEach(({target:v})=>this._checkSourceTextOverflow(v)));this.itemDelimiter=" | ";this.messages=null;this.viewModel=new n}initialize(){this.addHandles(a.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||
this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((q,k)=>{q.includes(k.text)||q.push(k.text);return q},[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(q){this._overrideIfSome("icon",q)}get label(){return this.messages?.widgetLabel??""}set label(q){this._overrideIfSome("label",q)}get view(){return this.viewModel.view}set view(q){this.viewModel.view=q}render(){return l.tsx("div",{bind:this,class:this.classes("esri-attribution",e.globalCss.widget,
{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return l.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",l.tsx("a",{class:"esri-attribution__link",href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const q=this._isOpen,k=this._isInteractive,u=k?0:void 0,{attributionText:v}=this;return l.tsx("div",{afterCreate:this._afterSourcesNodeCreate,
bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:q,[e.globalCss.interactive]:k}),innerHTML:v,tabIndex:u})}_afterSourcesNodeCreate(q){this._prevSourceNodeHeight=q.clientWidth;this._resizeObserver.observe(q)}_checkSourceTextOverflow(q){let k=!1;const {clientHeight:u,clientWidth:v,scrollWidth:z}=q;q=z>v;const y=this._attributionTextOverflowed!==q;this._attributionTextOverflowed=q;y&&(k=!0);this._isOpen&&(q=u<this._prevSourceNodeHeight,this._prevSourceNodeHeight=
u,q&&(this._isOpen=!1,k=!0));k&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};b.__decorate([f.property()],d.prototype,"_isOpen",void 0);b.__decorate([f.property()],d.prototype,"_isInteractive",null);b.__decorate([f.property()],d.prototype,"_attributionTextOverflowed",void 0);b.__decorate([f.property()],d.prototype,"_prevSourceNodeHeight",void 0);b.__decorate([f.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],d.prototype,"attributionText",
null);b.__decorate([f.property()],d.prototype,"icon",null);b.__decorate([f.property()],d.prototype,"itemDelimiter",void 0);b.__decorate([f.property()],d.prototype,"label",null);b.__decorate([f.property(),m.messageBundle("esri/widgets/Attribution/t9n/Attribution")],d.prototype,"messages",void 0);b.__decorate([f.property()],d.prototype,"view",null);b.__decorate([f.property({type:n})],d.prototype,"viewModel",void 0);b.__decorate([c.accessibleHandler()],d.prototype,"_toggleState",null);return d=b.__decorate([g.subclass("esri.widgets.Attribution")],
d)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../views/3d/layers/Lyr3DWasm".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q){function k(y,t){return y&&"copyright"in y&&(!t||"function"===typeof y.originOf&&"user"===y.originOf("copyright"))}function u(y,t){return y.length!==t.length||y.some((w,B)=>w.text!==t[B].text)}function v(y,t,w){w&&t&&(y.find(B=>B.layerView===t&&B.text===w)||y.push({text:w,layerView:t}))}const z=[];a=class extends a{constructor(y){super(y);this._clear=()=>{this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.removeHandles("suspension");
this.notifyChange("state")};this._pendingAttributions=new Set;this._fetchedAttributionData=new Map;this.items=new d;this.view=null;this._allLayerViewsChange=t=>{this.removeHandles("suspension");this.removeHandles("visible-geometry-changed");const w=this.view?.allLayerViews;w&&(this.addHandles(w.map(B=>r.watch(()=>[B.suspended,B.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),w.forEach(B=>{"esri.views.3d.layers.Tiles3DLayerView3D"===B.declaredClass&&this.addHandles(B.on("visible-geometry-changed",
()=>this._updateAttributionItems()),"visible-geometry-changed")}));t?.removed&&t.removed.forEach(B=>{this._pendingAttributions.delete(B);this._fetchedAttributionData.delete(B)});this._updateAttributionItems()};this.addHandles([r.on(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),r.when(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null;this._fetchedAttributionData.clear();
this._pendingAttributions.clear();this.items.removeAll()}get state(){return this.view?.ready?0<this._pendingAttributions.size?"loading":"ready":"disabled"}_updateAttributionItems(){const y=this.view;var t=y?.allLayerViews;z.length=0;if(y&&t){t.forEach(B=>{if(!B.suspended&&B.layer?.attributionVisible){var A=B.layer;if(k(A,"user"))v(z,B,A.copyright);else if(A.hasAttributionData)if(this._fetchedAttributionData.has(B)){var D=this._fetchedAttributionData.get(B);D?v(z,B,this._getDynamicAttribution(D,y,
A)):k(A)&&v(z,B,A.copyright)}else this._fetchAttributionData(B);else(D="portalItem"in A?A.portalItem?.accessInformation:void 0)?v(z,B,D):v(z,B,A.copyright)}});t=t.find(B=>"integrated-mesh-3dtiles"===B.layer?.type);if(this.view&&t){var w=q.getLyr3DWasm(this.view);if(w){w=w.getAttributionText();for(let B=0;B<w.length;++B)v(z,t,w[B])}}u(this.items,z)&&(this.items.removeAll(),this.items.addMany(z));z.length=0;this.notifyChange("state")}else this._clear()}async _fetchAttributionData(y){if(!this._pendingAttributions.has(y)){this._pendingAttributions.add(y);
var t=await f.result(y.layer.fetchAttributionData());this._pendingAttributions.has(y)&&(t=t.ok?this._createContributionIndex(t.value,"bing-maps"===y.layer.type):null,this._pendingAttributions.delete(y),this._fetchedAttributionData.set(y,t));this._updateAttributionItems()}}_createContributionIndex(y,t){y=y.contributors;const w={};if(!y)return w;for(let E=0;E<y.length;E++){const I=y[E];var B=I.coverageAreas;if(!B)return;for(const O of B){var A=O.bbox,D=O.zoomMin-(t&&O.zoomMin?1:0);B=O.zoomMax-(t&&O.zoomMax?
1:0);A=new c({xmin:A[1],ymin:A[0],xmax:A[3],ymax:A[2],spatialReference:m.WGS84});for(A={extent:x.geographicToWebMercator(A),attribution:I.attribution||"",score:null!=O.score?O.score:100,id:E};D<=B;D++){let U,W;(U=w)[W=D]??(U[W]=[]);w[D].push(A)}}}w.maxKey=Math.max.apply(null,Object.keys(w));return w}_getDynamicAttribution(y,t,w){const {extent:B,scale:A}=t;t=w.tileInfo?.scaleToZoom(A)??0;t=Math.min(y.maxKey??0,Math.round(t));if(!B||null==t||-1>=t)return"";y=y[t];const D=x.project(B.center.clone().normalize(),
m.WebMercator),E=new Set;return y?y.filter(I=>{const O=I.id;(I=!E.has(O)&&D&&I.extent&&l.extentContainsPoint(I.extent,D))&&E.add(O);return I}).sort((I,O)=>O.score-I.score||I.objectId-O.objectId).map(I=>I.attribution).join(", "):""}};b.__decorate([h.property({readOnly:!0,type:d})],a.prototype,"items",void 0);b.__decorate([h.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([h.property()],a.prototype,"view",void 0);return a=b.__decorate([e.subclass("esri.widgets.Attribution.AttributionViewModel")],
a)})},"esri/views/3d/layers/Lyr3DWasm":function(){define(["require","exports"],function(b,a){let f,d=null;const r=new Map;a.addLayerViewToWasm=async function(h){null==d&&(null==f&&(f=new Promise((n,e)=>b(["../../../layers/Lyr3DWasmPerSceneView"],c=>n(Object.freeze(Object.defineProperty({__proto__:null,default:c},Symbol.toStringTag,{value:"Module"}))),e))),d=await f);const g=h.view;let p=r.get(g);p||(p=new d.default({view:g}),r.set(g,p));await p.initializeWasm(!!g._stage.renderView.renderingContext.capabilities.compressedTextureS3TC);
return p.add3DTilesLayerView(h)};a.getLyr3DWasm=function(h){return r.get(h)};a.removeLayerViewFromWasm=function(h){const g=h.view,p=r.get(g);p&&1>p.remove3DTilesLayerView(h)&&(r.delete(g),0===r.size&&(d=f=null))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/globalCss":function(){define(["exports"],function(b){b.globalCss={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",
buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",
menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",
widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q){d=class extends p{constructor(k,u){super(k,u);this.messages=null;this.viewModel=new n;this._reset=()=>{this.viewModel.reset()};this._toRotationTransform=v=>({transform:`rotateZ(${v.z}deg)`})}loadDependencies(){return c.loadCalciteComponents({button:()=>new Promise((k,u)=>b(["../chunks/calcite-button"],k,u)),icon:()=>new Promise((k,u)=>b(["../chunks/calcite-icon"],k,u))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(k){this.viewModel.goToOverride=
k}get icon(){return"rotation"===this.viewModel.state?"arrow-up":"compass-needle"}set icon(k){this._overrideIfSome("icon",k)}get label(){return this.messages?.widgetLabel??""}set label(k){this._overrideIfSome("label",k)}get view(){return this.viewModel.view}set view(k){this.viewModel.view=k}reset(){return this.viewModel.reset()}render(){const {orientation:k,state:u}=this.viewModel,{messages:v}=this;return q.tsx("div",{class:this.classes(e.css.base,m.globalCss.widget)},q.tsx("calcite-button",{class:m.globalCss.widgetButton,
disabled:"disabled"===u,kind:"neutral",label:v.reset,onclick:this._reset,round:!0,scale:"s",title:v.reset},q.tsx("div",{"aria-hidden":"true",class:e.css.iconContainer,title:v.reset},q.tsx("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(k)}))))}};a.__decorate([f.property()],d.prototype,"goToOverride",null);a.__decorate([f.property()],d.prototype,"icon",null);a.__decorate([f.property()],d.prototype,"label",null);a.__decorate([f.property(),x.messageBundle("esri/widgets/Compass/t9n/Compass")],
d.prototype,"messages",void 0);a.__decorate([f.property()],d.prototype,"view",null);a.__decorate([f.property({type:n})],d.prototype,"viewModel",void 0);return d=a.__decorate([g.subclass("esri.widgets.Compass")],d)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../views/2d/navigation/duration ./utils ../support/GoTo".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c){a=class extends c.GoToMixin(a){constructor(m){super(m);this.orientation={x:0,y:0,z:0};this.view=null;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(f.watch(()=>this.view,this._updateRotationWatcher,f.initial))}destroy(){this.view=null}get canShowNorth(){return e.canShowNorth(this.view)}get state(){return!this.view?.ready||
"2d"===this.view.type&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&("2d"===this.view?.type?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:n.getGoToDuration()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(m){null!=m&&this._set("orientation",{z:m})}_updateForCamera(m){m&&this._set("orientation",{x:0,y:0,z:-m.heading})}_updateRotationWatcher(m){this.removeAllHandles();m&&this.addHandles("2d"===
m.type?f.watch(()=>m?.rotation,this._updateForRotation,f.initial):f.watch(()=>m?.camera,this._updateForCamera,f.initial))}};b.__decorate([d.property({readOnly:!0})],a.prototype,"canShowNorth",null);b.__decorate([d.property({readOnly:!0})],a.prototype,"orientation",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([d.property()],a.prototype,"view",void 0);return a=b.__decorate([p.subclass("esri.widgets.Compass.CompassViewModel")],a)})},"esri/views/2d/navigation/duration":function(){define(["exports",
"../../../core/has","../../../core/time"],function(b,a,f){b.getGoToDuration=function(){const d=a("mapview-essential-goto-duration");return null==d?d:f.Milliseconds(d)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass/utils":function(){define(["exports"],function(b){b.canShowNorth=function(a){return a?.spatialReference?.isWebMercator||a?.spatialReference?.isGeographic||!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,f,d,r,h,g,p){b.GoToMixin=n=>{n=class extends n{constructor(...e){super(...e);this.view=this.goToOverride=null}callGoTo(e){const {view:c}=this;f.assertIsSome(c);return this.goToOverride?this.goToOverride(c,e):c.goTo(e.target,e.options)}};a.__decorate([d.property()],n.prototype,"goToOverride",void 0);a.__decorate([d.property()],n.prototype,"view",void 0);return n=a.__decorate([p.subclass("esri.widgets.support.GoTo")],n)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass/css":function(){define(["exports"],
function(b){b.css={base:"esri-compass",iconContainer:"esri-compass__icon-container"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x,q){d=class extends p{constructor(k,u){super(k,u);this.messages=null;this.viewModel=new e;this.toggle=()=>this.viewModel.toggle();this._rotateButton=this._panButton=null;this._toggle=()=>{l.setFocus("pan"===this.viewModel?.navigationMode?this._rotateButton:this._panButton);this.toggle()}}loadDependencies(){return c.loadCalciteComponents({button:()=>new Promise((k,u)=>b(["../chunks/calcite-button"],k,u))})}get icon(){return"move"}set icon(k){this._overrideIfSome("icon",
k)}get label(){return this.messages?.widgetLabel??""}set label(k){this._overrideIfSome("label",k)}set layout(k){"horizontal"!==k&&(k="vertical");this._set("layout",k)}get view(){return this.viewModel.view}set view(k){this.viewModel.view=k}render(){const k="disabled"===this.viewModel?.state,u="pan"===this.viewModel?.navigationMode,v=this.messages.toggle;return q.tsx("div",{class:this.classes(n.css.base,m.globalCss.widget,{[n.css.isLayoutHorizontal]:"horizontal"===this.layout})},q.tsx("calcite-button",
{afterCreate:z=>{this._panButton=z},appearance:u?"outline-fill":"solid",class:m.globalCss.widgetButton,disabled:k,iconStart:"move",kind:"neutral",label:v,onclick:this._toggle,tabIndex:u?void 0:-1,title:v}),q.tsx("calcite-button",{afterCreate:z=>{this._rotateButton=z},appearance:u?"solid":"outline-fill",class:m.globalCss.widgetButton,disabled:k,iconStart:"rotate",kind:"neutral",label:v,onclick:this._toggle,tabIndex:u?-1:void 0,title:v}))}};a.__decorate([f.property()],d.prototype,"icon",null);a.__decorate([f.property()],
d.prototype,"label",null);a.__decorate([f.property({value:"vertical"})],d.prototype,"layout",null);a.__decorate([f.property(),x.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],d.prototype,"messages",void 0);a.__decorate([f.property()],d.prototype,"view",null);a.__decorate([f.property({type:e})],d.prototype,"viewModel",void 0);return d=a.__decorate([g.subclass("esri.widgets.NavigationToggle")],d)})},"esri/widgets/NavigationToggle/css":function(){define(["exports"],function(b){b.css=
{base:"esri-navigation-toggle",isLayoutHorizontal:"esri-navigation-toggle--horizontal"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,f,d,r,h,g,p){a=class extends a{constructor(n){super(n);
this._navigationMode="pan";this.view=null}initialize(){this.addHandles(f.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&"3d"===this.view?.type?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(n){this._navigationMode=n;this._setNavigationMode()}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate")}_setNavigationMode(){const n=this.view?.inputManager;
n&&(n.primaryDragAction="pan"===this._navigationMode?"pan":"rotate")}};b.__decorate([d.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([d.property()],a.prototype,"_navigationMode",void 0);b.__decorate([d.property()],a.prototype,"view",void 0);return a=b.__decorate([p.subclass("esri.widgets.NavigationToggle.NavigationToggleViewModel")],a)})},"esri/widgets/Zoom":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/ZoomViewModel".split(" "),
function(b,a,f,d,r,h,g,p,n,e,c,m,l,x){d=class extends p{constructor(q,k){super(q,k);this.messages=null;this.viewModel=new x;this.zoomIn=()=>this.viewModel.zoomIn();this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return n.loadCalciteComponents({button:()=>new Promise((q,k)=>b(["../chunks/calcite-button"],q,k))})}get icon(){return"magnifying-glass-plus"}set icon(q){this._overrideIfSome("icon",q)}get label(){return this.messages?.widgetLabel??""}set label(q){this._overrideIfSome("label",
q)}set layout(q){"horizontal"!==q&&(q="vertical");this._set("layout",q)}set view(q){this.viewModel.view=q}get view(){return this.viewModel.view}render(){const q={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:k,canZoomOut:u}=this.viewModel,{zoomIn:v,zoomOut:z}=this.messages;return l.tsx("div",{class:this.classes("esri-zoom",e.globalCss.widget,q)},l.tsx("calcite-button",{class:e.globalCss.widgetButton,disabled:!k,iconStart:"plus",kind:"neutral",label:v,onclick:this.zoomIn,title:v}),
l.tsx("calcite-button",{class:e.globalCss.widgetButton,disabled:!u,iconStart:"minus",kind:"neutral",label:z,onclick:this.zoomOut,title:z}))}};a.__decorate([f.property()],d.prototype,"icon",null);a.__decorate([f.property()],d.prototype,"label",null);a.__decorate([f.property({value:"vertical"})],d.prototype,"layout",null);a.__decorate([f.property(),m.messageBundle("esri/widgets/Zoom/t9n/Zoom")],d.prototype,"messages",void 0);a.__decorate([f.property()],d.prototype,"view",null);a.__decorate([f.property({type:x})],
d.prototype,"viewModel",void 0);return d=a.__decorate([g.subclass("esri.widgets.Zoom")],d)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(b,a,f,d,r,h,g,p,n,e){a=class extends a{constructor(c){super(c)}destroy(){this.view=
null}get canZoomIn(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(c){c?"2d"===c.type?this._zoomConditions=new n({view:c}):"3d"===c.type&&(this._zoomConditions=new e({view:c})):this._zoomConditions=null;this._set("view",c)}zoomIn(){if(this.canZoomIn){var c=this.view;"2d"===c.type?c.mapViewNavigation.zoomIn():f.ignoreAbortErrors(c.goTo({zoomFactor:2}))}}zoomOut(){if(this.canZoomOut){var c=
this.view;"2d"===c.type?c.mapViewNavigation.zoomOut():f.ignoreAbortErrors(c.goTo({zoomFactor:.5}))}}};b.__decorate([d.property()],a.prototype,"_zoomConditions",void 0);b.__decorate([d.property()],a.prototype,"canZoomIn",null);b.__decorate([d.property()],a.prototype,"canZoomOut",null);b.__decorate([d.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([d.property()],a.prototype,"view",null);return a=b.__decorate([p.subclass("esri.widgets.Zoom.ZoomViewModel")],a)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,f,d,r,h,g){a=class extends a{get canZoomIn(){if(!this.view?.ready)return!1;const p=this.view?.constraints?.effectiveMaxScale;return 0===p||this._scale>p}get canZoomOut(){var {view:p}=this;if(!p?.ready)return!1;p=p.constraints?.effectiveMinScale;return 0===p||this._scale<p}get _scale(){const p=this.view?.animation?.target;return(p&&"then"in p?void 0:p?.scale)??this.view?.scale??0}};b.__decorate([f.property({readOnly:!0})],a.prototype,"canZoomIn",null);b.__decorate([f.property({readOnly:!0})],
a.prototype,"canZoomOut",null);b.__decorate([f.property()],a.prototype,"view",void 0);b.__decorate([f.property()],a.prototype,"_scale",null);return a=b.__decorate([g.subclass("esri.widgets.Zoom.ZoomConditions2D")],a)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,f,d,r,h,g){a=
class extends a{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};b.__decorate([f.property({readOnly:!0})],a.prototype,"canZoomIn",null);b.__decorate([f.property({readOnly:!0})],a.prototype,"canZoomOut",null);b.__decorate([f.property()],a.prototype,"view",void 0);return a=b.__decorate([g.subclass("esri.widgets.Zoom.ZoomConditions3D")],a)})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(b,a,f,d,r,h,g){f=class extends g{constructor(p){super(p);this.components=["attribution","zoom"]}};b.__decorate([a.property()],f.prototype,"components",void 0);return f=b.__decorate([h.subclass("esri.views.ui.2d.DefaultUI2D")],f)})},"esri/webmap/utils":function(){define(["exports","./Version"],function(b,a){a=new a.Version(2,32);b.currentVersion=a;b.isWebMap=function(f){return null!=f&&"object"===typeof f&&"declaredClass"in f&&"esri.WebMap"===f.declaredClass};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/webmap/Version":function(){define(["exports","../core/Version"],function(b,a){class f extends a.Version{constructor(d,r){super(d,r,"webmap")}}b.Version=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,f,d,r,h,g,p){var n;f=n=class extends f.JSONSupport{constructor(e){super(e);this.color=new a([0,0,0,1])}clone(){return new n(d.clone({color:this.color}))}};b.__decorate([r.property({type:a,json:{write:!0}})],f.prototype,"color",void 0);return f=n=b.__decorate([p.subclass("esri.webmap.background.ColorBackground")],f)})},"*noref":1}});
define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./View2D".split(" "),function(b,a,f,d,r,h,g){f=class extends g{constructor(p){super(p);this.view2dType="map"}};b.__decorate([a.property({readOnly:!0})],f.prototype,"view2dType",void 0);return f=b.__decorate([h.subclass("esri.views.MapView")],f)});